(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const rl="https://browser.blockstack.org/auth",sl={"@type":"Person","@context":"http://schema.org"},Vi=["store_write"],ol="blockstack-session",il={logLevel:"debug"},xt={MISSING_PARAMETER:"missing_parameter",REMOTE_SERVICE_ERROR:"remote_service_error",INVALID_STATE:"invalid_state",NO_SESSION_DATA:"no_session_data",DOES_NOT_EXIST:"does_not_exist",FAILED_DECRYPTION_ERROR:"failed_decryption_error",INVALID_DID_ERROR:"invalid_did_error",NOT_ENOUGH_FUNDS_ERROR:"not_enough_error",INVALID_AMOUNT_ERROR:"invalid_amount_error",LOGIN_FAILED_ERROR:"login_failed",SIGNATURE_VERIFICATION_ERROR:"signature_verification_failure",CONFLICT_ERROR:"conflict_error",NOT_ENOUGH_PROOF_ERROR:"not_enough_proof_error",BAD_PATH_ERROR:"bad_path_error",VALIDATION_ERROR:"validation_error",PAYLOAD_TOO_LARGE_ERROR:"payload_too_large_error",PRECONDITION_FAILED_ERROR:"precondition_failed_error",UNKNOWN:"unknown"};Object.freeze(xt);class Yt extends Error{constructor(t){super();let n=t.message,r=`Error Code: ${t.code}`,s=this.stack;if(s)r+=`Stack Trace:
${s}`;else try{throw new Error}catch(o){s=o.stack}n+=`
If you believe this exception is caused by a bug in stacks.js,
      please file a bug report: https://github.com/blockstack/stacks.js/issues

${r}`,this.message=n,this.code=t.code,this.parameter=t.parameter?t.parameter:void 0}toString(){return`${super.toString()}
    code: ${this.code} param: ${this.parameter?this.parameter:"n/a"}`}}class al extends Yt{constructor(t,n=""){super({code:xt.MISSING_PARAMETER,message:n,parameter:t}),this.name="MissingParametersError"}}class Bo extends Yt{constructor(t=""){super({code:xt.INVALID_DID_ERROR,message:t}),this.name="InvalidDIDError"}}class Nn extends Yt{constructor(t){const n=`Failed to login: ${t}`;super({code:xt.LOGIN_FAILED_ERROR,message:n}),this.message=n,this.name="LoginFailedError"}}class _o extends Yt{constructor(t="Unable to decrypt cipher object."){super({code:xt.FAILED_DECRYPTION_ERROR,message:t}),this.message=t,this.name="FailedDecryptionError"}}class Yr extends Yt{constructor(t){super({code:xt.INVALID_STATE,message:t}),this.message=t,this.name="InvalidStateError"}}class Gi extends Yt{constructor(t){super({code:xt.INVALID_STATE,message:t}),this.message=t,this.name="NoSessionDataError"}}const Po=["debug","info","warn","error","none"],qr={};for(let e=0;e<Po.length;e++){const t=Po[e];qr[t]=e}class _t{static error(t){this.shouldLog("error")&&console.error(this.logMessage("error",t))}static warn(t){this.shouldLog("warn")&&console.warn(this.logMessage("warn",t))}static info(t){this.shouldLog("info")&&console.log(this.logMessage("info",t))}static debug(t){this.shouldLog("debug")&&console.log(this.logMessage("debug",t))}static logMessage(t,n){return`[${t.toUpperCase()}] ${n}`}static shouldLog(t){return qr[il.logLevel]<=qr[t]}}function cl(){return new Date(new Date().setMonth(new Date().getMonth()+1))}function ul(){return new Date(new Date().setHours(new Date().getHours()+1))}function Or(e,t){(e===void 0||e==="")&&(e="0.0.0"),(t===void 0||e==="")&&(t="0.0.0");const n=e.split(".").map(s=>parseInt(s,10)),r=t.split(".").map(s=>parseInt(s,10));for(let s=0;s<t.length;s++)if(s>=e.length&&r.push(0),n[s]<r[s])return!1;return!0}function ll(){let e=new Date().getTime();return typeof performance<"u"&&typeof performance.now=="function"&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const n=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(t==="x"?n:n&3|8).toString(16)})}function fl(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unexpected runtime environment - no supported global scope (`window`, `self`, `global`) available")}function dl(e,t,n){return n?`Use of '${n}' requires \`${t}\` which is unavailable on the '${e}' object within the currently executing environment.`:`\`${t}\` is unavailable on the '${e}' object within the currently executing environment.`}function Is(e,{throwIfUnavailable:t,usageDesc:n,returnEmptyObject:r}={}){let s;try{if(s=fl(),s){const o=s[e];if(o)return o}}catch(o){_t.error(`Error getting object '${e}' from global scope '${s}': ${o}`)}if(t){const o=dl(s,e.toString(),n);throw _t.error(o),new Error(o)}if(r)return{}}function it(e,t){return xs(le(e),t)}function le(e){if(typeof e=="bigint")return e;if(typeof e=="string")return BigInt(e);if(typeof e=="number"){if(!Number.isInteger(e))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");if(e>Number.MAX_SAFE_INTEGER)throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);return BigInt(e)}if(he(e,Uint8Array))return BigInt(`0x${N(e)}`);throw new TypeError("intToBigInt: Invalid value type. Must be a number, bigint, BigInt-compatible string, or Uint8Array.")}function hl(e){return/^0x/i.test(e)?e.slice(2):e}function Oo(e){if(typeof e!="string")throw new TypeError(`hexToBigInt: expected string, got ${typeof e}`);return BigInt(`0x${e}`)}function mn(e,t=8){return(typeof e=="bigint"?e:le(e)).toString(16).padStart(t*2,"0")}function ar(e){return parseInt(e,16)}function xs(e,t=16){const n=mn(e,t);return R(n)}function gl(e,t){if(e<-(BigInt(1)<<t-BigInt(1))||(BigInt(1)<<t-BigInt(1))-BigInt(1)<e)throw`Unable to represent integer in width: ${t}`;return e>=BigInt(0)?BigInt(e):e+(BigInt(1)<<t)}function pl(e,t){return e&BigInt(1)<<t}function Zr(e){return yl(BigInt(`0x${N(e)}`),BigInt(e.byteLength*8))}function yl(e,t){return pl(e,t-BigInt(1))?e-(BigInt(1)<<t):e}const wl=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function N(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(const n of e)t+=wl[n];return t}function R(e){if(typeof e!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof e}`);e=hl(e),e=e.length%2?`0${e}`:e;const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,s=e.slice(r,r+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function vt(e){return new TextEncoder().encode(e)}function Sn(e){return new TextDecoder().decode(e)}function bl(e){const t=[];for(let n=0;n<e.length;n++)t.push(e.charCodeAt(n)&255);return new Uint8Array(t)}function ml(e){return String.fromCharCode.apply(null,e)}function Sl(e){return!Number.isInteger(e)||e<0||e>255}function Uo(e){if(e.some(Sl))throw new Error("Some values are invalid bytes.");return new Uint8Array(e)}function Oe(...e){if(!e.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}function J(e){return Oe(...e.map(t=>typeof t=="number"?Uo([t]):t instanceof Array?Uo(t):t))}function he(e,t){var n,r;return e instanceof t||((r=(n=e==null?void 0:e.constructor)==null?void 0:n.name)==null?void 0:r.toLowerCase())===t.name}const El="https://api.mainnet.hiro.so",Al="https://api.testnet.hiro.so",Il="http://localhost:3999",xl="https://hub.blockstack.org",vl=33,Ur=32;function Ml(e){if(e.length<Ur*2*2+1)throw new Error("Invalid signature");const t=e.slice(0,2),n=e.slice(2,2+Ur*2),r=e.slice(2+Ur*2);return{recoveryId:ar(t),r:n,s:r}}function vs(e){const t=typeof e=="string"?R(e):e;if(t.length!=32&&t.length!=33)throw new Error(`Improperly formatted private-key. Private-key byte length should be 32 or 33. Length provided: ${t.length}`);if(t.length==33&&t[32]!==1)throw new Error("Improperly formatted private-key. 33 bytes indicate compressed key, but the last byte must be == 01");return t}function Ll(e,t){return(e[t+0]<<8|e[t+1])>>>0}function Cl(e,t,n=0){return e[n+0]=t>>>8,e[n+1]=t>>>0,e}function Tl(e,t){return e[t]}function Nl(e,t,n=0){return e[n]=t,e}function Dl(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function yt(e,t,n=0){return e[n+3]=t,t>>>=8,e[n+2]=t,t>>>=8,e[n+1]=t,t>>>=8,e[n]=t,e}const Bl={referrerPolicy:"origin",headers:{"x-hiro-product":"stacksjs"}};async function _l(e,t){const n={};return Object.assign(n,Bl,t),await fetch(e,n)}function Pl(e){let t=_l,n=[];return e.length>0&&typeof e[0]=="function"&&(t=e.shift()),e.length>0&&(n=e),{fetchLib:t,middlewares:n}}function Ol(...e){const{fetchLib:t,middlewares:n}=Pl(e);return async(s,o)=>{let i={url:s,init:o??{}};for(const u of n)typeof u.pre=="function"&&(i=await Promise.resolve(u.pre({fetch:t,...i}))??i);let a=await t(i.url,i.init);for(const u of n)typeof u.post=="function"&&(a=await Promise.resolve(u.post({fetch:t,url:i.url,init:i.init,response:(a==null?void 0:a.clone())??a}))??a);return a}}class cr{constructor(t=Vi.slice(),n=(a=>(a=Is("location",{returnEmptyObject:!0}))==null?void 0:a.origin)(),r="",s="/manifest.json",o=void 0,i=rl){this.appDomain=n,this.scopes=t,this.redirectPath=r,this.manifestPath=s,this.coreNode=o,this.authenticatorURL=i}redirectURI(){return`${this.appDomain}${this.redirectPath}`}manifestURI(){return`${this.appDomain}${this.manifestPath}`}}function Qr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ul(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Yi(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function jl(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Qr(e.outputLen),Qr(e.blockLen)}function $l(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function kl(e,t){Yi(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const ht={number:Qr,bool:Ul,bytes:Yi,hash:jl,exists:$l,output:kl};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const jr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ne=(e,t)=>e<<32-t|e>>>t,Hl=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Hl)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function zl(e){if(typeof e!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof e}`);return new TextEncoder().encode(e)}function Ms(e){if(typeof e=="string"&&(e=zl(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}class qi{clone(){return this._cloneInto()}}function Mt(e){const t=r=>e().update(Ms(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class Zi extends qi{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,ht.hash(t);const r=Ms(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(t){return ht.exists(this),this.iHash.update(t),this}digestInto(t){ht.exists(this),ht.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const qt=(e,t,n)=>new Zi(e,t).update(n).digest();qt.create=(e,t)=>new Zi(e,t);const Fl=Object.freeze(Object.defineProperty({__proto__:null,hmac:qt},Symbol.toStringTag,{value:"Module"}));function Rl(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),u=r?4:0,l=r?0:4;e.setUint32(t+u,i,r),e.setUint32(t+l,a,r)}class Ls extends qi{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=jr(this.buffer)}update(t){ht.exists(this);const{view:n,buffer:r,blockLen:s}=this;t=Ms(t);const o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const u=jr(t);for(;s<=o-i;i+=s)this.process(u,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ht.exists(this),ht.output(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let d=i;d<s;d++)n[d]=0;Rl(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=jr(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,f=this.get();if(l>f.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,f[d],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return t.length=s,t.pos=a,t.finished=o,t.destroyed=i,s%n&&t.buffer.set(r),t}}const Kl=(e,t,n)=>e&t^~e&n,Vl=(e,t,n)=>e&t^e&n^t&n,Gl=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ze=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qe=new Uint32Array(64);class Qi extends Ls{constructor(){super(64,32,8,!1),this.A=Ze[0]|0,this.B=Ze[1]|0,this.C=Ze[2]|0,this.D=Ze[3]|0,this.E=Ze[4]|0,this.F=Ze[5]|0,this.G=Ze[6]|0,this.H=Ze[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:a,H:u}=this;return[t,n,r,s,o,i,a,u]}set(t,n,r,s,o,i,a,u){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=u|0}process(t,n){for(let d=0;d<16;d++,n+=4)Qe[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const y=Qe[d-15],g=Qe[d-2],m=Ne(y,7)^Ne(y,18)^y>>>3,E=Ne(g,17)^Ne(g,19)^g>>>10;Qe[d]=E+Qe[d-7]+m+Qe[d-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:u,G:l,H:f}=this;for(let d=0;d<64;d++){const y=Ne(a,6)^Ne(a,11)^Ne(a,25),g=f+y+Kl(a,u,l)+Gl[d]+Qe[d]|0,E=(Ne(r,2)^Ne(r,13)^Ne(r,22))+Vl(r,s,o)|0;f=l,l=u,u=a,a=i+g|0,i=o,o=s,s=r,r=g+E|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,u=u+this.F|0,l=l+this.G|0,f=f+this.H|0,this.set(r,s,o,i,a,u,l,f)}roundClean(){Qe.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Yl extends Qi{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const Ue=Mt(()=>new Qi),ql=Mt(()=>new Yl),Zl=Object.freeze(Object.defineProperty({__proto__:null,sha224:ql,sha256:Ue},Symbol.toStringTag,{value:"Module"})),Ql={},Wi=Object.freeze(Object.defineProperty({__proto__:null,default:Ql},Symbol.toStringTag,{value:"Module"}));/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const z=BigInt(0),Q=BigInt(1),tt=BigInt(2),cn=BigInt(3),jo=BigInt(8),q=Object.freeze({a:z,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Q,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),$o=(e,t)=>(e+t/tt)/t,Dn={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=q,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Q*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,i=BigInt("0x100000000000000000000000000000000"),a=$o(o*e,t),u=$o(-r*e,t);let l=I(e-a*n-u*s,t),f=I(-a*r-u*o,t);const d=l>i,y=f>i;if(d&&(l=t-l),y&&(f=t-f),l>i||f>i)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:d,k1:l,k2neg:y,k2:f}}},ve=32,wt=32,Xi=32,Vn=ve+1,Gn=2*ve+1;function ko(e){const{a:t,b:n}=q,r=I(e*e),s=I(r*e);return I(s+t*e+n)}const Bn=q.a===z;class Cs extends Error{constructor(t){super(t)}}function Ho(e){if(!(e instanceof K))throw new TypeError("JacobianPoint expected")}class K{constructor(t,n,r){this.x=t,this.y=n,this.z=r}static fromAffine(t){if(!(t instanceof U))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(U.ZERO)?K.ZERO:new K(t.x,t.y,Q)}static toAffineBatch(t){const n=tf(t.map(r=>r.z));return t.map((r,s)=>r.toAffine(n[s]))}static normalizeZ(t){return K.toAffineBatch(t).map(K.fromAffine)}equals(t){Ho(t);const{x:n,y:r,z:s}=this,{x:o,y:i,z:a}=t,u=I(s*s),l=I(a*a),f=I(n*l),d=I(o*u),y=I(I(r*a)*l),g=I(I(i*s)*u);return f===d&&y===g}negate(){return new K(this.x,I(-this.y),this.z)}double(){const{x:t,y:n,z:r}=this,s=I(t*t),o=I(n*n),i=I(o*o),a=t+o,u=I(tt*(I(a*a)-s-i)),l=I(cn*s),f=I(l*l),d=I(f-tt*u),y=I(l*(u-d)-jo*i),g=I(tt*n*r);return new K(d,y,g)}add(t){Ho(t);const{x:n,y:r,z:s}=this,{x:o,y:i,z:a}=t;if(o===z||i===z)return this;if(n===z||r===z)return t;const u=I(s*s),l=I(a*a),f=I(n*l),d=I(o*u),y=I(I(r*a)*l),g=I(I(i*s)*u),m=I(d-f),E=I(g-y);if(m===z)return E===z?this.double():K.ZERO;const v=I(m*m),B=I(m*v),_=I(f*v),T=I(E*E-B-tt*_),w=I(E*(_-T)-y*B),A=I(s*a*m);return new K(T,w,A)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const n=K.ZERO;if(typeof t=="bigint"&&t===z)return n;let r=Ro(t);if(r===Q)return this;if(!Bn){let d=n,y=this;for(;r>z;)r&Q&&(d=d.add(y)),y=y.double(),r>>=Q;return d}let{k1neg:s,k1:o,k2neg:i,k2:a}=Dn.splitScalar(r),u=n,l=n,f=this;for(;o>z||a>z;)o&Q&&(u=u.add(f)),a&Q&&(l=l.add(f)),f=f.double(),o>>=Q,a>>=Q;return s&&(u=u.negate()),i&&(l=l.negate()),l=new K(I(l.x*Dn.beta),l.y,l.z),u.add(l)}precomputeWindow(t){const n=Bn?128/t+1:256/t+1,r=[];let s=this,o=s;for(let i=0;i<n;i++){o=s,r.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(s),r.push(o);s=o.double()}return r}wNAF(t,n){!n&&this.equals(K.BASE)&&(n=U.BASE);const r=n&&n._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=n&&Wr.get(n);s||(s=this.precomputeWindow(r),n&&r!==1&&(s=K.normalizeZ(s),Wr.set(n,s)));let o=K.ZERO,i=K.BASE;const a=1+(Bn?128/r:256/r),u=2**(r-1),l=BigInt(2**r-1),f=2**r,d=BigInt(r);for(let y=0;y<a;y++){const g=y*u;let m=Number(t&l);t>>=d,m>u&&(m-=f,t+=Q);const E=g,v=g+Math.abs(m)-1,B=y%2!==0,_=m<0;m===0?i=i.add(_n(B,s[E])):o=o.add(_n(_,s[v]))}return{p:o,f:i}}multiply(t,n){let r=Ro(t),s,o;if(Bn){const{k1neg:i,k1:a,k2neg:u,k2:l}=Dn.splitScalar(r);let{p:f,f:d}=this.wNAF(a,n),{p:y,f:g}=this.wNAF(l,n);f=_n(i,f),y=_n(u,y),y=new K(I(y.x*Dn.beta),y.y,y.z),s=f.add(y),o=d.add(g)}else{const{p:i,f:a}=this.wNAF(r,n);s=i,o=a}return K.normalizeZ([s,o])[0]}toAffine(t){const{x:n,y:r,z:s}=this,o=this.equals(K.ZERO);t==null&&(t=o?jo:Zt(s));const i=t,a=I(i*i),u=I(a*i),l=I(n*a),f=I(r*u),d=I(s*i);if(o)return U.ZERO;if(d!==Q)throw new Error("invZ was invalid");return new U(l,f)}}K.BASE=new K(q.Gx,q.Gy,Q);K.ZERO=new K(z,Q,z);function _n(e,t){const n=t.negate();return e?n:t}const Wr=new WeakMap;class U{constructor(t,n){this.x=t,this.y=n}_setWindowSize(t){this._WINDOW_SIZE=t,Wr.delete(this)}hasEvenY(){return this.y%tt===z}static fromCompressedHex(t){const n=t.length===32,r=be(n?t:t.subarray(1));if(!zn(r))throw new Error("Point is not on curve");const s=ko(r);let o=ef(s);const i=(o&Q)===Q;n?i&&(o=I(-o)):(t[0]&1)===1!==i&&(o=I(-o));const a=new U(r,o);return a.assertValidity(),a}static fromUncompressedHex(t){const n=be(t.subarray(1,ve+1)),r=be(t.subarray(ve+1,ve*2+1)),s=new U(n,r);return s.assertValidity(),s}static fromHex(t){const n=je(t),r=n.length,s=n[0];if(r===ve)return this.fromCompressedHex(n);if(r===Vn&&(s===2||s===3))return this.fromCompressedHex(n);if(r===Gn&&s===4)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Vn} compressed bytes or ${Gn} uncompressed bytes, not ${r}`)}static fromPrivateKey(t){return U.BASE.multiply(bt(t))}static fromSignature(t,n,r){const{r:s,s:o}=ta(n);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const i=Ts(je(t)),{n:a}=q,u=r===2||r===3?s+a:s,l=Zt(u,a),f=I(-i*l,a),d=I(o*l,a),y=r&1?"03":"02",g=U.fromHex(y+rt(u)),m=U.BASE.multiplyAndAddUnsafe(g,f,d);if(!m)throw new Error("Cannot recover signature: point at infinify");return m.assertValidity(),m}toRawBytes(t=!1){return st(this.toHex(t))}toHex(t=!1){const n=rt(this.x);return t?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${rt(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:n,y:r}=this;if(!zn(n)||!zn(r))throw new Error(t);const s=I(r*r),o=ko(n);if(I(s-o)!==z)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new U(this.x,I(-this.y))}double(){return K.fromAffine(this).double().toAffine()}add(t){return K.fromAffine(this).add(K.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return K.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,n,r){const s=K.fromAffine(this),o=n===z||n===Q||this!==U.BASE?s.multiplyUnsafe(n):s.multiply(n),i=K.fromAffine(t).multiplyUnsafe(r),a=o.add(i);return a.equals(K.ZERO)?void 0:a.toAffine()}}U.BASE=new U(q.Gx,q.Gy);U.ZERO=new U(z,z);function zo(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function Fo(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${jt(e)}`);const t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(n[0]===0&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:be(n),left:e.subarray(t+2)}}function Wl(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${jt(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:n}=Fo(e.subarray(2)),{data:r,left:s}=Fo(n);if(s.length)throw new Error(`Invalid signature: left bytes after parsing: ${jt(s)}`);return{r:t,s:r}}class Ce{constructor(t,n){this.r=t,this.s=n,this.assertValidity()}static fromCompact(t){const n=t instanceof Uint8Array,r="Signature.fromCompact";if(typeof t!="string"&&!n)throw new TypeError(`${r}: Expected string or Uint8Array`);const s=n?jt(t):t;if(s.length!==128)throw new Error(`${r}: Expected 64-byte hex`);return new Ce(Yn(s.slice(0,64)),Yn(s.slice(64,128)))}static fromDER(t){const n=t instanceof Uint8Array;if(typeof t!="string"&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r,s}=Wl(n?t:st(t));return new Ce(r,s)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:n}=this;if(!kt(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!kt(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=q.n>>Q;return this.s>t}normalizeS(){return this.hasHighS()?new Ce(this.r,I(-this.s,q.n)):this}toDERRawBytes(){return st(this.toDERHex())}toDERHex(){const t=zo(sn(this.s)),n=zo(sn(this.r)),r=t.length/2,s=n.length/2,o=sn(r),i=sn(s);return`30${sn(s+r+4)}02${i}${n}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return st(this.toCompactHex())}toCompactHex(){return rt(this.r)+rt(this.s)}}function et(...e){if(!e.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}const Xl=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function jt(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let n=0;n<e.length;n++)t+=Xl[e[n]];return t}const Jl=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function rt(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(z<=e&&e<Jl))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function $t(e){const t=st(rt(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function sn(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Yn(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function st(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=n*2,s=e.slice(r,r+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function be(e){return Yn(jt(e))}function je(e){return e instanceof Uint8Array?Uint8Array.from(e):st(e)}function Ro(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&kt(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function I(e,t=q.P){const n=e%t;return n>=z?n:t+n}function Se(e,t){const{P:n}=q;let r=e;for(;t-- >z;)r*=r,r%=n;return r}function ef(e){const{P:t}=q,n=BigInt(6),r=BigInt(11),s=BigInt(22),o=BigInt(23),i=BigInt(44),a=BigInt(88),u=e*e*e%t,l=u*u*e%t,f=Se(l,cn)*l%t,d=Se(f,cn)*l%t,y=Se(d,tt)*u%t,g=Se(y,r)*y%t,m=Se(g,s)*g%t,E=Se(m,i)*m%t,v=Se(E,a)*E%t,B=Se(v,i)*m%t,_=Se(B,cn)*l%t,T=Se(_,o)*g%t,w=Se(T,n)*u%t,A=Se(w,tt);if(A*A%t!==e)throw new Error("Cannot find square root");return A}function Zt(e,t=q.P){if(e===z||t<=z)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=I(e,t),r=t,s=z,o=Q;for(;n!==z;){const a=r/n,u=r%n,l=s-o*a;r=n,n=u,s=o,o=l}if(r!==Q)throw new Error("invert: does not exist");return I(s,t)}function tf(e,t=q.P){const n=new Array(e.length),r=e.reduce((o,i,a)=>i===z?o:(n[a]=o,I(o*i,t)),Q),s=Zt(r,t);return e.reduceRight((o,i,a)=>i===z?o:(n[a]=I(o*n[a],t),I(o*i,t)),s),n}function nf(e){const t=e.length*8-wt*8,n=be(e);return t>0?n>>BigInt(t):n}function Ts(e,t=!1){const n=nf(e);if(t)return n;const{n:r}=q;return n>=r?n-r:n}let Ut,un;class Ji{constructor(t,n){if(this.hashLen=t,this.qByteLen=n,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return ee.hmacSha256(this.k,...t)}hmacSync(...t){return un(this.k,...t)}checkSync(){if(typeof un!="function")throw new Cs("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0;const n=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();n.push(r),t+=this.v.length}return et(...n)}generateSync(){this.checkSync(),this.incr();let t=0;const n=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();n.push(r),t+=this.v.length}return et(...n)}}function kt(e){return z<e&&e<q.n}function zn(e){return z<e&&e<q.P}function ea(e,t,n,r=!0){const{n:s}=q,o=Ts(e,!0);if(!kt(o))return;const i=Zt(o,s),a=U.BASE.multiply(o),u=I(a.x,s);if(u===z)return;const l=I(i*I(t+n*u,s),s);if(l===z)return;let f=new Ce(u,l),d=(a.x===f.r?0:2)|Number(a.y&Q);return r&&f.hasHighS()&&(f=f.normalizeS(),d^=1),{sig:f,recovery:d}}function bt(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*wt)throw new Error("Expected 32 bytes of private key");t=Yn(e)}else if(e instanceof Uint8Array){if(e.length!==wt)throw new Error("Expected 32 bytes of private key");t=be(e)}else throw new TypeError("Expected valid private key");if(!kt(t))throw new Error("Expected private key: 0 < key < n");return t}function Ns(e){return e instanceof U?(e.assertValidity(),e):U.fromHex(e)}function ta(e){if(e instanceof Ce)return e.assertValidity(),e;try{return Ce.fromDER(e)}catch{return Ce.fromCompact(e)}}function ur(e,t=!1){return U.fromPrivateKey(e).toRawBytes(t)}function rf(e,t,n,r=!1){return U.fromSignature(e,t,n).toRawBytes(r)}function Ko(e){const t=e instanceof Uint8Array,n=typeof e=="string",r=(t||n)&&e.length;return t?r===Vn||r===Gn:n?r===Vn*2||r===Gn*2:e instanceof U}function Ds(e,t,n=!1){if(Ko(e))throw new TypeError("getSharedSecret: first arg must be private key");if(!Ko(t))throw new TypeError("getSharedSecret: second arg must be public key");const r=Ns(t);return r.assertValidity(),r.multiply(bt(e)).toRawBytes(n)}function na(e){const t=e.length>ve?e.slice(0,ve):e;return be(t)}function sf(e){const t=na(e),n=I(t,q.n);return ra(n<z?t:n)}function ra(e){return $t(e)}function sa(e,t,n){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);const r=je(e),s=bt(t),o=[ra(s),sf(r)];if(n!=null){n===!0&&(n=ee.randomBytes(ve));const u=je(n);if(u.length!==ve)throw new Error(`sign: Expected ${ve} bytes of extra data`);o.push(u)}const i=et(...o),a=na(r);return{seed:i,m:a,d:s}}function oa(e,t){const{sig:n,recovery:r}=e,{der:s,recovered:o}=Object.assign({canonical:!0,der:!0},t),i=s?n.toDERRawBytes():n.toCompactRawBytes();return o?[i,r]:i}async function of(e,t,n={}){const{seed:r,m:s,d:o}=sa(e,t,n.extraEntropy),i=new Ji(Xi,wt);await i.reseed(r);let a;for(;!(a=ea(await i.generate(),s,o,n.canonical));)await i.reseed();return oa(a,n)}function Bs(e,t,n={}){const{seed:r,m:s,d:o}=sa(e,t,n.extraEntropy),i=new Ji(Xi,wt);i.reseedSync(r);let a;for(;!(a=ea(i.generateSync(),s,o,n.canonical));)i.reseedSync();return oa(a,n)}const af={strict:!0};function cf(e,t,n,r=af){let s;try{s=ta(e),t=je(t)}catch{return!1}const{r:o,s:i}=s;if(r.strict&&s.hasHighS())return!1;const a=Ts(t);let u;try{u=Ns(n)}catch{return!1}const{n:l}=q,f=Zt(i,l),d=I(a*f,l),y=I(o*f,l),g=U.BASE.multiplyAndAddUnsafe(u,d,y);return g?I(g.x,l)===o:!1}function qn(e){return I(be(e),q.n)}class Ht{constructor(t,n){this.r=t,this.s=n,this.assertValidity()}static fromHex(t){const n=je(t);if(n.length!==64)throw new TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${n.length}`);const r=be(n.subarray(0,32)),s=be(n.subarray(32,64));return new Ht(r,s)}assertValidity(){const{r:t,s:n}=this;if(!zn(t)||!kt(n))throw new Error("Invalid signature")}toHex(){return rt(this.r)+rt(this.s)}toRawBytes(){return st(this.toHex())}}function uf(e){return U.fromPrivateKey(e).toRawX()}class ia{constructor(t,n,r=ee.randomBytes()){if(t==null)throw new TypeError(`sign: Expected valid message, not "${t}"`);this.m=je(t);const{x:s,scalar:o}=this.getScalar(bt(n));if(this.px=s,this.d=o,this.rand=je(r),this.rand.length!==32)throw new TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(t){const n=U.fromPrivateKey(t),r=n.hasEvenY()?t:q.n-t;return{point:n,scalar:r,x:n.toRawX()}}initNonce(t,n){return $t(t^be(n))}finalizeNonce(t){const n=I(be(t),q.n);if(n===z)throw new Error("sign: Creation of signature failed. k is zero");const{point:r,x:s,scalar:o}=this.getScalar(n);return{R:r,rx:s,k:o}}finalizeSig(t,n,r,s){return new Ht(t.x,I(n+r*s,q.n)).toRawBytes()}error(){throw new Error("sign: Invalid signature produced")}async calc(){const{m:t,d:n,px:r,rand:s}=this,o=ee.taggedHash,i=this.initNonce(n,await o(Je.aux,s)),{R:a,rx:u,k:l}=this.finalizeNonce(await o(Je.nonce,i,r,t)),f=qn(await o(Je.challenge,u,r,t)),d=this.finalizeSig(a,l,f,n);return await ua(d,t,r)||this.error(),d}calcSync(){const{m:t,d:n,px:r,rand:s}=this,o=ee.taggedHashSync,i=this.initNonce(n,o(Je.aux,s)),{R:a,rx:u,k:l}=this.finalizeNonce(o(Je.nonce,i,r,t)),f=qn(o(Je.challenge,u,r,t)),d=this.finalizeSig(a,l,f,n);return la(d,t,r)||this.error(),d}}async function lf(e,t,n){return new ia(e,t,n).calc()}function ff(e,t,n){return new ia(e,t,n).calcSync()}function aa(e,t,n){const r=e instanceof Ht,s=r?e:Ht.fromHex(e);return r&&s.assertValidity(),{...s,m:je(t),P:Ns(n)}}function ca(e,t,n,r){const s=U.BASE.multiplyAndAddUnsafe(t,bt(n),I(-r,q.n));return!(!s||!s.hasEvenY()||s.x!==e)}async function ua(e,t,n){try{const{r,s,m:o,P:i}=aa(e,t,n),a=qn(await ee.taggedHash(Je.challenge,$t(r),i.toRawX(),o));return ca(r,i,s,a)}catch{return!1}}function la(e,t,n){try{const{r,s,m:o,P:i}=aa(e,t,n),a=qn(ee.taggedHashSync(Je.challenge,$t(r),i.toRawX(),o));return ca(r,i,s,a)}catch(r){if(r instanceof Cs)throw r;return!1}}const df={Signature:Ht,getPublicKey:uf,sign:lf,verify:ua,signSync:ff,verifySync:la};U.BASE._setWindowSize(8);const ge={node:Wi,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},Je={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},Pn={},ee={bytesToHex:jt,hexToBytes:st,concatBytes:et,mod:I,invert:Zt,isValidPrivateKey(e){try{return bt(e),!0}catch{return!1}},_bigintTo32Bytes:$t,_normalizePrivateKey:bt,hashToPrivateKey:e=>{e=je(e);const t=wt+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const n=I(be(e),q.n-Q)+Q;return $t(n)},randomBytes:(e=32)=>{if(ge.web)return ge.web.getRandomValues(new Uint8Array(e));if(ge.node){const{randomBytes:t}=ge.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>ee.hashToPrivateKey(ee.randomBytes(wt+8)),precompute(e=8,t=U.BASE){const n=t===U.BASE?t:new U(t.x,t.y);return n._setWindowSize(e),n.multiply(cn),n},sha256:async(...e)=>{if(ge.web){const t=await ge.web.subtle.digest("SHA-256",et(...e));return new Uint8Array(t)}else if(ge.node){const{createHash:t}=ge.node,n=t("sha256");return e.forEach(r=>n.update(r)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(ge.web){const n=await ge.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=et(...t),s=await ge.web.subtle.sign("HMAC",n,r);return new Uint8Array(s)}else if(ge.node){const{createHmac:n}=ge.node,r=n("sha256",e);return t.forEach(s=>r.update(s)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let n=Pn[e];if(n===void 0){const r=await ee.sha256(Uint8Array.from(e,s=>s.charCodeAt(0)));n=et(r,r),Pn[e]=n}return ee.sha256(n,...t)},taggedHashSync:(e,...t)=>{if(typeof Ut!="function")throw new Cs("sha256Sync is undefined, you need to set it");let n=Pn[e];if(n===void 0){const r=Ut(Uint8Array.from(e,s=>s.charCodeAt(0)));n=et(r,r),Pn[e]=n}return Ut(n,...t)},_JacobianPoint:K};Object.defineProperties(ee,{sha256Sync:{configurable:!1,get(){return Ut},set(e){Ut||(Ut=e)}},hmacSha256Sync:{configurable:!1,get(){return un},set(e){un||(un=e)}}});const hf=Object.freeze(Object.defineProperty({__proto__:null,CURVE:q,Point:U,Signature:Ce,getPublicKey:ur,getSharedSecret:Ds,recoverPublicKey:rf,schnorr:df,sign:of,signSync:Bs,utils:ee,verify:cf},Symbol.toStringTag,{value:"Module"}));var ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lr(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var En={};En.byteLength=bf;var gf=En.toByteArray=Sf,pf=En.fromByteArray=If,De=[],Ee=[],yf=typeof Uint8Array<"u"?Uint8Array:Array,$r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Bt=0,wf=$r.length;Bt<wf;++Bt)De[Bt]=$r[Bt],Ee[$r.charCodeAt(Bt)]=Bt;Ee[45]=62;Ee[95]=63;function da(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function bf(e){var t=da(e),n=t[0],r=t[1];return(n+r)*3/4-r}function mf(e,t,n){return(t+n)*3/4-n}function Sf(e){var t,n=da(e),r=n[0],s=n[1],o=new yf(mf(e,r,s)),i=0,a=s>0?r-4:r,u;for(u=0;u<a;u+=4)t=Ee[e.charCodeAt(u)]<<18|Ee[e.charCodeAt(u+1)]<<12|Ee[e.charCodeAt(u+2)]<<6|Ee[e.charCodeAt(u+3)],o[i++]=t>>16&255,o[i++]=t>>8&255,o[i++]=t&255;return s===2&&(t=Ee[e.charCodeAt(u)]<<2|Ee[e.charCodeAt(u+1)]>>4,o[i++]=t&255),s===1&&(t=Ee[e.charCodeAt(u)]<<10|Ee[e.charCodeAt(u+1)]<<4|Ee[e.charCodeAt(u+2)]>>2,o[i++]=t>>8&255,o[i++]=t&255),o}function Ef(e){return De[e>>18&63]+De[e>>12&63]+De[e>>6&63]+De[e&63]}function Af(e,t,n){for(var r,s=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),s.push(Ef(r));return s.join("")}function If(e){for(var t,n=e.length,r=n%3,s=[],o=16383,i=0,a=n-r;i<a;i+=o)s.push(Af(e,i,i+o>a?a:i+o));return r===1?(t=e[n-1],s.push(De[t>>2]+De[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],s.push(De[t>>10]+De[t>>4&63]+De[t<<2&63]+"=")),s.join("")}function xf(){return typeof crypto<"u"&&typeof crypto.subtle<"u"}const vf='Crypto lib not found. Either the WebCrypto "crypto.subtle" or Node.js "crypto" module must be available.';async function Mf(){if(xf())return{lib:crypto.subtle,name:"subtleCrypto"};try{return{lib:require("crypto"),name:"nodeCrypto"}}catch{throw new Error(vf)}}class Lf{constructor(t,n){this.createCipher=t,this.createDecipher=n}async encrypt(t,n,r,s){if(t!=="aes-128-cbc"&&t!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${t}"`);const o=this.createCipher(t,n,r),i=new Uint8Array(Oe(o.update(s),o.final()));return Promise.resolve(i)}async decrypt(t,n,r,s){if(t!=="aes-128-cbc"&&t!=="aes-256-cbc")throw new Error(`Unsupported cipher algorithm "${t}"`);const o=this.createDecipher(t,n,r),i=new Uint8Array(Oe(o.update(s),o.final()));return Promise.resolve(i)}}class Cf{constructor(t){this.subtleCrypto=t}async encrypt(t,n,r,s){let o,i;if(t==="aes-128-cbc")o="AES-CBC",i=128;else if(t==="aes-256-cbc")o="AES-CBC",i=256;else throw new Error(`Unsupported cipher algorithm "${t}"`);const a=await this.subtleCrypto.importKey("raw",n,{name:o,length:i},!1,["encrypt"]),u=await this.subtleCrypto.encrypt({name:o,iv:r},a,s);return new Uint8Array(u)}async decrypt(t,n,r,s){let o,i;if(t==="aes-128-cbc")o="AES-CBC",i=128;else if(t==="aes-256-cbc")o="AES-CBC",i=256;else throw new Error(`Unsupported cipher algorithm "${t}"`);const a=await this.subtleCrypto.importKey("raw",n,{name:o,length:i},!1,["decrypt"]),u=await this.subtleCrypto.decrypt({name:o,iv:r},a,s);return new Uint8Array(u)}}async function ha(){const e=await Mf();return e.name==="subtleCrypto"?new Cf(e.lib):new Lf(e.lib.createCipheriv,e.lib.createDecipheriv)}function Tf(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var s=e.charAt(r),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=r}var i=e.length,a=e.charAt(0),u=Math.log(i)/Math.log(256),l=Math.log(256)/Math.log(i);function f(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var m=0,E=0,v=0,B=g.length;v!==B&&g[v]===0;)v++,m++;for(var _=(B-v)*l+1>>>0,T=new Uint8Array(_);v!==B;){for(var w=g[v],A=0,C=_-1;(w!==0||A<E)&&C!==-1;C--,A++)w+=256*T[C]>>>0,T[C]=w%i>>>0,w=w/i>>>0;if(w!==0)throw new Error("Non-zero carry");E=A,v++}for(var L=_-E;L!==_&&T[L]===0;)L++;for(var F=a.repeat(m);L<_;++L)F+=e.charAt(T[L]);return F}function d(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var m=0,E=0,v=0;g[m]===a;)E++,m++;for(var B=(g.length-m)*u+1>>>0,_=new Uint8Array(B);g[m];){var T=g.charCodeAt(m);if(T>255)return;var w=t[T];if(w===255)return;for(var A=0,C=B-1;(w!==0||A<v)&&C!==-1;C--,A++)w+=i*_[C]>>>0,_[C]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");v=A,m++}for(var L=B-v;L!==B&&_[L]===0;)L++;for(var F=new Uint8Array(E+(B-L)),G=E;L!==B;)F[G++]=_[L++];return F}function y(g){var m=d(g);if(m)return m;throw new Error("Non-base"+i+" character")}return{encode:f,decodeUnsafe:d,decode:y}}var ga=Tf;const Nf=ga,Df="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var Bf=Nf(Df);const _f=fa(Bf),Pf=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),pa=Uint8Array.from({length:16},(e,t)=>t),Of=pa.map(e=>(9*e+5)%16);let _s=[pa],Ps=[Of];for(let e=0;e<4;e++)for(let t of[_s,Ps])t.push(t[e].map(n=>Pf[n]));const ya=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Uf=_s.map((e,t)=>e.map(n=>ya[t][n])),jf=Ps.map((e,t)=>e.map(n=>ya[t][n])),$f=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),kf=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),On=(e,t)=>e<<t|e>>>32-t;function Vo(e,t,n,r){return e===0?t^n^r:e===1?t&n|~t&r:e===2?(t|~n)^r:e===3?t&r|n&~r:t^(n|~r)}const Un=new Uint32Array(16);class Hf extends Ls{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:r,h3:s,h4:o}=this;return[t,n,r,s,o]}set(t,n,r,s,o){this.h0=t|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=o|0}process(t,n){for(let g=0;g<16;g++,n+=4)Un[g]=t.getUint32(n,!0);let r=this.h0|0,s=r,o=this.h1|0,i=o,a=this.h2|0,u=a,l=this.h3|0,f=l,d=this.h4|0,y=d;for(let g=0;g<5;g++){const m=4-g,E=$f[g],v=kf[g],B=_s[g],_=Ps[g],T=Uf[g],w=jf[g];for(let A=0;A<16;A++){const C=On(r+Vo(g,o,a,l)+Un[B[A]]+E,T[A])+d|0;r=d,d=l,l=On(a,10)|0,a=o,o=C}for(let A=0;A<16;A++){const C=On(s+Vo(m,i,u,f)+Un[_[A]]+v,w[A])+y|0;s=y,y=f,f=On(u,10)|0,u=i,i=C}}this.set(this.h1+a+f|0,this.h2+l+y|0,this.h3+d+s|0,this.h4+r+i|0,this.h0+o+u|0)}roundClean(){Un.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const wa=Mt(()=>new Hf);function zf(e){return wa(e)}const jn=BigInt(2**32-1),Xr=BigInt(32);function ba(e,t=!1){return t?{h:Number(e&jn),l:Number(e>>Xr&jn)}:{h:Number(e>>Xr&jn)|0,l:Number(e&jn)|0}}function Ff(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:o,l:i}=ba(e[s],t);[n[s],r[s]]=[o,i]}return[n,r]}const Rf=(e,t)=>BigInt(e>>>0)<<Xr|BigInt(t>>>0),Kf=(e,t,n)=>e>>>n,Vf=(e,t,n)=>e<<32-n|t>>>n,Gf=(e,t,n)=>e>>>n|t<<32-n,Yf=(e,t,n)=>e<<32-n|t>>>n,qf=(e,t,n)=>e<<64-n|t>>>n-32,Zf=(e,t,n)=>e>>>n-32|t<<64-n,Qf=(e,t)=>t,Wf=(e,t)=>e,Xf=(e,t,n)=>e<<n|t>>>32-n,Jf=(e,t,n)=>t<<n|e>>>32-n,ed=(e,t,n)=>t<<n-32|e>>>64-n,td=(e,t,n)=>e<<n-32|t>>>64-n;function nd(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:s|0}}const rd=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),sd=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,od=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),id=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,ad=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0),cd=(e,t,n,r,s,o)=>t+n+r+s+o+(e/2**32|0)|0,O={fromBig:ba,split:Ff,toBig:Rf,shrSH:Kf,shrSL:Vf,rotrSH:Gf,rotrSL:Yf,rotrBH:qf,rotrBL:Zf,rotr32H:Qf,rotr32L:Wf,rotlSH:Xf,rotlSL:Jf,rotlBH:ed,rotlBL:td,add:nd,add3L:rd,add3H:sd,add4L:od,add4H:id,add5H:cd,add5L:ad},[ud,ld]=O.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),We=new Uint32Array(80),Xe=new Uint32Array(80);class fr extends Ls{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:n,Bh:r,Bl:s,Ch:o,Cl:i,Dh:a,Dl:u,Eh:l,El:f,Fh:d,Fl:y,Gh:g,Gl:m,Hh:E,Hl:v}=this;return[t,n,r,s,o,i,a,u,l,f,d,y,g,m,E,v]}set(t,n,r,s,o,i,a,u,l,f,d,y,g,m,E,v){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=o|0,this.Cl=i|0,this.Dh=a|0,this.Dl=u|0,this.Eh=l|0,this.El=f|0,this.Fh=d|0,this.Fl=y|0,this.Gh=g|0,this.Gl=m|0,this.Hh=E|0,this.Hl=v|0}process(t,n){for(let T=0;T<16;T++,n+=4)We[T]=t.getUint32(n),Xe[T]=t.getUint32(n+=4);for(let T=16;T<80;T++){const w=We[T-15]|0,A=Xe[T-15]|0,C=O.rotrSH(w,A,1)^O.rotrSH(w,A,8)^O.shrSH(w,A,7),L=O.rotrSL(w,A,1)^O.rotrSL(w,A,8)^O.shrSL(w,A,7),F=We[T-2]|0,G=Xe[T-2]|0,p=O.rotrSH(F,G,19)^O.rotrBH(F,G,61)^O.shrSH(F,G,6),S=O.rotrSL(F,G,19)^O.rotrBL(F,G,61)^O.shrSL(F,G,6),D=O.add4L(L,S,Xe[T-7],Xe[T-16]),$=O.add4H(D,C,p,We[T-7],We[T-16]);We[T]=$|0,Xe[T]=D|0}let{Ah:r,Al:s,Bh:o,Bl:i,Ch:a,Cl:u,Dh:l,Dl:f,Eh:d,El:y,Fh:g,Fl:m,Gh:E,Gl:v,Hh:B,Hl:_}=this;for(let T=0;T<80;T++){const w=O.rotrSH(d,y,14)^O.rotrSH(d,y,18)^O.rotrBH(d,y,41),A=O.rotrSL(d,y,14)^O.rotrSL(d,y,18)^O.rotrBL(d,y,41),C=d&g^~d&E,L=y&m^~y&v,F=O.add5L(_,A,L,ld[T],Xe[T]),G=O.add5H(F,B,w,C,ud[T],We[T]),p=F|0,S=O.rotrSH(r,s,28)^O.rotrBH(r,s,34)^O.rotrBH(r,s,39),D=O.rotrSL(r,s,28)^O.rotrBL(r,s,34)^O.rotrBL(r,s,39),$=r&o^r&a^o&a,Y=s&i^s&u^i&u;B=E|0,_=v|0,E=g|0,v=m|0,g=d|0,m=y|0,{h:d,l:y}=O.add(l|0,f|0,G|0,p|0),l=a|0,f=u|0,a=o|0,u=i|0,o=r|0,i=s|0;const P=O.add3L(p,D,Y);r=O.add3H(P,G,S,$),s=P|0}({h:r,l:s}=O.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:o,l:i}=O.add(this.Bh|0,this.Bl|0,o|0,i|0),{h:a,l:u}=O.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:l,l:f}=O.add(this.Dh|0,this.Dl|0,l|0,f|0),{h:d,l:y}=O.add(this.Eh|0,this.El|0,d|0,y|0),{h:g,l:m}=O.add(this.Fh|0,this.Fl|0,g|0,m|0),{h:E,l:v}=O.add(this.Gh|0,this.Gl|0,E|0,v|0),{h:B,l:_}=O.add(this.Hh|0,this.Hl|0,B|0,_|0),this.set(r,s,o,i,a,u,l,f,d,y,g,m,E,v,B,_)}roundClean(){We.fill(0),Xe.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class fd extends fr{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class dd extends fr{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class hd extends fr{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const gd=Mt(()=>new fr);Mt(()=>new fd);const pd=Mt(()=>new dd);Mt(()=>new hd);function ma(e){return Ue(e)}function yd(e){return gd(e)}const wd=0;ee.hmacSha256Sync=(e,...t)=>{const n=qt.create(Ue,e);return t.forEach(r=>n.update(r)),n.digest()};function bd(){return N(ee.randomPrivateKey())}function md(e){const t=Ue(Ue(e));return _f.encode(Oe(e,t).slice(0,e.length+4))}function Sd(e,t){return md(Oe(new Uint8Array([e]),t.slice(0,20)))}function Sa(e,t=wd){const n=typeof e=="string"?R(e):e,r=zf(ma(n));return Sd(t,r)}function Ea(e){const t=vs(e);return N(ur(t.slice(0,32),!0))}ee.hmacSha256Sync=(e,...t)=>{const n=qt.create(Ue,e);return t.forEach(r=>n.update(r)),n.digest()};var Zn;(function(e){e.InvalidFormat="InvalidFormat",e.IsNotPoint="IsNotPoint"})(Zn||(Zn={}));async function Ed(e,t,n){return await(await ha()).encrypt("aes-256-cbc",t,e,n)}async function Ad(e,t,n){return await(await ha()).decrypt("aes-256-cbc",t,e,n)}function Aa(e,t){return qt(Ue,e,t)}function Id(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function Ia(e){const t=yd(e);return{encryptionKey:t.slice(0,32),hmacKey:t.slice(32)}}function xd(e){return e.match(/^[0-9a-f]+$/i)!==null}function vd(e){const t={result:!1,reason_data:"Invalid public key format",reason:Zn.InvalidFormat},n={result:!1,reason_data:"Public key is not a point",reason:Zn.IsNotPoint};if(e.length!==66&&e.length!==130)return t;const r=e.slice(0,2);if(e.length===130&&r!=="04"||e.length===66&&r!=="02"&&r!=="03"||!xd(e))return t;try{return U.fromHex(e).assertValidity(),{result:!0,reason_data:null,reason:null}}catch{return n}}async function Md(e,t,n,r){const s=vd(e);if(!s.result)throw s;const o=ee.randomPrivateKey(),i=ur(o,!0);let a=Ds(o,e,!0);a=a.slice(1);const u=Ia(a),l=ee.randomBytes(16),f=await Ed(l,u.encryptionKey,t),d=Oe(l,i,f),y=Aa(u.hmacKey,d);let g;if(!r||r==="hex")g=N(f);else if(r==="base64")g=pf(f);else throw new Error(`Unexpected cipherTextEncoding "${r}"`);const m={iv:N(l),ephemeralPK:N(i),cipherText:g,mac:N(y),wasString:n};return r&&r!=="hex"&&(m.cipherTextEncoding=r),m}async function xa(e,t){if(!t.ephemeralPK)throw new _o("Unable to get public key from cipher object. You might be trying to decrypt an unencrypted object.");const n=t.ephemeralPK;let r=Ds(e,n,!0);r=r.slice(1);const s=Ia(r),o=R(t.iv);let i;if(!t.cipherTextEncoding||t.cipherTextEncoding==="hex")i=R(t.cipherText);else if(t.cipherTextEncoding==="base64")i=gf(t.cipherText);else throw new Error(`Unexpected cipherTextEncoding "${t.cipherText}"`);const a=Oe(o,R(n),i),u=Aa(s.hmacKey,a),l=R(t.mac);if(!Id(l,u))throw new _o("Decryption failed: failure in MAC check");const f=await Ad(o,s.encryptionKey,i);return t.wasString?Sn(f):f}function Ld(e,t){const n=typeof t=="string"?vt(t):t,r=Ea(e),s=ma(n),o=Bs(s,e);return{signature:N(o),publicKey:r}}async function Cd(e,t){const n=Object.assign({},t);let r;if(!n.publicKey){if(!n.privateKey)throw new Error("Either public key or private key must be supplied for encryption.");n.publicKey=Ea(n.privateKey)}const s=typeof n.wasString=="boolean"?n.wasString:typeof e=="string",o=typeof e=="string"?vt(e):e,i=await Md(n.publicKey,o,s,n.cipherTextEncoding);let a=JSON.stringify(i);if(n.sign){typeof n.sign=="string"?r=n.sign:r||(r=n.privateKey);const u=Ld(r,a),l={signature:u.signature,publicKey:u.publicKey,cipherText:a};a=JSON.stringify(l)}return a}function Td(e,t){const n=Object.assign({},t);if(!n.privateKey)throw new Error("Private key is required for decryption.");try{const r=JSON.parse(e);return xa(n.privateKey,r)}catch(r){throw r instanceof SyntaxError?new Error("Failed to parse encrypted content JSON. The content may not be encrypted. If using getFile, try passing { decrypt: false }."):r}}var Qt={},dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.crypto=void 0;dr.crypto={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.isLE=e.rotr=e.createView=e.u32=e.u8=void 0;const t=dr,n=w=>new Uint8Array(w.buffer,w.byteOffset,w.byteLength);e.u8=n;const r=w=>new Uint32Array(w.buffer,w.byteOffset,Math.floor(w.byteLength/4));e.u32=r;const s=w=>new DataView(w.buffer,w.byteOffset,w.byteLength);e.createView=s;const o=(w,A)=>w<<32-A|w>>>A;if(e.rotr=o,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!e.isLE)throw new Error("Non little-endian hardware is not supported");const i=Array.from({length:256},(w,A)=>A.toString(16).padStart(2,"0"));function a(w){if(!(w instanceof Uint8Array))throw new Error("Uint8Array expected");let A="";for(let C=0;C<w.length;C++)A+=i[w[C]];return A}e.bytesToHex=a;function u(w){if(typeof w!="string")throw new TypeError("hexToBytes: expected string, got "+typeof w);if(w.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const A=new Uint8Array(w.length/2);for(let C=0;C<A.length;C++){const L=C*2,F=w.slice(L,L+2),G=Number.parseInt(F,16);if(Number.isNaN(G)||G<0)throw new Error("Invalid byte sequence");A[C]=G}return A}e.hexToBytes=u;const l=async()=>{};e.nextTick=l;async function f(w,A,C){let L=Date.now();for(let F=0;F<w;F++){C(F);const G=Date.now()-L;G>=0&&G<A||(await(0,e.nextTick)(),L+=G)}}e.asyncLoop=f;function d(w){if(typeof w!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof w}`);return new TextEncoder().encode(w)}e.utf8ToBytes=d;function y(w){if(typeof w=="string"&&(w=d(w)),!(w instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof w})`);return w}e.toBytes=y;function g(...w){if(!w.every(L=>L instanceof Uint8Array))throw new Error("Uint8Array list expected");if(w.length===1)return w[0];const A=w.reduce((L,F)=>L+F.length,0),C=new Uint8Array(A);for(let L=0,F=0;L<w.length;L++){const G=w[L];C.set(G,F),F+=G.length}return C}e.concatBytes=g;class m{clone(){return this._cloneInto()}}e.Hash=m;const E=w=>Object.prototype.toString.call(w)==="[object Object]"&&w.constructor===Object;function v(w,A){if(A!==void 0&&(typeof A!="object"||!E(A)))throw new TypeError("Options should be object or undefined");return Object.assign(w,A)}e.checkOpts=v;function B(w){const A=L=>w().update(y(L)).digest(),C=w();return A.outputLen=C.outputLen,A.blockLen=C.blockLen,A.create=()=>w(),A}e.wrapConstructor=B;function _(w){const A=(L,F)=>w(F).update(y(L)).digest(),C=w({});return A.outputLen=C.outputLen,A.blockLen=C.blockLen,A.create=L=>w(L),A}e.wrapConstructorWithOpts=_;function T(w=32){if(t.crypto.web)return t.crypto.web.getRandomValues(new Uint8Array(w));if(t.crypto.node)return new Uint8Array(t.crypto.node.randomBytes(w).buffer);throw new Error("The environment doesn't have randomBytes function")}e.randomBytes=T})(Qt);const hr=lr(Zl);var ae={},zt={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.decode=ce.encode=ce.unescape=ce.escape=ce.pad=void 0;const va=En;function Os(e){return`${e}${"=".repeat(4-(e.length%4||4))}`}ce.pad=Os;function Ma(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}ce.escape=Ma;function La(e){return Os(e).replace(/-/g,"+").replace(/_/g,"/")}ce.unescape=La;function Nd(e){return Ma((0,va.fromByteArray)(new TextEncoder().encode(e)))}ce.encode=Nd;function Dd(e){return new TextDecoder().decode((0,va.toByteArray)(Os(La(e))))}ce.decode=Dd;var gr={},pr={};const Bd=lr(Fl),_d=lr(hf);var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.joseToDer=Ft.derToJose=void 0;const Ca=En,Ta=ce;function kr(e){return(e/8|0)+(e%8===0?0:1)}const Pd={ES256:kr(256),ES384:kr(384),ES512:kr(521)};function Na(e){const t=Pd[e];if(t)return t;throw new Error(`Unknown algorithm "${e}"`)}const Qn=128,Da=0,Od=32,Ud=16,jd=2,Ba=Ud|Od|Da<<6,Wn=jd|Da<<6;function _a(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")return(0,Ca.toByteArray)((0,Ta.pad)(e));throw new TypeError("ECDSA signature must be a Base64 string or a Uint8Array")}function $d(e,t){const n=_a(e),r=Na(t),s=r+1,o=n.length;let i=0;if(n[i++]!==Ba)throw new Error('Could not find expected "seq"');let a=n[i++];if(a===(Qn|1)&&(a=n[i++]),o-i<a)throw new Error(`"seq" specified length of "${a}", only "${o-i}" remaining`);if(n[i++]!==Wn)throw new Error('Could not find expected "int" for "r"');const u=n[i++];if(o-i-2<u)throw new Error(`"r" specified length of "${u}", only "${o-i-2}" available`);if(s<u)throw new Error(`"r" specified length of "${u}", max of "${s}" is acceptable`);const l=i;if(i+=u,n[i++]!==Wn)throw new Error('Could not find expected "int" for "s"');const f=n[i++];if(o-i!==f)throw new Error(`"s" specified length of "${f}", expected "${o-i}"`);if(s<f)throw new Error(`"s" specified length of "${f}", max of "${s}" is acceptable`);const d=i;if(i+=f,i!==o)throw new Error(`Expected to consume entire array, but "${o-i}" bytes remain`);const y=r-u,g=r-f,m=new Uint8Array(y+u+g+f);for(i=0;i<y;++i)m[i]=0;m.set(n.subarray(l+Math.max(-y,0),l+u),i),i=r;for(const E=i;i<E+g;++i)m[i]=0;return m.set(n.subarray(d+Math.max(-g,0),d+f),i),(0,Ta.escape)((0,Ca.fromByteArray)(m))}Ft.derToJose=$d;function Go(e,t,n){let r=0;for(;t+r<n&&e[t+r]===0;)++r;return e[t+r]>=Qn&&--r,r}function kd(e,t){e=_a(e);const n=Na(t),r=e.length;if(r!==n*2)throw new TypeError(`"${t}" signatures must be "${n*2}" bytes, saw "${r}"`);const s=Go(e,0,n),o=Go(e,n,e.length),i=n-s,a=n-o,u=2+i+1+1+a,l=u<Qn,f=new Uint8Array((l?2:3)+u);let d=0;return f[d++]=Ba,l?f[d++]=u:(f[d++]=Qn|1,f[d++]=u&255),f[d++]=Wn,f[d++]=i,s<0?(f[d++]=0,f.set(e.subarray(0,n),d),d+=n):(f.set(e.subarray(s,n),d),d+=n-s),f[d++]=Wn,f[d++]=a,o<0?(f[d++]=0,f.set(e.subarray(n),d)):f.set(e.subarray(n+o),d),f}Ft.joseToDer=kd;var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.InvalidTokenError=Ve.MissingParametersError=void 0;class Hd extends Error{constructor(t){super(),this.name="MissingParametersError",this.message=t||""}}Ve.MissingParametersError=Hd;class zd extends Error{constructor(t){super(),this.name="InvalidTokenError",this.message=t||""}}Ve.InvalidTokenError=zd;Object.defineProperty(pr,"__esModule",{value:!0});pr.SECP256K1Client=void 0;const Fd=Bd,Rd=hr,Fn=_d,Yo=Ft,qo=Ve,Zo=Qt;Fn.utils.hmacSha256Sync=(e,...t)=>{const n=Fd.hmac.create(Rd.sha256,e);return t.forEach(r=>n.update(r)),n.digest()};class Pa{static derivePublicKey(t,n=!0){return t.length===66&&(t=t.slice(0,64)),t.length<64&&(t=t.padStart(64,"0")),(0,Zo.bytesToHex)(Fn.getPublicKey(t,n))}static signHash(t,n,r="jose"){if(!t||!n)throw new qo.MissingParametersError("a signing input hash and private key are all required");const s=Fn.signSync(t,n.slice(0,64),{der:!0,canonical:!1});if(r==="der")return(0,Zo.bytesToHex)(s);if(r==="jose")return(0,Yo.derToJose)(s,"ES256");throw Error("Invalid signature format")}static loadSignature(t){return(0,Yo.joseToDer)(t,"ES256")}static verifyHash(t,n,r){if(!t||!n||!r)throw new qo.MissingParametersError("a signing input hash, der signature, and public key are all required");return Fn.verify(n,t,r,{strict:!1})}}pr.SECP256K1Client=Pa;Pa.algorithmName="ES256K";(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.cryptoClients=e.SECP256K1Client=void 0;const t=pr;Object.defineProperty(e,"SECP256K1Client",{enumerable:!0,get:function(){return t.SECP256K1Client}});const n={ES256K:t.SECP256K1Client};e.cryptoClients=n})(gr);var mt={};const Kd=lr(Wi);var Vd=ue&&ue.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(f){try{l(r.next(f))}catch(d){i(d)}}function u(f){try{l(r.throw(f))}catch(d){i(d)}}function l(f){f.done?o(f.value):s(f.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(mt,"__esModule",{value:!0});mt.hashSha256Async=mt.hashSha256=void 0;const Gd=hr;function Oa(e){return(0,Gd.sha256)(e)}mt.hashSha256=Oa;function Yd(e){return Vd(this,void 0,void 0,function*(){try{if(typeof crypto<"u"&&typeof crypto.subtle<"u"){const n=typeof e=="string"?new TextEncoder().encode(e):e,r=yield crypto.subtle.digest("SHA-256",n);return new Uint8Array(r)}else{const n=Kd;if(!n.createHash)throw new Error("`crypto` module does not contain `createHash`");return Promise.resolve(n.createHash("sha256").update(e).digest())}}catch(t){return console.log(t),console.log('Crypto lib not found. Neither the global `crypto.subtle` Web Crypto API, nor the or the Node.js `require("crypto").createHash` module is available. Falling back to JS implementation.'),Promise.resolve(Oa(e))}})}mt.hashSha256Async=Yd;var qd=ue&&ue.__awaiter||function(e,t,n,r){function s(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function a(f){try{l(r.next(f))}catch(d){i(d)}}function u(f){try{l(r.throw(f))}catch(d){i(d)}}function l(f){f.done?o(f.value):s(f.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};Object.defineProperty(zt,"__esModule",{value:!0});zt.TokenSigner=zt.createUnsecuredToken=void 0;const Jr=ce,Qo=gr,Zd=Ve,Wo=mt;function es(e,t){const n=[],r=Jr.encode(JSON.stringify(t));n.push(r);const s=Jr.encode(JSON.stringify(e));return n.push(s),n.join(".")}function Qd(e){return es(e,{typ:"JWT",alg:"none"})+"."}zt.createUnsecuredToken=Qd;class Wd{constructor(t,n){if(!(t&&n))throw new Zd.MissingParametersError("a signing algorithm and private key are required");if(typeof t!="string")throw new Error("signing algorithm parameter must be a string");if(t=t.toUpperCase(),!Qo.cryptoClients.hasOwnProperty(t))throw new Error("invalid signing algorithm");this.tokenType="JWT",this.cryptoClient=Qo.cryptoClients[t],this.rawPrivateKey=n}header(t={}){const n={typ:this.tokenType,alg:this.cryptoClient.algorithmName};return Object.assign({},n,t)}sign(t,n=!1,r={}){const s=this.header(r),o=es(t,s),i=(0,Wo.hashSha256)(o);return this.createWithSignedHash(t,n,s,o,i)}signAsync(t,n=!1,r={}){return qd(this,void 0,void 0,function*(){const s=this.header(r),o=es(t,s),i=yield(0,Wo.hashSha256Async)(o);return this.createWithSignedHash(t,n,s,o,i)})}createWithSignedHash(t,n,r,s,o){const i=this.cryptoClient.signHash(o,this.rawPrivateKey);return n?{header:[Jr.encode(JSON.stringify(r))],payload:JSON.stringify(t),signature:[i]}:[s,i].join(".")}}zt.TokenSigner=Wd;var yr={};Object.defineProperty(yr,"__esModule",{value:!0});yr.TokenVerifier=void 0;const Xd=ce,Xo=gr,Jd=Ve,$n=mt;class eh{constructor(t,n){if(!(t&&n))throw new Jd.MissingParametersError("a signing algorithm and public key are required");if(typeof t!="string")throw"signing algorithm parameter must be a string";if(t=t.toUpperCase(),!Xo.cryptoClients.hasOwnProperty(t))throw"invalid signing algorithm";this.tokenType="JWT",this.cryptoClient=Xo.cryptoClients[t],this.rawPublicKey=n}verify(t){return typeof t=="string"?this.verifyCompact(t,!1):typeof t=="object"?this.verifyExpanded(t,!1):!1}verifyAsync(t){return typeof t=="string"?this.verifyCompact(t,!0):typeof t=="object"?this.verifyExpanded(t,!0):Promise.resolve(!1)}verifyCompact(t,n){const r=t.split("."),s=r[0]+"."+r[1],o=i=>{const a=this.cryptoClient.loadSignature(r[2]);return this.cryptoClient.verifyHash(i,a,this.rawPublicKey)};if(n)return(0,$n.hashSha256Async)(s).then(i=>o(i));{const i=(0,$n.hashSha256)(s);return o(i)}}verifyExpanded(t,n){const r=[t.header.join("."),Xd.encode(t.payload)].join(".");let s=!0;const o=i=>(t.signature.map(a=>{const u=this.cryptoClient.loadSignature(a);this.cryptoClient.verifyHash(i,u,this.rawPublicKey)||(s=!1)}),s);if(n)return(0,$n.hashSha256Async)(r).then(i=>o(i));{const i=(0,$n.hashSha256)(r);return o(i)}}}yr.TokenVerifier=eh;var wr={};Object.defineProperty(wr,"__esModule",{value:!0});wr.decodeToken=void 0;const kn=ce;function th(e){if(typeof e=="string"){const t=e.split("."),n=JSON.parse(kn.decode(t[0])),r=JSON.parse(kn.decode(t[1])),s=t[2];return{header:n,payload:r,signature:s}}else if(typeof e=="object"){if(typeof e.payload!="string")throw new Error("Expected token payload to be a base64 or json string");let t=e.payload;e.payload[0]!=="{"&&(t=kn.decode(t));const n=[];return e.header.map(r=>{const s=JSON.parse(kn.decode(r));n.push(s)}),{header:n,payload:JSON.parse(t),signature:e.signature}}}wr.decodeToken=th;(function(e){var t=ue&&ue.__createBinding||(Object.create?function(r,s,o,i){i===void 0&&(i=o);var a=Object.getOwnPropertyDescriptor(s,o);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,i,a)}:function(r,s,o,i){i===void 0&&(i=o),r[i]=s[o]}),n=ue&&ue.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&t(s,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(zt,e),n(yr,e),n(wr,e),n(Ve,e),n(gr,e)})(ae);function nh(e){return`did:btc-addr:${e}`}function rh(e){const t=e.split(":");if(t.length!==3)throw new Bo("Decentralized IDs must have 3 parts");if(t[0].toLowerCase()!=="did")throw new Bo('Decentralized IDs must start with "did"');return t[1].toLowerCase()}function Ua(e){if(e)return rh(e)==="btc-addr"?e.split(":")[2]:void 0}const sh="1.4.0";function oh(){return bd()}function ih(e,t,n,r=Vi.slice(),s,o=cl().getTime(),i={}){const a=g=>{const m=Is("location",{throwIfUnavailable:!0,usageDesc:`makeAuthRequest([${g}=undefined])`});return m==null?void 0:m.origin};t||(t=`${a("redirectURI")}/`),n||(n=`${a("manifestURI")}/manifest.json`),s||(s=a("appDomain"));const u=Object.assign({},i,{jti:ll(),iat:Math.floor(new Date().getTime()/1e3),exp:Math.floor(o/1e3),iss:null,public_keys:[],domain_name:s,manifest_uri:n,redirect_uri:t,version:sh,do_not_include_profile:!0,supports_hub_url:!0,scopes:r}),l=ae.SECP256K1Client.derivePublicKey(e);u.public_keys=[l];const f=Sa(l);return u.iss=nh(f),new ae.TokenSigner("ES256k",e).sign(u)}async function Jo(e,t){const n=Sn(R(t)),r=JSON.parse(n),s=await xa(e,r);if(typeof s!="string")throw new Error("Unable to correctly decrypt private key");return s}function ah(e){const t=ae.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");const n=t.public_keys;if(n.length===1){const r=n[0];try{return new ae.TokenVerifier("ES256k",r).verify(e)}catch{return!1}}else throw new Error("Multiple public keys are not supported")}function ch(e){const t=ae.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");const n=t.public_keys,r=Ua(t.iss);if(n.length===1){if(Sa(n[0])===r)return!0}else throw new Error("Multiple public keys are not supported");return!1}function uh(e){const t=ae.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");if(t.iat){if(typeof t.iat!="number")return!1;const n=new Date(t.iat*1e3);return!(new Date().getTime()<n.getTime())}else return!0}function lh(e){const t=ae.decodeToken(e).payload;if(typeof t=="string")throw new Error("Unexpected token payload type of string");if(t.exp){if(typeof t.exp!="number")return!1;const n=new Date(t.exp*1e3);return!(new Date().getTime()>n.getTime())}else return!0}async function fh(e){return(await Promise.all([lh(e),uh(e),ah(e),ch(e)])).every(n=>n)}const ei="1.0.0";class ot{constructor(t){this.version=ei,this.userData=t.userData,this.transitKey=t.transitKey,this.etags=t.etags?t.etags:{}}static fromJSON(t){if(t.version!==ei)throw new Yr(`JSON data version ${t.version} not supported by SessionData`);const n={coreNode:t.coreNode,userData:t.userData,transitKey:t.transitKey,etags:t.etags};return new ot(n)}toString(){return JSON.stringify(this)}}class ja{constructor(t){if(t){const n=new ot(t);this.setSessionData(n)}}getSessionData(){throw new Error("Abstract class")}setSessionData(t){throw new Error("Abstract class")}deleteSessionData(){throw new Error("Abstract class")}}class ti extends ja{constructor(t){super(t),this.sessionData||this.setSessionData(new ot({}))}getSessionData(){if(!this.sessionData)throw new Gi("No session data was found.");return this.sessionData}setSessionData(t){return this.sessionData=t,!0}deleteSessionData(){return this.setSessionData(new ot({})),!0}}class ni extends ja{constructor(t){if(super(t),t&&t.storeOptions&&t.storeOptions.localStorageKey&&typeof t.storeOptions.localStorageKey=="string"?this.key=t.storeOptions.localStorageKey:this.key=ol,!localStorage.getItem(this.key)){const r=new ot({});this.setSessionData(r)}}getSessionData(){const t=localStorage.getItem(this.key);if(!t)throw new Gi("No session data was found in localStorage");const n=JSON.parse(t);return ot.fromJSON(n)}setSessionData(t){return localStorage.setItem(this.key,t.toString()),!0}deleteSessionData(){return localStorage.removeItem(this.key),this.setSessionData(new ot({})),!0}}function dh(e){const t=Object.values(e).filter(r=>typeof r=="number"),n=new Set(t);return r=>n.has(r)}const ri=new Map;function $a(e,t){const n=ri.get(e);if(n!==void 0)return n(t);const r=dh(e);return ri.set(e,r),$a(e,t)}class Z{constructor(t){this.consumed=0,this.source=typeof t=="string"?R(t):t}readBytes(t){const n=this.source.subarray(this.consumed,this.consumed+t);return this.consumed+=t,n}readUInt32BE(){return Dl(this.readBytes(4),0)}readUInt8(){return Tl(this.readBytes(1),0)}readUInt16BE(){return Ll(this.readBytes(2),0)}readBigUIntLE(t){const n=this.readBytes(t).slice().reverse(),r=N(n);return BigInt(`0x${r}`)}readBigUIntBE(t){const n=this.readBytes(t),r=N(n);return BigInt(`0x${r}`)}get readOffset(){return this.consumed}set readOffset(t){this.consumed=t}get internalBytes(){return this.source}readUInt8Enum(t,n){const r=this.readUInt8();if($a(t,r))return r;throw n(r)}}var St;(function(e){e[e.Mainnet=1]="Mainnet",e[e.Testnet=2147483648]="Testnet"})(St||(St={}));var Xn;(function(e){e[e.Mainnet=385875968]="Mainnet",e[e.Testnet=4278190080]="Testnet"})(Xn||(Xn={}));St.Mainnet;var Me;(function(e){e[e.Mainnet=0]="Mainnet",e[e.Testnet=128]="Testnet"})(Me||(Me={}));var Le;(function(e){e[e.MainnetSingleSig=22]="MainnetSingleSig",e[e.MainnetMultiSig=20]="MainnetMultiSig",e[e.TestnetSingleSig=26]="TestnetSingleSig",e[e.TestnetMultiSig=21]="TestnetMultiSig"})(Le||(Le={}));Me.Mainnet;const ka={chainId:St.Mainnet,transactionVersion:Me.Mainnet,peerNetworkId:Xn.Mainnet,magicBytes:"X2",bootAddress:"SP000000000000000000002Q6VF78",addressVersion:{singleSig:Le.MainnetSingleSig,multiSig:Le.MainnetMultiSig},client:{baseUrl:El}},ts={chainId:St.Testnet,transactionVersion:Me.Testnet,peerNetworkId:Xn.Testnet,magicBytes:"T2",bootAddress:"ST000000000000000000002AMW42H",addressVersion:{singleSig:Le.TestnetSingleSig,multiSig:Le.TestnetMultiSig},client:{baseUrl:Al}},Rn={...ts,addressVersion:{...ts.addressVersion},magicBytes:"id",client:{baseUrl:Il}},hh={...Rn,addressVersion:{...Rn.addressVersion},client:{...Rn.client}};function gh(e){switch(e){case"mainnet":return ka;case"testnet":return ts;case"devnet":return Rn;case"mocknet":return hh;default:throw new Error(`Unknown network name: ${e}`)}}function Us(e){return typeof e=="string"?gh(e):e}const ph=128,yh=128,Ha=16,pt=32,ns=80,br=65,wh=32,bh=64,Jn=34,mh=1+16*1024*1024,Sh=165,Eh=16,Ah=16,Ih=20,xh=Ah+2+Ih,vh=xh+4,Mh=mh+(Sh+Eh*vh);var V;(function(e){e[e.TokenTransfer=0]="TokenTransfer",e[e.SmartContract=1]="SmartContract",e[e.VersionedSmartContract=6]="VersionedSmartContract",e[e.ContractCall=2]="ContractCall",e[e.PoisonMicroblock=3]="PoisonMicroblock",e[e.Coinbase=4]="Coinbase",e[e.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",e[e.TenureChange=7]="TenureChange",e[e.NakamotoCoinbase=8]="NakamotoCoinbase"})(V||(V={}));var rs;(function(e){e[e.Clarity1=1]="Clarity1",e[e.Clarity2=2]="Clarity2",e[e.Clarity3=3]="Clarity3",e[e.Clarity4=4]="Clarity4"})(rs||(rs={}));var pe;(function(e){e[e.OnChainOnly=1]="OnChainOnly",e[e.OffChainOnly=2]="OffChainOnly",e[e.Any=3]="Any"})(pe||(pe={}));const Hr=["onChainOnly","offChainOnly","any"];Hr[0]+"",pe.OnChainOnly,Hr[1]+"",pe.OffChainOnly,Hr[2]+"",pe.Any,pe.OnChainOnly+"",pe.OnChainOnly,pe.OffChainOnly+"",pe.OffChainOnly,pe.Any+"",pe.Any;var er;(function(e){e[e.Allow=1]="Allow",e[e.Deny=2]="Deny"})(er||(er={}));var oe;(function(e){e[e.STX=0]="STX",e[e.Fungible=1]="Fungible",e[e.NonFungible=2]="NonFungible"})(oe||(oe={}));var X;(function(e){e[e.Standard=4]="Standard",e[e.Sponsored=5]="Sponsored"})(X||(X={}));var H;(function(e){e[e.P2PKH=0]="P2PKH",e[e.P2SH=1]="P2SH",e[e.P2WPKH=2]="P2WPKH",e[e.P2WSH=3]="P2WSH",e[e.P2SHNonSequential=5]="P2SHNonSequential",e[e.P2WSHNonSequential=7]="P2WSHNonSequential"})(H||(H={}));var W;(function(e){e[e.Compressed=0]="Compressed",e[e.Uncompressed=1]="Uncompressed"})(W||(W={}));var tr;(function(e){e[e.Equal=1]="Equal",e[e.Greater=2]="Greater",e[e.GreaterEqual=3]="GreaterEqual",e[e.Less=4]="Less",e[e.LessEqual=5]="LessEqual"})(tr||(tr={}));var ss;(function(e){e[e.Sends=16]="Sends",e[e.DoesNotSend=17]="DoesNotSend"})(ss||(ss={}));var me;(function(e){e[e.Origin=1]="Origin",e[e.Standard=2]="Standard",e[e.Contract=3]="Contract"})(me||(me={}));var si;(function(e){e[e.STX=0]="STX",e[e.Fungible=1]="Fungible",e[e.NonFungible=2]="NonFungible"})(si||(si={}));var os;(function(e){e[e.BlockFound=0]="BlockFound",e[e.Extended=1]="Extended",e[e.ExtendedRuntime=2]="ExtendedRuntime",e[e.ExtendedReadCount=3]="ExtendedReadCount",e[e.ExtendedReadLength=4]="ExtendedReadLength",e[e.ExtendedWriteCount=5]="ExtendedWriteCount",e[e.ExtendedWriteLength=6]="ExtendedWriteLength"})(os||(os={}));var xe;(function(e){e[e.PublicKeyCompressed=0]="PublicKeyCompressed",e[e.PublicKeyUncompressed=1]="PublicKeyUncompressed",e[e.SignatureCompressed=2]="SignatureCompressed",e[e.SignatureUncompressed=3]="SignatureUncompressed"})(xe||(xe={}));var oi;(function(e){e.Serialization="Serialization",e.Deserialization="Deserialization",e.SignatureValidation="SignatureValidation",e.FeeTooLow="FeeTooLow",e.BadNonce="BadNonce",e.NotEnoughFunds="NotEnoughFunds",e.NoSuchContract="NoSuchContract",e.NoSuchPublicFunction="NoSuchPublicFunction",e.BadFunctionArgument="BadFunctionArgument",e.ContractAlreadyExists="ContractAlreadyExists",e.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",e.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",e.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",e.BadAddressVersionByte="BadAddressVersionByte",e.NoCoinbaseViaMempool="NoCoinbaseViaMempool",e.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",e.ServerFailureDatabase="ServerFailureDatabase",e.ServerFailureOther="ServerFailureOther"})(oi||(oi={}));let mr=class extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Pt=class extends mr{constructor(t){super(t)}};class we extends mr{constructor(t){super(t)}}class nr extends mr{constructor(t){super(t)}}class gt extends mr{constructor(t){super(t)}}var js={},$s={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.c32decode=e.c32normalize=e.c32encode=e.c32=void 0;const t=Qt;e.c32="0123456789ABCDEFGHJKMNPQRSTVWXYZ";const n="0123456789abcdef";function r(i,a){if(!i.match(/^[0-9a-fA-F]*$/))throw new Error("Not a hex-encoded string");i.length%2!==0&&(i=`0${i}`),i=i.toLowerCase();let u=[],l=0;for(let g=i.length-1;g>=0;g--)if(l<4){const m=n.indexOf(i[g])>>l;let E=0;g!==0&&(E=n.indexOf(i[g-1]));const v=1+l,B=E%(1<<v)<<5-v,_=e.c32[m+B];l=v,u.unshift(_)}else l=0;let f=0;for(let g=0;g<u.length&&u[g]==="0";g++)f++;u=u.slice(f);const d=new TextDecoder().decode((0,t.hexToBytes)(i)).match(/^\u0000*/),y=d?d[0].length:0;for(let g=0;g<y;g++)u.unshift(e.c32[0]);if(a){const g=a-u.length;for(let m=0;m<g;m++)u.unshift(e.c32[0])}return u.join("")}e.c32encode=r;function s(i){return i.toUpperCase().replace(/O/g,"0").replace(/L|I/g,"1")}e.c32normalize=s;function o(i,a){if(i=s(i),!i.match(`^[${e.c32}]*$`))throw new Error("Not a c32-encoded string");const u=i.match(`^${e.c32[0]}*`),l=u?u[0].length:0;let f=[],d=0,y=0;for(let E=i.length-1;E>=0;E--){y===4&&(f.unshift(n[d]),y=0,d=0);const B=(e.c32.indexOf(i[E])<<y)+d,_=n[B%16];if(y+=1,d=B>>4,d>1<<y)throw new Error("Panic error in decoding.");f.unshift(_)}f.unshift(n[d]),f.length%2===1&&f.unshift("0");let g=0;for(let E=0;E<f.length&&f[E]==="0";E++)g++;f=f.slice(g-g%2);let m=f.join("");for(let E=0;E<l;E++)m=`00${m}`;if(a){const E=a*2-m.length;for(let v=0;v<E;v+=2)m=`00${m}`}return m}e.c32decode=o})($s);var Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.c32checkDecode=Et.c32checkEncode=void 0;const ii=hr,ai=Qt,ln=$s;function za(e){const t=(0,ii.sha256)((0,ii.sha256)((0,ai.hexToBytes)(e)));return(0,ai.bytesToHex)(t.slice(0,4))}function Lh(e,t){if(e<0||e>=32)throw new Error("Invalid version (must be between 0 and 31)");if(!t.match(/^[0-9a-fA-F]*$/))throw new Error("Invalid data (not a hex string)");t=t.toLowerCase(),t.length%2!==0&&(t=`0${t}`);let n=e.toString(16);n.length===1&&(n=`0${n}`);const r=za(`${n}${t}`),s=(0,ln.c32encode)(`${t}${r}`);return`${ln.c32[e]}${s}`}Et.c32checkEncode=Lh;function Ch(e){e=(0,ln.c32normalize)(e);const t=(0,ln.c32decode)(e.slice(1)),n=e[0],r=ln.c32.indexOf(n),s=t.slice(-8);let o=r.toString(16);if(o.length===1&&(o=`0${o}`),za(`${o}${t.substring(0,t.length-8)}`)!==s)throw new Error("Invalid c32check string: checksum mismatch");return[r,t.substring(0,t.length-8)]}Et.c32checkDecode=Ch;var Fa={},Rt={};Object.defineProperty(Rt,"__esModule",{value:!0});Rt.decode=Rt.encode=void 0;const rr=hr,ci=Qt,Ra=ga,Ka="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function Th(e,t="00"){const n=typeof e=="string"?(0,ci.hexToBytes)(e):e,r=typeof t=="string"?(0,ci.hexToBytes)(t):e;if(!(n instanceof Uint8Array)||!(r instanceof Uint8Array))throw new TypeError("Argument must be of type Uint8Array or string");const s=(0,rr.sha256)((0,rr.sha256)(new Uint8Array([...r,...n])));return Ra(Ka).encode([...r,...n,...s.slice(0,4)])}Rt.encode=Th;function Nh(e){const t=Ra(Ka).decode(e),n=t.slice(0,1),r=t.slice(1,-4),s=(0,rr.sha256)((0,rr.sha256)(new Uint8Array([...n,...r])));return t.slice(-4).forEach((o,i)=>{if(o!==s[i])throw new Error("Invalid checksum")}),{prefix:n,data:r}}Rt.decode=Nh;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.c32ToB58=e.b58ToC32=e.c32addressDecode=e.c32address=e.versions=void 0;const t=Et,n=Rt,r=Qt;e.versions={mainnet:{p2pkh:22,p2sh:20},testnet:{p2pkh:26,p2sh:21}};const s={};s[0]=e.versions.mainnet.p2pkh,s[5]=e.versions.mainnet.p2sh,s[111]=e.versions.testnet.p2pkh,s[196]=e.versions.testnet.p2sh;const o={};o[e.versions.mainnet.p2pkh]=0,o[e.versions.mainnet.p2sh]=5,o[e.versions.testnet.p2pkh]=111,o[e.versions.testnet.p2sh]=196;function i(f,d){if(!d.match(/^[0-9a-fA-F]{40}$/))throw new Error("Invalid argument: not a hash160 hex string");return`S${(0,t.c32checkEncode)(f,d)}`}e.c32address=i;function a(f){if(f.length<=5)throw new Error("Invalid c32 address: invalid length");if(f[0]!="S")throw new Error('Invalid c32 address: must start with "S"');return(0,t.c32checkDecode)(f.slice(1))}e.c32addressDecode=a;function u(f,d=-1){const y=n.decode(f),g=(0,r.bytesToHex)(y.data),m=parseInt((0,r.bytesToHex)(y.prefix),16);let E;return d<0?(E=m,s[m]!==void 0&&(E=s[m])):E=d,i(E,g)}e.b58ToC32=u;function l(f,d=-1){const y=a(f),g=y[0],m=y[1];let E;d<0?(E=g,o[g]!==void 0&&(E=o[g])):E=d;let v=E.toString(16);return v.length===1&&(v=`0${v}`),n.encode(m,v)}e.c32ToB58=l})(Fa);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.b58ToC32=e.c32ToB58=e.versions=e.c32normalize=e.c32addressDecode=e.c32address=e.c32checkDecode=e.c32checkEncode=e.c32decode=e.c32encode=void 0;const t=$s;Object.defineProperty(e,"c32encode",{enumerable:!0,get:function(){return t.c32encode}}),Object.defineProperty(e,"c32decode",{enumerable:!0,get:function(){return t.c32decode}}),Object.defineProperty(e,"c32normalize",{enumerable:!0,get:function(){return t.c32normalize}});const n=Et;Object.defineProperty(e,"c32checkEncode",{enumerable:!0,get:function(){return n.c32checkEncode}}),Object.defineProperty(e,"c32checkDecode",{enumerable:!0,get:function(){return n.c32checkDecode}});const r=Fa;Object.defineProperty(e,"c32address",{enumerable:!0,get:function(){return r.c32address}}),Object.defineProperty(e,"c32addressDecode",{enumerable:!0,get:function(){return r.c32addressDecode}}),Object.defineProperty(e,"c32ToB58",{enumerable:!0,get:function(){return r.c32ToB58}}),Object.defineProperty(e,"b58ToC32",{enumerable:!0,get:function(){return r.b58ToC32}}),Object.defineProperty(e,"versions",{enumerable:!0,get:function(){return r.versions}})})(js);function Dh(e,t){switch(t=Us(t??ka),e){case H.P2PKH:switch(t.transactionVersion){case Me.Mainnet:return Le.MainnetSingleSig;case Me.Testnet:return Le.TestnetSingleSig;default:throw new Error(`Unexpected transactionVersion ${t.transactionVersion} for hashMode ${e}`)}case H.P2SH:case H.P2SHNonSequential:case H.P2WPKH:case H.P2WSH:case H.P2WSHNonSequential:switch(t.transactionVersion){case Me.Mainnet:return Le.MainnetMultiSig;case Me.Testnet:return Le.TestnetMultiSig;default:throw new Error(`Unexpected transactionVersion ${t.transactionVersion} for hashMode ${e}`)}default:throw new Error(`Unexpected hashMode ${e}`)}}var sr={exports:{}};sr.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",s=9007199254740991,o="[object Arguments]",i="[object Array]",a="[object Boolean]",u="[object Date]",l="[object Error]",f="[object Function]",d="[object GeneratorFunction]",y="[object Map]",g="[object Number]",m="[object Object]",E="[object Promise]",v="[object RegExp]",B="[object Set]",_="[object String]",T="[object Symbol]",w="[object WeakMap]",A="[object ArrayBuffer]",C="[object DataView]",L="[object Float32Array]",F="[object Float64Array]",G="[object Int8Array]",p="[object Int16Array]",S="[object Int32Array]",D="[object Uint8Array]",$="[object Uint8ClampedArray]",Y="[object Uint16Array]",P="[object Uint32Array]",Lt=/[\\^$.*+?()[\]{}|]/g,tn=/\w*$/,In=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,k={};k[o]=k[i]=k[A]=k[C]=k[a]=k[u]=k[L]=k[F]=k[G]=k[p]=k[S]=k[y]=k[g]=k[m]=k[v]=k[B]=k[_]=k[T]=k[D]=k[$]=k[Y]=k[P]=!0,k[l]=k[f]=k[w]=!1;var jc=typeof ue=="object"&&ue&&ue.Object===Object&&ue,$c=typeof self=="object"&&self&&self.Object===Object&&self,ze=jc||$c||Function("return this")(),io=t&&!t.nodeType&&t,ao=io&&!0&&e&&!e.nodeType&&e,kc=ao&&ao.exports===io;function Hc(c,h){return c.set(h[0],h[1]),c}function zc(c,h){return c.add(h),c}function Fc(c,h){for(var b=-1,M=c?c.length:0;++b<M&&h(c[b],b,c)!==!1;);return c}function Rc(c,h){for(var b=-1,M=h.length,se=c.length;++b<M;)c[se+b]=h[b];return c}function co(c,h,b,M){for(var se=-1,fe=c?c.length:0;++se<fe;)b=h(b,c[se],se,c);return b}function Kc(c,h){for(var b=-1,M=Array(c);++b<c;)M[b]=h(b);return M}function Vc(c,h){return c==null?void 0:c[h]}function uo(c){var h=!1;if(c!=null&&typeof c.toString!="function")try{h=!!(c+"")}catch{}return h}function lo(c){var h=-1,b=Array(c.size);return c.forEach(function(M,se){b[++h]=[se,M]}),b}function xr(c,h){return function(b){return c(h(b))}}function fo(c){var h=-1,b=Array(c.size);return c.forEach(function(M){b[++h]=M}),b}var Gc=Array.prototype,Yc=Function.prototype,xn=Object.prototype,vr=ze["__core-js_shared__"],ho=function(){var c=/[^.]+$/.exec(vr&&vr.keys&&vr.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),go=Yc.toString,qe=xn.hasOwnProperty,vn=xn.toString,qc=RegExp("^"+go.call(qe).replace(Lt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),po=kc?ze.Buffer:void 0,yo=ze.Symbol,wo=ze.Uint8Array,Zc=xr(Object.getPrototypeOf,Object),Qc=Object.create,Wc=xn.propertyIsEnumerable,Xc=Gc.splice,bo=Object.getOwnPropertySymbols,Jc=po?po.isBuffer:void 0,eu=xr(Object.keys,Object),Mr=Nt(ze,"DataView"),nn=Nt(ze,"Map"),Lr=Nt(ze,"Promise"),Cr=Nt(ze,"Set"),Tr=Nt(ze,"WeakMap"),rn=Nt(Object,"create"),tu=ft(Mr),nu=ft(nn),ru=ft(Lr),su=ft(Cr),ou=ft(Tr),mo=yo?yo.prototype:void 0,So=mo?mo.valueOf:void 0;function ut(c){var h=-1,b=c?c.length:0;for(this.clear();++h<b;){var M=c[h];this.set(M[0],M[1])}}function iu(){this.__data__=rn?rn(null):{}}function au(c){return this.has(c)&&delete this.__data__[c]}function cu(c){var h=this.__data__;if(rn){var b=h[c];return b===r?void 0:b}return qe.call(h,c)?h[c]:void 0}function uu(c){var h=this.__data__;return rn?h[c]!==void 0:qe.call(h,c)}function lu(c,h){var b=this.__data__;return b[c]=rn&&h===void 0?r:h,this}ut.prototype.clear=iu,ut.prototype.delete=au,ut.prototype.get=cu,ut.prototype.has=uu,ut.prototype.set=lu;function Fe(c){var h=-1,b=c?c.length:0;for(this.clear();++h<b;){var M=c[h];this.set(M[0],M[1])}}function fu(){this.__data__=[]}function du(c){var h=this.__data__,b=Mn(h,c);if(b<0)return!1;var M=h.length-1;return b==M?h.pop():Xc.call(h,b,1),!0}function hu(c){var h=this.__data__,b=Mn(h,c);return b<0?void 0:h[b][1]}function gu(c){return Mn(this.__data__,c)>-1}function pu(c,h){var b=this.__data__,M=Mn(b,c);return M<0?b.push([c,h]):b[M][1]=h,this}Fe.prototype.clear=fu,Fe.prototype.delete=du,Fe.prototype.get=hu,Fe.prototype.has=gu,Fe.prototype.set=pu;function Ct(c){var h=-1,b=c?c.length:0;for(this.clear();++h<b;){var M=c[h];this.set(M[0],M[1])}}function yu(){this.__data__={hash:new ut,map:new(nn||Fe),string:new ut}}function wu(c){return Ln(this,c).delete(c)}function bu(c){return Ln(this,c).get(c)}function mu(c){return Ln(this,c).has(c)}function Su(c,h){return Ln(this,c).set(c,h),this}Ct.prototype.clear=yu,Ct.prototype.delete=wu,Ct.prototype.get=bu,Ct.prototype.has=mu,Ct.prototype.set=Su;function Tt(c){this.__data__=new Fe(c)}function Eu(){this.__data__=new Fe}function Au(c){return this.__data__.delete(c)}function Iu(c){return this.__data__.get(c)}function xu(c){return this.__data__.has(c)}function vu(c,h){var b=this.__data__;if(b instanceof Fe){var M=b.__data__;if(!nn||M.length<n-1)return M.push([c,h]),this;b=this.__data__=new Ct(M)}return b.set(c,h),this}Tt.prototype.clear=Eu,Tt.prototype.delete=Au,Tt.prototype.get=Iu,Tt.prototype.has=xu,Tt.prototype.set=vu;function Mu(c,h){var b=Br(c)||Qu(c)?Kc(c.length,String):[],M=b.length,se=!!M;for(var fe in c)qe.call(c,fe)&&!(se&&(fe=="length"||Gu(fe,M)))&&b.push(fe);return b}function Eo(c,h,b){var M=c[h];(!(qe.call(c,h)&&vo(M,b))||b===void 0&&!(h in c))&&(c[h]=b)}function Mn(c,h){for(var b=c.length;b--;)if(vo(c[b][0],h))return b;return-1}function Lu(c,h){return c&&Ao(h,_r(h),c)}function Nr(c,h,b,M,se,fe,Re){var de;if(M&&(de=fe?M(c,se,fe,Re):M(c)),de!==void 0)return de;if(!Cn(c))return c;var Co=Br(c);if(Co){if(de=Ru(c),!h)return Hu(c,de)}else{var Dt=lt(c),To=Dt==f||Dt==d;if(Xu(c))return _u(c,h);if(Dt==m||Dt==o||To&&!fe){if(uo(c))return fe?c:{};if(de=Ku(To?{}:c),!h)return zu(c,Lu(de,c))}else{if(!k[Dt])return fe?c:{};de=Vu(c,Dt,Nr,h)}}Re||(Re=new Tt);var No=Re.get(c);if(No)return No;if(Re.set(c,de),!Co)var Do=b?Fu(c):_r(c);return Fc(Do||c,function(Pr,Tn){Do&&(Tn=Pr,Pr=c[Tn]),Eo(de,Tn,Nr(Pr,h,b,M,Tn,c,Re))}),de}function Cu(c){return Cn(c)?Qc(c):{}}function Tu(c,h,b){var M=h(c);return Br(c)?M:Rc(M,b(c))}function Nu(c){return vn.call(c)}function Du(c){if(!Cn(c)||qu(c))return!1;var h=Lo(c)||uo(c)?qc:In;return h.test(ft(c))}function Bu(c){if(!xo(c))return eu(c);var h=[];for(var b in Object(c))qe.call(c,b)&&b!="constructor"&&h.push(b);return h}function _u(c,h){if(h)return c.slice();var b=new c.constructor(c.length);return c.copy(b),b}function Dr(c){var h=new c.constructor(c.byteLength);return new wo(h).set(new wo(c)),h}function Pu(c,h){var b=h?Dr(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.byteLength)}function Ou(c,h,b){var M=h?b(lo(c),!0):lo(c);return co(M,Hc,new c.constructor)}function Uu(c){var h=new c.constructor(c.source,tn.exec(c));return h.lastIndex=c.lastIndex,h}function ju(c,h,b){var M=h?b(fo(c),!0):fo(c);return co(M,zc,new c.constructor)}function $u(c){return So?Object(So.call(c)):{}}function ku(c,h){var b=h?Dr(c.buffer):c.buffer;return new c.constructor(b,c.byteOffset,c.length)}function Hu(c,h){var b=-1,M=c.length;for(h||(h=Array(M));++b<M;)h[b]=c[b];return h}function Ao(c,h,b,M){b||(b={});for(var se=-1,fe=h.length;++se<fe;){var Re=h[se],de=void 0;Eo(b,Re,de===void 0?c[Re]:de)}return b}function zu(c,h){return Ao(c,Io(c),h)}function Fu(c){return Tu(c,_r,Io)}function Ln(c,h){var b=c.__data__;return Yu(h)?b[typeof h=="string"?"string":"hash"]:b.map}function Nt(c,h){var b=Vc(c,h);return Du(b)?b:void 0}var Io=bo?xr(bo,Object):tl,lt=Nu;(Mr&&lt(new Mr(new ArrayBuffer(1)))!=C||nn&&lt(new nn)!=y||Lr&&lt(Lr.resolve())!=E||Cr&&lt(new Cr)!=B||Tr&&lt(new Tr)!=w)&&(lt=function(c){var h=vn.call(c),b=h==m?c.constructor:void 0,M=b?ft(b):void 0;if(M)switch(M){case tu:return C;case nu:return y;case ru:return E;case su:return B;case ou:return w}return h});function Ru(c){var h=c.length,b=c.constructor(h);return h&&typeof c[0]=="string"&&qe.call(c,"index")&&(b.index=c.index,b.input=c.input),b}function Ku(c){return typeof c.constructor=="function"&&!xo(c)?Cu(Zc(c)):{}}function Vu(c,h,b,M){var se=c.constructor;switch(h){case A:return Dr(c);case a:case u:return new se(+c);case C:return Pu(c,M);case L:case F:case G:case p:case S:case D:case $:case Y:case P:return ku(c,M);case y:return Ou(c,M,b);case g:case _:return new se(c);case v:return Uu(c);case B:return ju(c,M,b);case T:return $u(c)}}function Gu(c,h){return h=h??s,!!h&&(typeof c=="number"||te.test(c))&&c>-1&&c%1==0&&c<h}function Yu(c){var h=typeof c;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?c!=="__proto__":c===null}function qu(c){return!!ho&&ho in c}function xo(c){var h=c&&c.constructor,b=typeof h=="function"&&h.prototype||xn;return c===b}function ft(c){if(c!=null){try{return go.call(c)}catch{}try{return c+""}catch{}}return""}function Zu(c){return Nr(c,!0,!0)}function vo(c,h){return c===h||c!==c&&h!==h}function Qu(c){return Wu(c)&&qe.call(c,"callee")&&(!Wc.call(c,"callee")||vn.call(c)==o)}var Br=Array.isArray;function Mo(c){return c!=null&&Ju(c.length)&&!Lo(c)}function Wu(c){return el(c)&&Mo(c)}var Xu=Jc||nl;function Lo(c){var h=Cn(c)?vn.call(c):"";return h==f||h==d}function Ju(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=s}function Cn(c){var h=typeof c;return!!c&&(h=="object"||h=="function")}function el(c){return!!c&&typeof c=="object"}function _r(c){return Mo(c)?Mu(c):Bu(c)}function tl(){return[]}function nl(){return!1}e.exports=Zu})(sr,sr.exports);var Bh=sr.exports;const _h=fa(Bh);var j;(function(e){e.Int="int",e.UInt="uint",e.Buffer="buffer",e.BoolTrue="true",e.BoolFalse="false",e.PrincipalStandard="address",e.PrincipalContract="contract",e.ResponseOk="ok",e.ResponseErr="err",e.OptionalNone="none",e.OptionalSome="some",e.List="list",e.Tuple="tuple",e.StringASCII="ascii",e.StringUTF8="utf8"})(j||(j={}));var ne;(function(e){e[e.int=0]="int",e[e.uint=1]="uint",e[e.buffer=2]="buffer",e[e.true=3]="true",e[e.false=4]="false",e[e.address=5]="address",e[e.contract=6]="contract",e[e.ok=7]="ok",e[e.err=8]="err",e[e.none=9]="none",e[e.some=10]="some",e[e.list=11]="list",e[e.tuple=12]="tuple",e[e.ascii=13]="ascii",e[e.utf8=14]="utf8"})(ne||(ne={}));function ks(e){return ne[e]}const Ph=()=>({type:j.BoolTrue}),Oh=()=>({type:j.BoolFalse}),Uh=e=>{if(e.byteLength>1048576)throw new Error("Cannot construct clarity buffer that is greater than 1MB");return{type:j.Buffer,value:N(e)}},ui=BigInt("0xffffffffffffffffffffffffffffffff"),jh=BigInt(0),li=BigInt("0x7fffffffffffffffffffffffffffffff"),fi=BigInt("-170141183460469231731687303715884105728"),$h=e=>{typeof e=="string"&&e.toLowerCase().startsWith("0x")&&(e=Zr(R(e))),he(e,Uint8Array)&&(e=Zr(e));const t=le(e);if(t>li)throw new RangeError(`Cannot construct clarity integer from value greater than ${li}`);if(t<fi)throw new RangeError(`Cannot construct clarity integer form value less than ${fi}`);return{type:j.Int,value:t}},kh=e=>{const t=le(e);if(t<jh)throw new RangeError("Cannot construct unsigned clarity integer from negative value");if(t>ui)throw new RangeError(`Cannot construct unsigned clarity integer greater than ${ui}`);return{type:j.UInt,value:t}};function Hh(e){return{type:j.List,value:e}}function Va(){return{type:j.OptionalNone}}function Ga(e){return{type:j.OptionalSome,value:e}}var x;(function(e){e[e.Address=0]="Address",e[e.Principal=1]="Principal",e[e.LengthPrefixedString=2]="LengthPrefixedString",e[e.MemoString=3]="MemoString",e[e.Asset=4]="Asset",e[e.PostCondition=5]="PostCondition",e[e.PublicKey=6]="PublicKey",e[e.LengthPrefixedList=7]="LengthPrefixedList",e[e.Payload=8]="Payload",e[e.MessageSignature=9]="MessageSignature",e[e.StructuredDataSignature=10]="StructuredDataSignature",e[e.TransactionAuthField=11]="TransactionAuthField"})(x||(x={}));function zh(){return{type:x.Address,version:Le.MainnetSingleSig,hash160:"0".repeat(40)}}function di(e){if(e&&tc(e,Jn))throw new Error(`Memo exceeds maximum length of ${Jn} bytes`);return{type:x.MemoString,content:e}}function Hs(e,t){return{type:x.LengthPrefixedList,lengthPrefixBytes:t||4,values:e}}function is(e){if(R(e).byteLength!=br)throw Error("Invalid signature");return{type:x.MessageSignature,data:e}}function Fh(e,t,n){return typeof e=="string"&&(e=sg(e)),typeof n=="string"&&(n=di(n)),{type:x.Payload,payloadType:V.TokenTransfer,recipient:e,amount:le(t),memo:n??di("")}}function Rh(e,t,n,r){return typeof t=="string"&&(t=Te(t)),typeof n=="string"&&(n=Te(n)),{type:x.Payload,payloadType:V.ContractCall,contractAddress:typeof e=="string"?ct(e):e,contractName:t,functionName:n,functionArgs:r}}function Kh(e){return Te(e,4,1e5)}function hi(e,t,n){return typeof e=="string"&&(e=Te(e)),typeof t=="string"&&(t=Kh(t)),typeof n=="number"?{type:x.Payload,payloadType:V.VersionedSmartContract,clarityVersion:n,contractName:e,codeBody:t}:{type:x.Payload,payloadType:V.SmartContract,contractName:e,codeBody:t}}function Vh(){return{type:x.Payload,payloadType:V.PoisonMicroblock}}function gi(e,t){if(e.byteLength!=pt)throw Error(`Coinbase buffer size must be ${pt} bytes`);return t!=null?{type:x.Payload,payloadType:V.CoinbaseToAltRecipient,coinbaseBytes:e,recipient:t}:{type:x.Payload,payloadType:V.Coinbase,coinbaseBytes:e}}function Gh(e,t,n){if(e.byteLength!=pt)throw Error(`Coinbase buffer size must be ${pt} bytes`);if(n.byteLength!=ns)throw Error(`VRF proof buffer size must be ${ns} bytes`);return{type:x.Payload,payloadType:V.NakamotoCoinbase,coinbaseBytes:e,recipient:t.type===j.OptionalSome?t.value:void 0,vrfProof:n}}function Yh(e,t,n,r,s,o,i){return{type:x.Payload,payloadType:V.TenureChange,tenureHash:e,previousTenureHash:t,burnViewHash:n,previousTenureEnd:r,previousTenureBlocks:s,cause:o,publicKeyHash:i}}function Te(e,t,n){const r=t||1,s=n||ph;if(tc(e,s))throw new Error(`String length exceeds maximum bytes ${s}`);return{type:x.LengthPrefixedString,content:e,lengthPrefixBytes:r,maxLengthBytes:s}}function qh(e,t,n){return{type:x.Asset,address:ct(e),contractName:Te(t),assetName:Te(n)}}function ct(e){const t=js.c32addressDecode(e);return{type:x.Address,version:t[0],hash160:t[1]}}function Zh(e,t){const n=ct(e),r=Te(t);return{type:x.Principal,prefix:me.Contract,address:n,contractName:r}}function Qh(e){const t=ct(e);return{type:x.Principal,prefix:me.Standard,address:t}}function Ot(e,t){return{pubKeyEncoding:e,type:x.TransactionAuthField,contents:t}}function Ke(e){switch(e.type){case x.Address:return An(e);case x.Principal:return Ya(e);case x.LengthPrefixedString:return Vt(e);case x.MemoString:return Xh(e);case x.Asset:return Za(e);case x.PostCondition:return Wa(e);case x.PublicKey:return us(e);case x.LengthPrefixedList:return zs(e);case x.Payload:return Xa(e);case x.TransactionAuthField:return rg(e);case x.MessageSignature:return Fs(e)}}function An(e){const t=[];return t.push(R(mn(e.version,1))),t.push(R(e.hash160)),J(t)}function Kt(e){const t=he(e,Z)?e:new Z(e),n=ar(N(t.readBytes(1))),r=N(t.readBytes(20));return{type:x.Address,version:n,hash160:r}}function Ya(e){const t=[];return t.push(e.prefix),(e.prefix===me.Standard||e.prefix===me.Contract)&&t.push(An(e.address)),e.prefix===me.Contract&&t.push(Vt(e.contractName)),J(t)}function Wh(e){const t=he(e,Z)?e:new Z(e),n=t.readUInt8Enum(me,o=>{throw new we(`Unexpected Principal payload type: ${o}`)});if(n===me.Origin)return{type:x.Principal,prefix:n};const r=Kt(t);if(n===me.Standard)return{type:x.Principal,prefix:n,address:r};const s=Ae(t);return{type:x.Principal,prefix:n,address:r,contractName:s}}function Vt(e){const t=[],n=vt(e.content),r=n.byteLength;return t.push(R(mn(r,e.lengthPrefixBytes))),t.push(n),J(t)}function Ae(e,t,n){t=t||1;const r=he(e,Z)?e:new Z(e),s=ar(N(r.readBytes(t))),o=Sn(r.readBytes(s));return Te(o,t,n??128)}function Xh(e){const t=[],n=vt(e.content),r=Mg(N(n),Jn*2);return t.push(R(r)),J(t)}function qa(e){const t=he(e,Z)?e:new Z(e);let n=Sn(t.readBytes(Jn));return n=n.replace(/\u0000*$/,""),{type:x.MemoString,content:n}}function Za(e){const t=[];return t.push(An(e.address)),t.push(Vt(e.contractName)),t.push(Vt(e.assetName)),J(t)}function as(e){const t=he(e,Z)?e:new Z(e);return{type:x.Asset,address:Kt(t),contractName:Ae(t),assetName:Ae(t)}}function zs(e){const t=e.values,n=[];n.push(R(mn(t.length,e.lengthPrefixBytes)));for(const r of t)n.push(Ke(r));return J(n)}function Qa(e,t,n){const r=he(e,Z)?e:new Z(e),s=ar(N(r.readBytes(4))),o=[];for(let i=0;i<s;i++)switch(t){case x.Address:o.push(Kt(r));break;case x.LengthPrefixedString:o.push(Ae(r));break;case x.MemoString:o.push(qa(r));break;case x.Asset:o.push(as(r));break;case x.PostCondition:o.push(eg(r));break;case x.PublicKey:o.push(ls(r));break;case x.TransactionAuthField:o.push(ng(r));break}return Hs(o,n)}function Jh(e){return N(Wa(e))}function Wa(e){const t=[];if(t.push(e.conditionType),t.push(Ya(e.principal)),(e.conditionType===oe.Fungible||e.conditionType===oe.NonFungible)&&t.push(Za(e.asset)),e.conditionType===oe.NonFungible&&t.push(_e(e.assetName)),t.push(e.conditionCode),e.conditionType===oe.STX||e.conditionType===oe.Fungible){if(e.amount>BigInt("0xffffffffffffffff"))throw new Pt("The post-condition amount may not be larger than 8 bytes");t.push(it(e.amount,8))}return J(t)}function eg(e){const t=he(e,Z)?e:new Z(e),n=t.readUInt8Enum(oe,a=>{throw new we(`Could not read ${a} as PostConditionType`)}),r=Wh(t);let s,o,i;switch(n){case oe.STX:return s=t.readUInt8Enum(tr,u=>{throw new we(`Could not read ${u} as FungibleConditionCode`)}),i=BigInt(`0x${N(t.readBytes(8))}`),{type:x.PostCondition,conditionType:oe.STX,principal:r,conditionCode:s,amount:i};case oe.Fungible:return o=as(t),s=t.readUInt8Enum(tr,u=>{throw new we(`Could not read ${u} as FungibleConditionCode`)}),i=BigInt(`0x${N(t.readBytes(8))}`),{type:x.PostCondition,conditionType:oe.Fungible,principal:r,conditionCode:s,amount:i,asset:o};case oe.NonFungible:o=as(t);const a=Be(t);return s=t.readUInt8Enum(ss,u=>{throw new we(`Could not read ${u} as FungibleConditionCode`)}),{type:x.PostCondition,conditionType:oe.NonFungible,principal:r,conditionCode:s,asset:o,assetName:a}}}function Xa(e){const t=[];switch(t.push(e.payloadType),e.payloadType){case V.TokenTransfer:t.push(_e(e.recipient)),t.push(it(e.amount,8)),t.push(Ke(e.memo));break;case V.ContractCall:t.push(Ke(e.contractAddress)),t.push(Ke(e.contractName)),t.push(Ke(e.functionName));const n=new Uint8Array(4);yt(n,e.functionArgs.length,0),t.push(n),e.functionArgs.forEach(r=>{t.push(_e(r))});break;case V.SmartContract:t.push(Ke(e.contractName)),t.push(Ke(e.codeBody));break;case V.VersionedSmartContract:t.push(e.clarityVersion),t.push(Ke(e.contractName)),t.push(Ke(e.codeBody));break;case V.PoisonMicroblock:break;case V.Coinbase:t.push(e.coinbaseBytes);break;case V.CoinbaseToAltRecipient:t.push(e.coinbaseBytes),t.push(_e(e.recipient));break;case V.NakamotoCoinbase:t.push(e.coinbaseBytes),t.push(_e(e.recipient?Ga(e.recipient):Va())),t.push(e.vrfProof);break;case V.TenureChange:t.push(R(e.tenureHash)),t.push(R(e.previousTenureHash)),t.push(R(e.burnViewHash)),t.push(R(e.previousTenureEnd)),t.push(yt(new Uint8Array(4),e.previousTenureBlocks)),t.push(Nl(new Uint8Array(1),e.cause)),t.push(R(e.publicKeyHash));break}return J(t)}function tg(e){const t=he(e,Z)?e:new Z(e);switch(t.readUInt8Enum(V,r=>{throw new Error(`Cannot recognize PayloadType: ${r}`)})){case V.TokenTransfer:const r=Be(t),s=le(t.readBytes(8)),o=qa(t);return Fh(r,s,o);case V.ContractCall:const i=Kt(t),a=Ae(t),u=Ae(t),l=[],f=t.readUInt32BE();for(let w=0;w<f;w++){const A=Be(t);l.push(A)}return Rh(i,a,u,l);case V.SmartContract:const d=Ae(t),y=Ae(t,4,1e5);return hi(d,y);case V.VersionedSmartContract:{const w=t.readUInt8Enum(rs,L=>{throw new Error(`Cannot recognize ClarityVersion: ${L}`)}),A=Ae(t),C=Ae(t,4,Mh);return hi(A,C,w)}case V.PoisonMicroblock:return Vh();case V.Coinbase:{const w=t.readBytes(pt);return gi(w)}case V.CoinbaseToAltRecipient:{const w=t.readBytes(pt),A=Be(t);return gi(w,A)}case V.NakamotoCoinbase:{const w=t.readBytes(pt),A=Be(t),C=t.readBytes(ns);return Gh(w,A,C)}case V.TenureChange:const g=N(t.readBytes(20)),m=N(t.readBytes(20)),E=N(t.readBytes(20)),v=N(t.readBytes(32)),B=t.readUInt32BE(),_=t.readUInt8Enum(os,w=>{throw new Error(`Cannot recognize TenureChangeCause: ${w}`)}),T=N(t.readBytes(20));return Yh(g,m,E,v,B,_,T)}}function cs(e){const t=he(e,Z)?e:new Z(e);return is(N(t.readBytes(br)))}function ng(e){const t=he(e,Z)?e:new Z(e),n=t.readUInt8Enum(xe,r=>{throw new we(`Could not read ${r} as AuthFieldType`)});switch(n){case xe.PublicKeyCompressed:return Ot(W.Compressed,ls(t));case xe.PublicKeyUncompressed:return Ot(W.Uncompressed,Wt(jg(ls(t).data)));case xe.SignatureCompressed:return Ot(W.Compressed,cs(t));case xe.SignatureUncompressed:return Ot(W.Uncompressed,cs(t));default:throw new Error(`Unknown auth field type: ${JSON.stringify(n)}`)}}function Fs(e){return R(e.data)}function rg(e){const t=[];switch(e.contents.type){case x.PublicKey:t.push(e.pubKeyEncoding===W.Compressed?xe.PublicKeyCompressed:xe.PublicKeyUncompressed),t.push(R(Ug(e.contents.data)));break;case x.MessageSignature:t.push(e.pubKeyEncoding===W.Compressed?xe.SignatureCompressed:xe.SignatureUncompressed),t.push(Fs(e.contents));break}return J(t)}function us(e){return e.data.slice()}function ls(e){const t=he(e,Z)?e:new Z(e),n=t.readUInt8(),r=n===4?bh:wh;return Wt(J([n,t.readBytes(r)]))}function Rs(e,t,n,r){if(r.length===0)throw Error("Invalid number of public keys");if((t===H.P2PKH||t===H.P2WPKH)&&(r.length!==1||n!==1))throw Error("Invalid number of public keys or signatures");if((t===H.P2WPKH||t===H.P2WSH||t===H.P2WSHNonSequential)&&!r.map(s=>s.data).every(Xt))throw Error("Public keys must be compressed for segwit");switch(t){case H.P2PKH:return on(e,nc(r[0].data));case H.P2WPKH:return on(e,Lg(r[0].data));case H.P2SH:case H.P2SHNonSequential:return on(e,Cg(n,r.map(us)));case H.P2WSH:case H.P2WSHNonSequential:return on(e,Tg(n,r.map(us)))}}function on(e,t){return{type:x.Address,version:e,hash160:t}}function Sr(e){return js.c32address(e.version,e.hash160)}function pi(e){const[t,n,r]=e.split(/\.|::/);return qh(t,n,r)}function zr(e){if(e.includes(".")){const[t,n]=e.split(".");return Zh(t,n)}else return Qh(e)}function sg(e){if(e.includes(".")){const[t,n]=e.split(".");return ag(t,n)}else return og(e)}function og(e){const t=ct(e);return{type:j.PrincipalStandard,value:Sr(t)}}function ig(e){return{type:j.PrincipalStandard,value:Sr(e)}}function ag(e,t){const n=ct(e),r=Te(t);return Ja(n,r)}function Ja(e,t){if(vt(t.content).byteLength>=128)throw new Error("Contract name must be less than 128 bytes");return{type:j.PrincipalContract,value:`${Sr(e)}.${t.content}`}}function cg(e){return{type:j.ResponseErr,value:e}}function ug(e){return{type:j.ResponseOk,value:e}}const fs=e=>({type:j.StringASCII,value:e}),lg=e=>({type:j.StringUTF8,value:e});function fg(e){for(const t in e)if(!Ng(t))throw new Error(`"${t}" is not a valid Clarity name`);return{type:j.Tuple,value:e}}function Be(e){let t;if(typeof e=="string"){const r=e.slice(0,2).toLowerCase()==="0x";t=new Z(R(r?e.slice(2):e))}else e instanceof Uint8Array?t=new Z(e):t=e;switch(t.readUInt8Enum(ne,r=>{throw new we(`Cannot recognize Clarity Type: ${r}`)})){case ne.int:return $h(Zr(t.readBytes(16)));case ne.uint:return kh(t.readBytes(16));case ne.buffer:const r=t.readUInt32BE();return Uh(t.readBytes(r));case ne.true:return Ph();case ne.false:return Oh();case ne.address:const s=Kt(t);return ig(s);case ne.contract:const o=Kt(t),i=Ae(t);return Ja(o,i);case ne.ok:return ug(Be(t));case ne.err:return cg(Be(t));case ne.none:return Va();case ne.some:return Ga(Be(t));case ne.list:const a=t.readUInt32BE(),u=[];for(let E=0;E<a;E++)u.push(Be(t));return Hh(u);case ne.tuple:const l=t.readUInt32BE(),f={};for(let E=0;E<l;E++){const v=Ae(t).content;if(v===void 0)throw new we('"content" is undefined');f[v]=Be(t)}return fg(f);case ne.ascii:const d=t.readUInt32BE(),y=ml(t.readBytes(d));return fs(y);case ne.utf8:const g=t.readUInt32BE(),m=Sn(t.readBytes(g));return lg(m);default:throw new we("Unable to deserialize Clarity Value from Uint8Array. Could not find valid Clarity Type.")}}function ke(e,t){return J([ks(e),t])}function dg(e){return new Uint8Array([ks(e.type)])}function hg(e){return e.type===j.OptionalNone?new Uint8Array([ks(e.type)]):ke(e.type,_e(e.value))}function gg(e){const t=new Uint8Array(4);return yt(t,Math.ceil(e.value.length/2),0),ke(e.type,Oe(t,R(e.value)))}function pg(e){const t=xs(gl(BigInt(e.value),BigInt(yh)),Ha);return ke(e.type,t)}function yg(e){const t=xs(BigInt(e.value),Ha);return ke(e.type,t)}function wg(e){return ke(e.type,An(ct(e.value)))}function bg(e){const[t,n]=Dg(e.value);return ke(e.type,Oe(An(ct(t)),Vt(Te(n))))}function mg(e){return ke(e.type,_e(e.value))}function Sg(e){const t=[],n=new Uint8Array(4);yt(n,e.value.length,0),t.push(n);for(const r of e.value){const s=_e(r);t.push(s)}return ke(e.type,J(t))}function Eg(e){const t=[],n=new Uint8Array(4);yt(n,Object.keys(e.value).length,0),t.push(n);const r=Object.keys(e.value).sort((s,o)=>s.localeCompare(o));for(const s of r){const o=Te(s);t.push(Vt(o));const i=_e(e.value[s]);t.push(i)}return ke(e.type,J(t))}function ec(e,t){const n=[],r=t=="ascii"?bl(e.value):vt(e.value),s=new Uint8Array(4);return yt(s,r.length,0),n.push(s),n.push(r),ke(e.type,J(n))}function Ag(e){return ec(e,"ascii")}function Ig(e){return ec(e,"utf8")}function xg(e){return N(_e(e))}function _e(e){switch(e.type){case j.BoolTrue:case j.BoolFalse:return dg(e);case j.OptionalNone:case j.OptionalSome:return hg(e);case j.Buffer:return gg(e);case j.UInt:return yg(e);case j.Int:return pg(e);case j.PrincipalStandard:return wg(e);case j.PrincipalContract:return bg(e);case j.ResponseOk:case j.ResponseErr:return mg(e);case j.List:return Sg(e);case j.Tuple:return Eg(e);case j.StringASCII:return Ag(e);case j.StringUTF8:return Ig(e);default:throw new Pt("Unable to serialize. Invalid Clarity Value.")}}const vg=e=>e.length%2?`0${e}`:e,Mg=(e,t)=>e.padEnd(t,"0"),tc=(e,t)=>e?vt(e).length>t:!1;function ds(e){return _h(e)}const fn=e=>wa(Ue(e)),Ks=e=>N(pd(e)),nc=e=>N(fn(e)),Lg=e=>{const t=fn(e),n=Oe(new Uint8Array([0]),new Uint8Array([t.length]),t),r=fn(n);return N(r)},Cg=(e,t)=>{if(e>15||t.length>15)throw Error("P2SH multisig address can only contain up to 15 public keys");const n=[];n.push(80+e),t.forEach(o=>{n.push(o.length),n.push(o)}),n.push(80+t.length),n.push(174);const r=J(n),s=fn(r);return N(s)},Tg=(e,t)=>{if(e>15||t.length>15)throw Error("P2WSH multisig address can only contain up to 15 public keys");const n=[];n.push(80+e),t.forEach(u=>{n.push(u.length),n.push(u)}),n.push(80+t.length),n.push(174);const r=J(n),s=Ue(r),o=[];o.push(0),o.push(s.length),o.push(s);const i=J(o),a=fn(i);return N(a)};function Ng(e){return/^[a-zA-Z]([a-zA-Z0-9]|[-_!?+<>=/*])*$|^[-+=/*]$|^[<>]=?$/.test(e)&&e.length<128}function Dg(e){const[t,n]=e.split(".");if(!t||!n)throw new Error(`Invalid contract identifier: ${e}`);return[t,n]}ee.hmacSha256Sync=(e,...t)=>{const n=qt.create(Ue,e);return t.forEach(r=>n.update(r)),n.digest()};function Bg(e,t="mainnet"){t=Us(t),e=typeof e=="string"?R(e):e;const n=Dh(H.P2PKH,t),r=on(n,nc(e));return Sr(r)}function Wt(e){return e=typeof e=="string"?R(e):e,{type:x.PublicKey,data:e}}function _g(e,t,n=W.Compressed){const r=Ml(t),s=new Ce(Oo(r.r),Oo(r.s)),o=U.fromSignature(e,s,r.recoveryId),i=n===W.Compressed;return o.toHex(i)}function Pg(e){return typeof e=="string"?e:N(e)}const Vs=Pg;function rc(e){return(typeof e=="string"?e.length/2:e.byteLength)===vl}function Xt(e){return!Vs(e).startsWith("04")}function Og(e){e=vs(e);const t=rc(e);return N(ur(e.slice(0,32),t))}function Ug(e){return U.fromHex(Vs(e)).toHex(!0)}function jg(e){return U.fromHex(Vs(e)).toHex(!1)}function $g(e,t){e=vs(e);const[n,r]=Bs(t,e.slice(0,32),{canonical:!0,recovered:!0});if(r==null)throw new Error("No signature recoveryId received");return mn(r,1)+Ce.fromHex(n).toCompactHex()}function Gs(){return{type:x.MessageSignature,data:N(new Uint8Array(br))}}function sc(e,t,n,r){const s=Rs(0,e,1,[Wt(t)]).hash160,o=Xt(t)?W.Compressed:W.Uncompressed;return{hashMode:e,signer:s,nonce:le(n),fee:le(r),keyEncoding:o,signature:Gs()}}function dn(e){return"signature"in e}function yi(e){return e===H.P2SH||e===H.P2WSH}function kg(e){return e===H.P2SHNonSequential||e===H.P2WSHNonSequential}function wi(e){const t=ds(e);return t.nonce=0,t.fee=0,dn(t)?t.signature=Gs():t.fields=[],{...t,nonce:BigInt(0),fee:BigInt(0)}}function Hg(e){const t=[e.hashMode,R(e.signer),it(e.nonce,8),it(e.fee,8),e.keyEncoding,Fs(e.signature)];return J(t)}function zg(e){const t=[e.hashMode,R(e.signer),it(e.nonce,8),it(e.fee,8)],n=Hs(e.fields);t.push(zs(n));const r=new Uint8Array(2);return Cl(r,e.signaturesRequired,0),t.push(r),J(t)}function Fg(e,t){const n=N(t.readBytes(20)),r=BigInt(`0x${N(t.readBytes(8))}`),s=BigInt(`0x${N(t.readBytes(8))}`),o=t.readUInt8Enum(W,a=>{throw new we(`Could not parse ${a} as PubKeyEncoding`)});if(e===H.P2WPKH&&o!=W.Compressed)throw new we("Failed to parse singlesig spending condition: incomaptible hash mode and key encoding");const i=cs(t);return{hashMode:e,signer:n,nonce:r,fee:s,keyEncoding:o,signature:i}}function Rg(e,t){const n=N(t.readBytes(20)),r=BigInt("0x"+N(t.readBytes(8))),s=BigInt("0x"+N(t.readBytes(8))),o=Qa(t,x.TransactionAuthField).values;let i=!1,a=0;for(const l of o)switch(l.contents.type){case x.PublicKey:Xt(l.contents.data)||(i=!0);break;case x.MessageSignature:if(l.pubKeyEncoding===W.Uncompressed&&(i=!0),a+=1,a===65536)throw new gt("Failed to parse multisig spending condition: too many signatures");break}const u=t.readUInt16BE();if(i&&(e===H.P2WSH||e===H.P2WSHNonSequential))throw new gt("Uncompressed keys are not allowed in this hash mode");return{hashMode:e,signer:n,nonce:r,fee:s,fields:o,signaturesRequired:u}}function Fr(e){return dn(e)?Hg(e):zg(e)}function Rr(e){const t=e.readUInt8Enum(H,n=>{throw new we(`Could not parse ${n} as AddressHashMode`)});return t===H.P2PKH||t===H.P2WPKH?Fg(t,e):Rg(t,e)}function oc(e,t,n,r){const o=e+N(new Uint8Array([t]))+N(it(n,8))+N(it(r,8));if(R(o).byteLength!==49)throw Error("Invalid signature hash length");return Ks(R(o))}function ic(e,t,n){const r=33+br,s=Xt(t.data)?W.Compressed:W.Uncompressed,o=e+vg(s.toString(16))+n,i=R(o);if(i.byteLength>r)throw Error("Invalid signature hash length");return Ks(i)}function Kg(e,t,n,r,s){const o=oc(e,t,n,r),i=$g(s,o),a=Wt(Og(s)),u=ic(o,a,i);return{nextSig:i,nextSigHash:u}}function ac(e,t,n,r,s,o){const i=oc(e,t,n,r),a=Wt(_g(i,o,s)),u=ic(i,a,o);return{pubKey:a,nextSigHash:u}}function Vg(){const e=sc(H.P2PKH,"",0,0);return e.signer=zh().hash160,e.keyEncoding=W.Compressed,e.signature=Gs(),e}function bi(e,t,n){return dn(e)?Gg(e,t,n):Yg(e,t,n)}function Gg(e,t,n){const{pubKey:r,nextSigHash:s}=ac(t,n,e.fee,e.nonce,e.keyEncoding,e.signature.data),o=Rs(0,e.hashMode,1,[r]).hash160;if(o!==e.signer)throw new gt(`Signer hash does not equal hash of public key(s): ${o} != ${e.signer}`);return s}function Yg(e,t,n){const r=[];let s=t,o=!1,i=0;for(const u of e.fields)switch(u.contents.type){case x.PublicKey:Xt(u.contents.data)||(o=!0),r.push(u.contents);break;case x.MessageSignature:u.pubKeyEncoding===W.Uncompressed&&(o=!0);const{pubKey:l,nextSigHash:f}=ac(s,n,e.fee,e.nonce,u.pubKeyEncoding,u.contents.data);if(yi(e.hashMode)&&(s=f),r.push(l),i+=1,i===65536)throw new gt("Too many signatures");break}if(yi(e.hashMode)&&i!==e.signaturesRequired||kg(e.hashMode)&&i<e.signaturesRequired)throw new gt("Incorrect number of signatures");if(o&&(e.hashMode===H.P2WSH||e.hashMode===H.P2WSHNonSequential))throw new gt("Uncompressed keys are not allowed in this hash mode");const a=Rs(0,e.hashMode,e.signaturesRequired,r).hash160;if(a!==e.signer)throw new gt(`Signer hash does not equal hash of public key(s): ${a} != ${e.signer}`);return s}function cc(e){return{authType:X.Standard,spendingCondition:e}}function uc(e,t){return{authType:X.Sponsored,spendingCondition:e,sponsorSpendingCondition:t||sc(H.P2PKH,"0".repeat(66),0,0)}}function mi(e){if(e.spendingCondition)switch(e.authType){case X.Standard:return cc(wi(e.spendingCondition));case X.Sponsored:return uc(wi(e.spendingCondition),Vg());default:throw new nr("Unexpected authorization type for signing")}throw new Error("Authorization missing SpendingCondition")}function qg(e,t){switch(e.authType){case X.Standard:return bi(e.spendingCondition,t,X.Standard);case X.Sponsored:return bi(e.spendingCondition,t,X.Standard);default:throw new nr("Invalid origin auth type")}}function Zg(e,t){switch(e.authType){case X.Standard:const n={...e.spendingCondition,fee:le(t)};return{...e,spendingCondition:n};case X.Sponsored:const r={...e.sponsorSpendingCondition,fee:le(t)};return{...e,sponsorSpendingCondition:r}}}function Qg(e,t){const n={...e.spendingCondition,nonce:le(t)};return{...e,spendingCondition:n}}function Wg(e,t){const n={...e.sponsorSpendingCondition,nonce:le(t)};return{...e,sponsorSpendingCondition:n}}function Xg(e,t){const n={...t,nonce:le(t.nonce),fee:le(t.fee)};return{...e,sponsorSpendingCondition:n}}function Jg(e){const t=[];switch(t.push(e.authType),e.authType){case X.Standard:t.push(Fr(e.spendingCondition));break;case X.Sponsored:t.push(Fr(e.spendingCondition)),t.push(Fr(e.sponsorSpendingCondition));break}return J(t)}function ep(e){const t=e.readUInt8Enum(X,r=>{throw new we(`Could not parse ${r} as AuthType`)});let n;switch(t){case X.Standard:return n=Rr(e),cc(n);case X.Sponsored:n=Rr(e);const r=Rr(e);return uc(n,r)}}class tp{constructor({auth:t,payload:n,postConditions:r=Hs([]),postConditionMode:s=er.Deny,transactionVersion:o,chainId:i,network:a="mainnet"}){a=Us(a),this.transactionVersion=o??a.transactionVersion,this.chainId=i??a.chainId,this.auth=t,"amount"in n?this.payload={...n,amount:le(n.amount)}:this.payload=n,this.postConditionMode=s,this.postConditions=r,this.anchorMode=pe.Any}signBegin(){const t=ds(this);return t.auth=mi(t.auth),t.txid()}verifyBegin(){const t=ds(this);return t.auth=mi(t.auth),t.txid()}verifyOrigin(){return qg(this.auth,this.verifyBegin())}signNextOrigin(t,n){if(this.auth.spendingCondition===void 0)throw new Error('"auth.spendingCondition" is undefined');if(this.auth.authType===void 0)throw new Error('"auth.authType" is undefined');return this.signAndAppend(this.auth.spendingCondition,t,X.Standard,n)}signNextSponsor(t,n){if(this.auth.authType===X.Sponsored)return this.signAndAppend(this.auth.sponsorSpendingCondition,t,X.Sponsored,n);throw new Error('"auth.sponsorSpendingCondition" is undefined')}appendPubkey(t){const n=typeof t=="object"&&"type"in t?t:Wt(t),r=this.auth.spendingCondition;if(r&&!dn(r)){const s=Xt(n.data);r.fields.push(Ot(s?W.Compressed:W.Uncompressed,n))}else throw new Error("Can't append public key to a singlesig condition")}signAndAppend(t,n,r,s){const{nextSig:o,nextSigHash:i}=Kg(n,r,t.fee,t.nonce,s);if(dn(t))t.signature=is(o);else{const a=rc(s);t.fields.push(Ot(a?W.Compressed:W.Uncompressed,is(o)))}return i}txid(){const t=this.serializeBytes();return Ks(t)}setSponsor(t){if(this.auth.authType!=X.Sponsored)throw new nr("Cannot sponsor sign a non-sponsored transaction");this.auth=Xg(this.auth,t)}setFee(t){this.auth=Zg(this.auth,t)}setNonce(t){this.auth=Qg(this.auth,t)}setSponsorNonce(t){if(this.auth.authType!=X.Sponsored)throw new nr("Cannot sponsor sign a non-sponsored transaction");this.auth=Wg(this.auth,t)}serialize(){return N(this.serializeBytes())}serializeBytes(){if(this.transactionVersion===void 0)throw new Pt('"transactionVersion" is undefined');if(this.chainId===void 0)throw new Pt('"chainId" is undefined');if(this.auth===void 0)throw new Pt('"auth" is undefined');if(this.payload===void 0)throw new Pt('"payload" is undefined');const t=[];t.push(this.transactionVersion);const n=new Uint8Array(4);return yt(n,this.chainId,0),t.push(n),t.push(Jg(this.auth)),t.push(this.anchorMode),t.push(this.postConditionMode),t.push(zs(this.postConditions)),t.push(Xa(this.payload)),J(t)}}function np(e){const t=he(e,Z)?e:new Z(e),n=t.readUInt8Enum(Me,f=>{throw new Error(`Could not parse ${f} as TransactionVersion`)}),r=t.readUInt32BE(),s=ep(t),o=t.readUInt8Enum(pe,f=>{throw new Error(`Could not parse ${f} as AnchorMode`)}),i=t.readUInt8Enum(er,f=>{throw new Error(`Could not parse ${f} as PostConditionMode`)}),a=Qa(t,x.PostCondition),u=tg(t),l=new tp({transactionVersion:n,chainId:r,auth:s,payload:u,postConditions:a,postConditionMode:i});return l.anchorMode=o,l}var hs;(function(e){e[e.eq=1]="eq",e[e.gt=2]="gt",e[e.lt=4]="lt",e[e.gte=3]="gte",e[e.lte=5]="lte",e[e.sent=16]="sent",e[e["not-sent"]=17]="not-sent"})(hs||(hs={}));function rp(e){switch(e.type){case"stx-postcondition":return{type:x.PostCondition,conditionType:oe.STX,principal:e.address==="origin"?{type:x.Principal,prefix:me.Origin}:zr(e.address),conditionCode:Kr(e.condition),amount:BigInt(e.amount)};case"ft-postcondition":return{type:x.PostCondition,conditionType:oe.Fungible,principal:e.address==="origin"?{type:x.Principal,prefix:me.Origin}:zr(e.address),conditionCode:Kr(e.condition),amount:BigInt(e.amount),asset:pi(e.asset)};case"nft-postcondition":return{type:x.PostCondition,conditionType:oe.NonFungible,principal:e.address==="origin"?{type:x.Principal,prefix:me.Origin}:zr(e.address),conditionCode:Kr(e.condition),asset:pi(e.asset),assetName:e.assetId};default:throw new Error("Invalid post condition type")}}function Kr(e){return hs[e]}function lc(e){const t=rp(e);return Jh(t)}function sp(e,t){const n=ae.decodeToken(e),r=n.payload;if(typeof r=="string")throw new Error("Unexpected token payload type of string");if(r.hasOwnProperty("subject")&&r.subject){if(!r.subject.hasOwnProperty("publicKey"))throw new Error("Token doesn't have a subject public key")}else throw new Error("Token doesn't have a subject");if(r.hasOwnProperty("issuer")&&r.issuer){if(!r.issuer.hasOwnProperty("publicKey"))throw new Error("Token doesn't have an issuer public key")}else throw new Error("Token doesn't have an issuer");if(!r.hasOwnProperty("claim"))throw new Error("Token doesn't have a claim");const s=r.issuer.publicKey,o=Bg(s);if(t!==s){if(t!==o)throw new Error("Token issuer public key does not match the verifying value")}const i=new ae.TokenVerifier(n.header.alg,s);if(!i)throw new Error("Invalid token verifier");if(!i.verify(e))throw new Error("Token verification failed");return n}function op(e,t=null){let n;t?n=sp(e,t):n=ae.decodeToken(e);let r={};if(n.hasOwnProperty("payload")){const s=n.payload;if(typeof s=="string")throw new Error("Unexpected token payload type of string");s.hasOwnProperty("claim")&&(r=s.claim)}return r}const Si="_blockstackDidCheckEchoReply",ip="echoReply",ap="authContinuation";function cp(e){return e?(/^[?#]/.test(e)?e.slice(1):e).split("&").reduce((n,r)=>{const[s,o]=r.split("=");return n[s]=o?decodeURIComponent(o.replace(/\+/g," ")):"",n},{}):{}}function up(){let e;if(typeof self<"u")e=self;else if(typeof window<"u")e=window;else return!1;if(!e.location||!e.localStorage)return!1;const t=e[Si];if(typeof t=="boolean")return t;const n=cp(e.location.search),r=n[ip];if(r){e[Si]=!0;const s=`echo-reply-${r}`;return e.localStorage.setItem(s,"success"),e.setTimeout(()=>{const o=n[ap];e.location.href=o},10),!0}return!1}class hn{constructor(t){let n=!0;if(typeof window>"u"&&typeof self>"u"&&(n=!1),t&&t.appConfig)this.appConfig=t.appConfig;else if(n)this.appConfig=new cr;else throw new al("You need to specify options.appConfig");t&&t.sessionStore?this.store=t.sessionStore:n?t?this.store=new ni(t.sessionOptions):this.store=new ni:t?this.store=new ti(t.sessionOptions):this.store=new ti}makeAuthRequestToken(t,n,r,s,o,i=ul().getTime(),a={}){const u=this.appConfig;if(!u)throw new Yr("Missing AppConfig");return t=t||this.generateAndStoreTransitKey(),n=n||u.redirectURI(),r=r||u.manifestURI(),s=s||u.scopes,o=o||u.appDomain,ih(t,n,r,s,o,i,a)}generateAndStoreTransitKey(){const t=this.store.getSessionData(),n=oh();return t.transitKey=n,this.store.setSessionData(t),n}getAuthResponseToken(){var r;const t=(r=Is("location",{throwIfUnavailable:!0,usageDesc:"getAuthResponseToken"}))==null?void 0:r.search;return new URLSearchParams(t).get("authResponse")??""}isSignInPending(){try{if(up())return _t.info("protocolEchoReply detected from isSignInPending call, the page is about to redirect."),!0}catch(t){_t.error(`Error checking for protocol echo reply isSignInPending: ${t}`)}return!!this.getAuthResponseToken()}isUserSignedIn(){return!!this.store.getSessionData().userData}async handlePendingSignIn(t=this.getAuthResponseToken(),n=Ol()){const r=this.store.getSessionData();if(r.userData)throw new Nn("Existing user session found.");const s=this.store.getSessionData().transitKey;this.appConfig&&this.appConfig.coreNode;const o=ae.decodeToken(t).payload;if(typeof o=="string")throw new Error("Unexpected token payload type of string");if(!await fh(t))throw new Nn("Invalid authentication response.");let a=o.private_key,u=o.core_token;if(Or(o.version,"1.1.0"))if(s!==void 0&&s!=null){if(o.private_key!==void 0&&o.private_key!==null)try{a=await Jo(s,o.private_key)}catch{if(_t.warn("Failed decryption of appPrivateKey, will try to use as given"),!ee.isValidPrivateKey(o.private_key))throw new Nn("Failed decrypting appPrivateKey. Usually means that the transit key has changed during login.")}if(u!=null)try{u=await Jo(s,u)}catch{_t.info("Failed decryption of coreSessionToken, will try to use as given")}}else throw new Nn("Authenticating with protocol > 1.1.0 requires transit key, and none found.");let l=xl,f;Or(o.version,"1.2.0")&&o.hubUrl!==null&&o.hubUrl!==void 0&&(l=o.hubUrl),Or(o.version,"1.3.0")&&o.associationToken!==null&&o.associationToken!==void 0&&(f=o.associationToken);const d={profile:o.profile,email:o.email,decentralizedID:o.iss,identityAddress:Ua(o.iss),appPrivateKey:a,coreSessionToken:u,authResponseToken:t,hubUrl:l,appPrivateKeyFromWalletSalt:o.appPrivateKeyFromWalletSalt,coreNode:o.blockstackAPIUrl,gaiaAssociationToken:f},y=o.profile_url;if(!d.profile&&y){const g=await n(y);if(!g.ok)d.profile=Object.assign({},sl);else{const m=await g.text(),E=JSON.parse(m);d.profile=op(E[0].token)}}else d.profile=o.profile;return r.userData=d,this.store.setSessionData(r),d}loadUserData(){const t=this.store.getSessionData().userData;if(!t)throw new Yr("No user data found. Did the user sign in?");return t}encryptContent(t,n){const r=Object.assign({},n);return r.privateKey||(r.privateKey=this.loadUserData().appPrivateKey),Cd(t,r)}decryptContent(t,n){const r=Object.assign({},n);return r.privateKey||(r.privateKey=this.loadUserData().appPrivateKey),Td(t,r)}signUserOut(t){this.store.deleteSessionData(),t&&typeof location<"u"&&location.href&&(location.href=t)}}hn.prototype.makeAuthRequest=hn.prototype.makeAuthRequestToken;const lp=()=>typeof window>"u"?[]:window.webbtc_stx_providers?window.webbtc_stx_providers:[],fp=(e=[])=>{if(typeof window>"u")return[];const t=lp(),n=e.filter(r=>t.find(o=>o.id===r.id)?!1:!!fc(r.id));return t.concat(n)},fc=e=>e==null?void 0:e.split(".").reduce((t,n)=>t==null?void 0:t[n],window),dc="STX_PROVIDER",hc=()=>typeof window>"u"?null:window.localStorage.getItem(dc),u0=e=>{typeof window<"u"&&window.localStorage.setItem(dc,e)};(function(){(function(e){(function(t){var n=typeof globalThis<"u"&&globalThis||typeof e<"u"&&e||typeof ue<"u"&&ue||{},r={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function s(p){return p&&DataView.prototype.isPrototypeOf(p)}if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(p){return p&&o.indexOf(Object.prototype.toString.call(p))>-1};function a(p){if(typeof p!="string"&&(p=String(p)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(p)||p==="")throw new TypeError('Invalid character in header field name: "'+p+'"');return p.toLowerCase()}function u(p){return typeof p!="string"&&(p=String(p)),p}function l(p){var S={next:function(){var D=p.shift();return{done:D===void 0,value:D}}};return r.iterable&&(S[Symbol.iterator]=function(){return S}),S}function f(p){this.map={},p instanceof f?p.forEach(function(S,D){this.append(D,S)},this):Array.isArray(p)?p.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):p&&Object.getOwnPropertyNames(p).forEach(function(S){this.append(S,p[S])},this)}f.prototype.append=function(p,S){p=a(p),S=u(S);var D=this.map[p];this.map[p]=D?D+", "+S:S},f.prototype.delete=function(p){delete this.map[a(p)]},f.prototype.get=function(p){return p=a(p),this.has(p)?this.map[p]:null},f.prototype.has=function(p){return this.map.hasOwnProperty(a(p))},f.prototype.set=function(p,S){this.map[a(p)]=u(S)},f.prototype.forEach=function(p,S){for(var D in this.map)this.map.hasOwnProperty(D)&&p.call(S,this.map[D],D,this)},f.prototype.keys=function(){var p=[];return this.forEach(function(S,D){p.push(D)}),l(p)},f.prototype.values=function(){var p=[];return this.forEach(function(S){p.push(S)}),l(p)},f.prototype.entries=function(){var p=[];return this.forEach(function(S,D){p.push([D,S])}),l(p)},r.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);function d(p){if(!p._noBody){if(p.bodyUsed)return Promise.reject(new TypeError("Already read"));p.bodyUsed=!0}}function y(p){return new Promise(function(S,D){p.onload=function(){S(p.result)},p.onerror=function(){D(p.error)}})}function g(p){var S=new FileReader,D=y(S);return S.readAsArrayBuffer(p),D}function m(p){var S=new FileReader,D=y(S),$=/charset=([A-Za-z0-9_-]+)/.exec(p.type),Y=$?$[1]:"utf-8";return S.readAsText(p,Y),D}function E(p){for(var S=new Uint8Array(p),D=new Array(S.length),$=0;$<S.length;$++)D[$]=String.fromCharCode(S[$]);return D.join("")}function v(p){if(p.slice)return p.slice(0);var S=new Uint8Array(p.byteLength);return S.set(new Uint8Array(p)),S.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(p){this.bodyUsed=this.bodyUsed,this._bodyInit=p,p?typeof p=="string"?this._bodyText=p:r.blob&&Blob.prototype.isPrototypeOf(p)?this._bodyBlob=p:r.formData&&FormData.prototype.isPrototypeOf(p)?this._bodyFormData=p:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)?this._bodyText=p.toString():r.arrayBuffer&&r.blob&&s(p)?(this._bodyArrayBuffer=v(p.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(p)||i(p))?this._bodyArrayBuffer=v(p):this._bodyText=p=Object.prototype.toString.call(p):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof p=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(p)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var p=d(this);if(p)return p;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var p=d(this);return p||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(r.blob)return this.blob().then(g);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var p=d(this);if(p)return p;if(this._bodyBlob)return m(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}var _=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(p){var S=p.toUpperCase();return _.indexOf(S)>-1?S:p}function w(p,S){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var D=S.body;if(p instanceof w){if(p.bodyUsed)throw new TypeError("Already read");this.url=p.url,this.credentials=p.credentials,S.headers||(this.headers=new f(p.headers)),this.method=p.method,this.mode=p.mode,this.signal=p.signal,!D&&p._bodyInit!=null&&(D=p._bodyInit,p.bodyUsed=!0)}else this.url=String(p);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new f(S.headers)),this.method=T(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||function(){if("AbortController"in n){var P=new AbortController;return P.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&D)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(D),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var $=/([?&])_=[^&]*/;if($.test(this.url))this.url=this.url.replace($,"$1_="+new Date().getTime());else{var Y=/\?/;this.url+=(Y.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function A(p){var S=new FormData;return p.trim().split("&").forEach(function(D){if(D){var $=D.split("="),Y=$.shift().replace(/\+/g," "),P=$.join("=").replace(/\+/g," ");S.append(decodeURIComponent(Y),decodeURIComponent(P))}}),S}function C(p){var S=new f,D=p.replace(/\r?\n[\t ]+/g," ");return D.split("\r").map(function($){return $.indexOf(`
`)===0?$.substr(1,$.length):$}).forEach(function($){var Y=$.split(":"),P=Y.shift().trim();if(P){var Lt=Y.join(":").trim();try{S.append(P,Lt)}catch(tn){console.warn("Response "+tn.message)}}}),S}B.call(w.prototype);function L(p,S){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new f(S.headers),this.url=S.url||"",this._initBody(p)}B.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},L.error=function(){var p=new L(null,{status:200,statusText:""});return p.ok=!1,p.status=0,p.type="error",p};var F=[301,302,303,307,308];L.redirect=function(p,S){if(F.indexOf(S)===-1)throw new RangeError("Invalid status code");return new L(null,{status:S,headers:{location:p}})},t.DOMException=n.DOMException;try{new t.DOMException}catch{t.DOMException=function(S,D){this.message=S,this.name=D;var $=Error(S);this.stack=$.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function G(p,S){return new Promise(function(D,$){var Y=new w(p,S);if(Y.signal&&Y.signal.aborted)return $(new t.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function Lt(){P.abort()}P.onload=function(){var te={statusText:P.statusText,headers:C(P.getAllResponseHeaders()||"")};Y.url.indexOf("file://")===0&&(P.status<200||P.status>599)?te.status=200:te.status=P.status,te.url="responseURL"in P?P.responseURL:te.headers.get("X-Request-URL");var k="response"in P?P.response:P.responseText;setTimeout(function(){D(new L(k,te))},0)},P.onerror=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){$(new TypeError("Network request timed out"))},0)},P.onabort=function(){setTimeout(function(){$(new t.DOMException("Aborted","AbortError"))},0)};function tn(te){try{return te===""&&n.location.href?n.location.href:te}catch{return te}}if(P.open(Y.method,tn(Y.url),!0),Y.credentials==="include"?P.withCredentials=!0:Y.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&(r.blob?P.responseType="blob":r.arrayBuffer&&(P.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof f||n.Headers&&S.headers instanceof n.Headers)){var In=[];Object.getOwnPropertyNames(S.headers).forEach(function(te){In.push(a(te)),P.setRequestHeader(te,u(S.headers[te]))}),Y.headers.forEach(function(te,k){In.indexOf(k)===-1&&P.setRequestHeader(k,te)})}else Y.headers.forEach(function(te,k){P.setRequestHeader(k,te)});Y.signal&&(Y.signal.addEventListener("abort",Lt),P.onreadystatechange=function(){P.readyState===4&&Y.signal.removeEventListener("abort",Lt)}),P.send(typeof Y._bodyInit>"u"?null:Y._bodyInit)})}return G.polyfill=!0,n.fetch||(n.fetch=G,n.Headers=f,n.Request=w,n.Response=L),t.Headers=f,t.Request=w,t.Response=L,t.fetch=G,Object.defineProperty(t,"__esModule",{value:!0}),t})({})})(typeof self<"u"?self:ue)})();const dp={referrerPolicy:"origin",headers:{"x-hiro-product":"stacksjs"}};async function hp(e,t){const n={};return Object.assign(n,dp,t),await fetch(e,n)}function gp(e){let t=hp,n=[];return e.length>0&&typeof e[0]=="function"&&(t=e.shift()),e.length>0&&(n=e),{fetchLib:t,middlewares:n}}function pp(...e){const{fetchLib:t,middlewares:n}=gp(e);return async(s,o)=>{let i={url:s,init:o??{}};for(const u of n)typeof u.pre=="function"&&(i=await Promise.resolve(u.pre({fetch:t,...i}))??i);let a=await t(i.url,i.init);for(const u of n)typeof u.post=="function"&&(a=await Promise.resolve(u.post({fetch:t,url:i.url,init:i.init,response:(a==null?void 0:a.clone())??a}))??a);return a}}var Gt;(function(e){e[e.Testnet=2147483648]="Testnet",e[e.Mainnet=1]="Mainnet"})(Gt||(Gt={}));var At;(function(e){e[e.Mainnet=0]="Mainnet",e[e.Testnet=128]="Testnet"})(At||(At={}));var Ei;(function(e){e[e.Mainnet=385875968]="Mainnet",e[e.Testnet=4278190080]="Testnet"})(Ei||(Ei={}));const yp="https://api.mainnet.hiro.so",wp="https://api.testnet.hiro.so",bp="http://localhost:3999",mp=["mainnet","testnet","devnet","mocknet"];class It{constructor(t){this.version=At.Mainnet,this.chainId=Gt.Mainnet,this.bnsLookupUrl="https://api.mainnet.hiro.so",this.broadcastEndpoint="/v2/transactions",this.transferFeeEstimateEndpoint="/v2/fees/transfer",this.transactionFeeEstimateEndpoint="/v2/fees/transaction",this.accountEndpoint="/v2/accounts",this.contractAbiEndpoint="/v2/contracts/interface",this.readOnlyFunctionCallEndpoint="/v2/contracts/call-read",this.isMainnet=()=>this.version===At.Mainnet,this.getBroadcastApiUrl=()=>`${this.coreApiUrl}${this.broadcastEndpoint}`,this.getTransferFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transferFeeEstimateEndpoint}`,this.getTransactionFeeEstimateApiUrl=()=>`${this.coreApiUrl}${this.transactionFeeEstimateEndpoint}`,this.getAccountApiUrl=n=>`${this.coreApiUrl}${this.accountEndpoint}/${n}?proof=0`,this.getAccountExtendedBalancesApiUrl=n=>`${this.coreApiUrl}/extended/v1/address/${n}/balances`,this.getAbiApiUrl=(n,r)=>`${this.coreApiUrl}${this.contractAbiEndpoint}/${n}/${r}`,this.getReadOnlyFunctionCallApiUrl=(n,r,s)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}/${n}/${r}/${encodeURIComponent(s)}`,this.getInfoUrl=()=>`${this.coreApiUrl}/v2/info`,this.getBlockTimeInfoUrl=()=>`${this.coreApiUrl}/extended/v1/info/network_block_times`,this.getPoxInfoUrl=()=>`${this.coreApiUrl}/v2/pox`,this.getRewardsUrl=(n,r)=>{let s=`${this.coreApiUrl}/extended/v1/burnchain/rewards/${n}`;return r&&(s=`${s}?limit=${r.limit}&offset=${r.offset}`),s},this.getRewardsTotalUrl=n=>`${this.coreApiUrl}/extended/v1/burnchain/rewards/${n}/total`,this.getRewardHoldersUrl=(n,r)=>{let s=`${this.coreApiUrl}/extended/v1/burnchain/reward_slot_holders/${n}`;return r&&(s=`${s}?limit=${r.limit}&offset=${r.offset}`),s},this.getStackerInfoUrl=(n,r)=>`${this.coreApiUrl}${this.readOnlyFunctionCallEndpoint}
    ${n}/${r}/get-stacker-info`,this.getDataVarUrl=(n,r,s)=>`${this.coreApiUrl}/v2/data_var/${n}/${r}/${s}?proof=0`,this.getMapEntryUrl=(n,r,s)=>`${this.coreApiUrl}/v2/map_entry/${n}/${r}/${s}?proof=0`,this.coreApiUrl=t.url,this.fetchFn=t.fetchFn??pp()}getNameInfo(t){const n=`${this.bnsLookupUrl}/v1/names/${t}`;return this.fetchFn(n).then(r=>{if(r.status===404)throw new Error("Name not found");if(r.status!==200)throw new Error(`Bad response status: ${r.status}`);return r.json()}).then(r=>r.address?Object.assign({},r,{address:r.address}):r)}}It.fromName=e=>{switch(e){case"mainnet":return new gs;case"testnet":return new ps;case"devnet":return new Sp;case"mocknet":return new gc;default:throw new Error(`Invalid network name provided. Must be one of the following: ${mp.join(", ")}`)}};It.fromNameOrNetwork=e=>typeof e!="string"&&"version"in e?e:It.fromName(e);class gs extends It{constructor(t){super({url:(t==null?void 0:t.url)??yp,fetchFn:t==null?void 0:t.fetchFn}),this.version=At.Mainnet,this.chainId=Gt.Mainnet}}class ps extends It{constructor(t){super({url:(t==null?void 0:t.url)??wp,fetchFn:t==null?void 0:t.fetchFn}),this.version=At.Testnet,this.chainId=Gt.Testnet}}class gc extends It{constructor(t){super({url:(t==null?void 0:t.url)??bp,fetchFn:t==null?void 0:t.fetchFn}),this.version=At.Testnet,this.chainId=Gt.Testnet}}const Sp=gc;function Ep(e,t,n){return qs(pc(e),n)}function pc(e,t){let n=e;if(typeof n=="number"){if(!Number.isInteger(n))throw new RangeError("Invalid value. Values of type 'number' must be an integer.");if(n>Number.MAX_SAFE_INTEGER)throw new RangeError(`Invalid value. Values of type 'number' must be less than or equal to ${Number.MAX_SAFE_INTEGER}. For larger values, try using a BigInt instead.`);return BigInt(n)}if(typeof n=="string")if(n.toLowerCase().startsWith("0x")){let r=n.slice(2);r=r.padStart(r.length+r.length%2,"0"),n=gn(r)}else try{return BigInt(n)}catch(r){if(r instanceof SyntaxError)throw new RangeError(`Invalid value. String integer '${n}' is not finite.`)}if(typeof n=="bigint")return n;if(n instanceof Uint8Array)return BigInt(`0x${xp(n)}`);if(n!=null&&typeof n=="object"&&n.constructor.name==="BN")return BigInt(n.toString());throw new TypeError("Invalid value type. Must be a number, bigint, integer-string, hex-string, or Uint8Array.")}function Ys(e,t=8){return(typeof e=="bigint"?e:pc(e)).toString(16).padStart(t*2,"0")}function qs(e,t=16){const n=Ys(e,t);return gn(n)}function Ap(e,t){if(e<-(BigInt(1)<<t-BigInt(1))||(BigInt(1)<<t-BigInt(1))-BigInt(1)<e)throw`Unable to represent integer in width: ${t}`;return e>=BigInt(0)?BigInt(e):e+(BigInt(1)<<t)}const Ip=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function xp(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(const n of e)t+=Ip[n];return t}function gn(e){if(typeof e!="string")throw new TypeError(`hexToBytes: expected string, got ${typeof e}`);e=e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e;const t=e.length%2?`0${e}`:e,n=new Uint8Array(t.length/2);for(let r=0;r<n.length;r++){const s=r*2,o=t.slice(s,s+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}function Zs(e){return new TextEncoder().encode(e)}function vp(e){const t=[];for(let n=0;n<e.length;n++)t.push(e.charCodeAt(n)&255);return new Uint8Array(t)}function Mp(e){return!Number.isInteger(e)||e<0||e>255}function Ai(e){if(e.some(Mp))throw new Error("Some values are invalid bytes.");return new Uint8Array(e)}function Qs(...e){if(!e.every(r=>r instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];const t=e.reduce((r,s)=>r+s.length,0),n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}function Ye(e){return Qs(...e.map(t=>typeof t=="number"?Ai([t]):t instanceof Array?Ai(t):t))}function Er(e,t,n=0){return e[n+3]=t,t>>>=8,e[n+2]=t,t>>>=8,e[n+1]=t,t>>>=8,e[n]=t,e}var ys;(function(e){e[e.Testnet=2147483648]="Testnet",e[e.Mainnet=1]="Mainnet"})(ys||(ys={}));ys.Mainnet;const Lp=128,Cp=128,yc=16;var ws;(function(e){e[e.Address=0]="Address",e[e.Principal=1]="Principal",e[e.LengthPrefixedString=2]="LengthPrefixedString",e[e.MemoString=3]="MemoString",e[e.AssetInfo=4]="AssetInfo",e[e.PostCondition=5]="PostCondition",e[e.PublicKey=6]="PublicKey",e[e.LengthPrefixedList=7]="LengthPrefixedList",e[e.Payload=8]="Payload",e[e.MessageSignature=9]="MessageSignature",e[e.StructuredDataSignature=10]="StructuredDataSignature",e[e.TransactionAuthField=11]="TransactionAuthField"})(ws||(ws={}));var Ii;(function(e){e[e.TokenTransfer=0]="TokenTransfer",e[e.SmartContract=1]="SmartContract",e[e.VersionedSmartContract=6]="VersionedSmartContract",e[e.ContractCall=2]="ContractCall",e[e.PoisonMicroblock=3]="PoisonMicroblock",e[e.Coinbase=4]="Coinbase",e[e.CoinbaseToAltRecipient=5]="CoinbaseToAltRecipient",e[e.TenureChange=7]="TenureChange",e[e.NakamotoCoinbase=8]="NakamotoCoinbase"})(Ii||(Ii={}));var xi;(function(e){e[e.Clarity1=1]="Clarity1",e[e.Clarity2=2]="Clarity2",e[e.Clarity3=3]="Clarity3"})(xi||(xi={}));var Ie;(function(e){e[e.OnChainOnly=1]="OnChainOnly",e[e.OffChainOnly=2]="OffChainOnly",e[e.Any=3]="Any"})(Ie||(Ie={}));const Vr=["onChainOnly","offChainOnly","any"];Vr[0]+"",Ie.OnChainOnly,Vr[1]+"",Ie.OffChainOnly,Vr[2]+"",Ie.Any,Ie.OnChainOnly+"",Ie.OnChainOnly,Ie.OffChainOnly+"",Ie.OffChainOnly,Ie.Any+"",Ie.Any;var bs;(function(e){e[e.Mainnet=0]="Mainnet",e[e.Testnet=128]="Testnet"})(bs||(bs={}));bs.Mainnet;var vi;(function(e){e[e.Allow=1]="Allow",e[e.Deny=2]="Deny"})(vi||(vi={}));var dt;(function(e){e[e.STX=0]="STX",e[e.Fungible=1]="Fungible",e[e.NonFungible=2]="NonFungible"})(dt||(dt={}));var Mi;(function(e){e[e.Standard=4]="Standard",e[e.Sponsored=5]="Sponsored"})(Mi||(Mi={}));var Li;(function(e){e[e.SerializeP2PKH=0]="SerializeP2PKH",e[e.SerializeP2SH=1]="SerializeP2SH",e[e.SerializeP2WPKH=2]="SerializeP2WPKH",e[e.SerializeP2WSH=3]="SerializeP2WSH",e[e.SerializeP2SHNonSequential=5]="SerializeP2SHNonSequential",e[e.SerializeP2WSHNonSequential=7]="SerializeP2WSHNonSequential"})(Li||(Li={}));var Ci;(function(e){e[e.MainnetSingleSig=22]="MainnetSingleSig",e[e.MainnetMultiSig=20]="MainnetMultiSig",e[e.TestnetSingleSig=26]="TestnetSingleSig",e[e.TestnetMultiSig=21]="TestnetMultiSig"})(Ci||(Ci={}));var Ti;(function(e){e[e.Compressed=0]="Compressed",e[e.Uncompressed=1]="Uncompressed"})(Ti||(Ti={}));var Ni;(function(e){e[e.Equal=1]="Equal",e[e.Greater=2]="Greater",e[e.GreaterEqual=3]="GreaterEqual",e[e.Less=4]="Less",e[e.LessEqual=5]="LessEqual"})(Ni||(Ni={}));var Di;(function(e){e[e.Sends=16]="Sends",e[e.DoesNotSend=17]="DoesNotSend"})(Di||(Di={}));var ms;(function(e){e[e.Origin=1]="Origin",e[e.Standard=2]="Standard",e[e.Contract=3]="Contract"})(ms||(ms={}));var Bi;(function(e){e[e.STX=0]="STX",e[e.Fungible=1]="Fungible",e[e.NonFungible=2]="NonFungible"})(Bi||(Bi={}));var _i;(function(e){e.Serialization="Serialization",e.Deserialization="Deserialization",e.SignatureValidation="SignatureValidation",e.FeeTooLow="FeeTooLow",e.BadNonce="BadNonce",e.NotEnoughFunds="NotEnoughFunds",e.NoSuchContract="NoSuchContract",e.NoSuchPublicFunction="NoSuchPublicFunction",e.BadFunctionArgument="BadFunctionArgument",e.ContractAlreadyExists="ContractAlreadyExists",e.PoisonMicroblocksDoNotConflict="PoisonMicroblocksDoNotConflict",e.PoisonMicroblockHasUnknownPubKeyHash="PoisonMicroblockHasUnknownPubKeyHash",e.PoisonMicroblockIsInvalid="PoisonMicroblockIsInvalid",e.BadAddressVersionByte="BadAddressVersionByte",e.NoCoinbaseViaMempool="NoCoinbaseViaMempool",e.ServerFailureNoSuchChainTip="ServerFailureNoSuchChainTip",e.TooMuchChaining="TooMuchChaining",e.ConflictingNonceInMempool="ConflictingNonceInMempool",e.BadTransactionVersion="BadTransactionVersion",e.TransferRecipientCannotEqualSender="TransferRecipientCannotEqualSender",e.TransferAmountMustBePositive="TransferAmountMustBePositive",e.ServerFailureDatabase="ServerFailureDatabase",e.EstimatorError="EstimatorError",e.TemporarilyBlacklisted="TemporarilyBlacklisted",e.ServerFailureOther="ServerFailureOther"})(_i||(_i={}));function Tp(e,t,n){const s=Lp;if(Vp(e,s))throw new Error(`String length exceeds maximum bytes ${s}`);return{type:ws.LengthPrefixedString,content:e,lengthPrefixBytes:1,maxLengthBytes:s}}var re;(function(e){e[e.Int=0]="Int",e[e.UInt=1]="UInt",e[e.Buffer=2]="Buffer",e[e.BoolTrue=3]="BoolTrue",e[e.BoolFalse=4]="BoolFalse",e[e.PrincipalStandard=5]="PrincipalStandard",e[e.PrincipalContract=6]="PrincipalContract",e[e.ResponseOk=7]="ResponseOk",e[e.ResponseErr=8]="ResponseErr",e[e.OptionalNone=9]="OptionalNone",e[e.OptionalSome=10]="OptionalSome",e[e.List=11]="List",e[e.Tuple=12]="Tuple",e[e.StringASCII=13]="StringASCII",e[e.StringUTF8=14]="StringUTF8"})(re||(re={}));class Np extends Error{constructor(t){super(t),this.message=t,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class wc extends Np{constructor(t){super(t)}}function Ar(e){const t=[];return t.push(gn(Ys(e.version,1))),t.push(gn(e.hash160)),Ye(t)}function Dp(e){const t=[];return t.push(e.prefix),t.push(Ar(e.address)),e.prefix===ms.Contract&&t.push(pn(e.contractName)),Ye(t)}function pn(e){const t=[],n=Zs(e.content),r=n.byteLength;return t.push(gn(Ys(r,e.lengthPrefixBytes))),t.push(n),Ye(t)}function Bp(e){const t=[];return t.push(Ar(e.address)),t.push(pn(e.contractName)),t.push(pn(e.assetName)),Ye(t)}function bc(e){const t=[];if(t.push(e.conditionType),t.push(Dp(e.principal)),(e.conditionType===dt.Fungible||e.conditionType===dt.NonFungible)&&t.push(Bp(e.assetInfo)),e.conditionType===dt.NonFungible&&t.push(Jt(e.assetName)),t.push(e.conditionCode),e.conditionType===dt.STX||e.conditionType===dt.Fungible){if(e.amount>BigInt("0xffffffffffffffff"))throw new wc("The post-condition amount may not be larger than 8 bytes");t.push(Ep(e.amount,!1,8))}return Ye(t)}function He(e,t){return Ye([e,t])}function _p(e){return new Uint8Array([e.type])}function Pp(e){return e.type===re.OptionalNone?new Uint8Array([e.type]):He(e.type,Jt(e.value))}function Op(e){const t=new Uint8Array(4);return Er(t,e.buffer.length,0),He(e.type,Qs(t,e.buffer))}function Up(e){const t=qs(Ap(e.value,BigInt(Cp)),yc);return He(e.type,t)}function jp(e){const t=qs(e.value,yc);return He(e.type,t)}function $p(e){return He(e.type,Ar(e.address))}function kp(e){return He(e.type,Qs(Ar(e.address),pn(e.contractName)))}function Hp(e){return He(e.type,Jt(e.value))}function zp(e){const t=[],n=new Uint8Array(4);Er(n,e.list.length,0),t.push(n);for(const r of e.list){const s=Jt(r);t.push(s)}return He(e.type,Ye(t))}function Fp(e){const t=[],n=new Uint8Array(4);Er(n,Object.keys(e.data).length,0),t.push(n);const r=Object.keys(e.data).sort((s,o)=>s.localeCompare(o));for(const s of r){const o=Tp(s);t.push(pn(o));const i=Jt(e.data[s]);t.push(i)}return He(e.type,Ye(t))}function mc(e,t){const n=[],r=t=="ascii"?vp(e.data):Zs(e.data),s=new Uint8Array(4);return Er(s,r.length,0),n.push(s),n.push(r),He(e.type,Ye(n))}function Rp(e){return mc(e,"ascii")}function Kp(e){return mc(e,"utf8")}function Jt(e){switch(e.type){case re.BoolTrue:case re.BoolFalse:return _p(e);case re.OptionalNone:case re.OptionalSome:return Pp(e);case re.Buffer:return Op(e);case re.UInt:return jp(e);case re.Int:return Up(e);case re.PrincipalStandard:return $p(e);case re.PrincipalContract:return kp(e);case re.ResponseOk:case re.ResponseErr:return Hp(e);case re.List:return zp(e);case re.Tuple:return Fp(e);case re.StringASCII:return Rp(e);case re.StringUTF8:return Kp(e);default:throw new wc("Unable to serialize. Invalid Clarity Value.")}}const Vp=(e,t)=>e?Zs(e).length>t:!1,Gp="modulepreload",Yp=function(e){return"/"+e},Pi={},Oi=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=Yp(u),u in Pi)return;Pi[u]=!0;const l=u.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Gp,l||(d.as="script"),d.crossOrigin="",d.href=u,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((y,g)=>{d.addEventListener("load",y),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},qp="connect-ui";let Kn,Sc,ye=!1,Ss=!1;const Ge=(e,t="")=>()=>{},Zp=(e,t)=>()=>{},Qp="{visibility:hidden}.hydrated{visibility:inherit}",Ui={},Wp="http://www.w3.org/2000/svg",Xp="http://www.w3.org/1999/xhtml",Jp=e=>e!=null,Ws=e=>(e=typeof e,e==="object"||e==="function");function Ec(e){var t,n,r;return(r=(n=(t=e.head)===null||t===void 0?void 0:t.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const ey=(e,t,...n)=>{let r=null,s=!1,o=!1;const i=[],a=l=>{for(let f=0;f<l.length;f++)r=l[f],Array.isArray(r)?a(r):r!=null&&typeof r!="boolean"&&((s=typeof e!="function"&&!Ws(r))&&(r=String(r)),s&&o?i[i.length-1].$text$+=r:i.push(s?Es(null,r):r),o=s)};if(a(n),t){const l=t.className||t.class;l&&(t.class=typeof l!="object"?l:Object.keys(l).filter(f=>l[f]).join(" "))}const u=Es(e,null);return u.$attrs$=t,i.length>0&&(u.$children$=i),u},Es=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return n.$attrs$=null,n},ty={},ny=e=>e&&e.$tag$===ty,ry=(e,t)=>e!=null&&!Ws(e)&&t&4?e==="false"?!1:e===""||!!e:e,l0=e=>en(e).$hostElement$,sy=(e,t,n)=>{const r=ie.ce(t,n);return e.dispatchEvent(r),r},ji=new WeakMap,oy=(e,t,n)=>{let r=or.get(e);xy&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=t:r.replaceSync(t)):r=t,or.set(e,r)},iy=(e,t,n,r)=>{var s;let o=Ac(t);const i=or.get(o);if(e=e.nodeType===11?e:Pe,i)if(typeof i=="string"){e=e.head||e;let a=ji.get(e),u;if(a||ji.set(e,a=new Set),!a.has(o)){{u=Pe.createElement("style"),u.innerHTML=i;const l=(s=ie.$nonce$)!==null&&s!==void 0?s:Ec(Pe);l!=null&&u.setAttribute("nonce",l),e.insertBefore(u,e.querySelector("link"))}a&&a.add(o)}}else e.adoptedStyleSheets.includes(i)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,i]);return o},ay=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,s=Ge("attachStyles",t.$tagName$),o=iy(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);r&10&&(n["s-sc"]=o,n.classList.add(o+"-h")),s()},Ac=(e,t)=>"sc-"+e.$tagName$,$i=(e,t,n,r,s,o)=>{if(n!==r){let i=Hi(e,t),a=t.toLowerCase();if(t==="class"){const u=e.classList,l=ki(n),f=ki(r);u.remove(...l.filter(d=>d&&!f.includes(d))),u.add(...f.filter(d=>d&&!l.includes(d)))}else if(!i&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):Hi(Ir,a)?t=a.slice(2):t=a[2]+t.slice(3),n&&ie.rel(e,t,n,!1),r&&ie.ael(e,t,r,!1);else{const u=Ws(r);if((i||u&&r!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=r;else{const l=r??"";t==="list"?i=!1:(n==null||e[t]!=l)&&(e[t]=l)}}catch{}r==null||r===!1?(r!==!1||e.getAttribute(t)==="")&&e.removeAttribute(t):(!i||o&4||s)&&!u&&(r=r===!0?"":r,e.setAttribute(t,r))}}},cy=/\s/,ki=e=>e?e.split(cy):[],Ic=(e,t,n,r)=>{const s=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||Ui,i=t.$attrs$||Ui;for(r in o)r in i||$i(s,r,o[r],void 0,n,t.$flags$);for(r in i)$i(s,r,o[r],i[r],n,t.$flags$)},Xs=(e,t,n,r)=>{const s=t.$children$[n];let o=0,i,a;if(s.$text$!==null)i=s.$elm$=Pe.createTextNode(s.$text$);else{if(ye||(ye=s.$tag$==="svg"),i=s.$elm$=Pe.createElementNS(ye?Wp:Xp,s.$tag$),ye&&s.$tag$==="foreignObject"&&(ye=!1),Ic(null,s,ye),Jp(Kn)&&i["s-si"]!==Kn&&i.classList.add(i["s-si"]=Kn),s.$children$)for(o=0;o<s.$children$.length;++o)a=Xs(e,s,o),a&&i.appendChild(a);s.$tag$==="svg"?ye=!1:i.tagName==="foreignObject"&&(ye=!0)}return i},xc=(e,t,n,r,s,o)=>{let i=e,a;for(i.shadowRoot&&i.tagName===Sc&&(i=i.shadowRoot);s<=o;++s)r[s]&&(a=Xs(null,n,s),a&&(r[s].$elm$=a,i.insertBefore(a,t)))},vc=(e,t,n,r,s)=>{for(;t<=n;++t)(r=e[t])&&(s=r.$elm$,s.remove())},uy=(e,t,n,r)=>{let s=0,o=0,i=t.length-1,a=t[0],u=t[i],l=r.length-1,f=r[0],d=r[l],y;for(;s<=i&&o<=l;)a==null?a=t[++s]:u==null?u=t[--i]:f==null?f=r[++o]:d==null?d=r[--l]:Hn(a,f)?(an(a,f),a=t[++s],f=r[++o]):Hn(u,d)?(an(u,d),u=t[--i],d=r[--l]):Hn(a,d)?(an(a,d),e.insertBefore(a.$elm$,u.$elm$.nextSibling),a=t[++s],d=r[--l]):Hn(u,f)?(an(u,f),e.insertBefore(u.$elm$,a.$elm$),u=t[--i],f=r[++o]):(y=Xs(t&&t[o],n,o),f=r[++o],y&&a.$elm$.parentNode.insertBefore(y,a.$elm$));s>i?xc(e,r[l+1]==null?null:r[l+1].$elm$,n,r,o,l):o>l&&vc(t,s,i)},Hn=(e,t)=>e.$tag$===t.$tag$,an=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,s=t.$children$,o=t.$tag$,i=t.$text$;i===null?(ye=o==="svg"?!0:o==="foreignObject"?!1:ye,Ic(e,t,ye),r!==null&&s!==null?uy(n,r,t,s):s!==null?(e.$text$!==null&&(n.textContent=""),xc(n,null,t,s,0,s.length-1)):r!==null&&vc(r,0,r.length-1),ye&&o==="svg"&&(ye=!1)):e.$text$!==i&&(n.data=i)},ly=(e,t)=>{const n=e.$hostElement$,r=e.$vnode$||Es(null,null),s=ny(t)?t:ey(null,null,t);Sc=n.tagName,s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=r.$elm$=n.shadowRoot||n,Kn=n["s-sc"],an(r,s)},Mc=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(n=>e.$onRenderResolve$=n))},Js=(e,t)=>{if(e.$flags$|=16,e.$flags$&4){e.$flags$|=512;return}return Mc(e,e.$ancestorComponent$),My(()=>fy(e,t))},fy=(e,t)=>{const n=Ge("scheduleUpdate",e.$cmpMeta$.$tagName$),r=e.$lazyInstance$;let s;return n(),py(s,()=>dy(e,r,t))},dy=async(e,t,n)=>{const r=e.$hostElement$,s=Ge("update",e.$cmpMeta$.$tagName$),o=r["s-rc"];n&&ay(e);const i=Ge("render",e.$cmpMeta$.$tagName$);hy(e,t),o&&(o.map(a=>a()),r["s-rc"]=void 0),i(),s();{const a=r["s-p"],u=()=>gy(e);a.length===0?u():(Promise.all(a).then(u),e.$flags$|=4,a.length=0)}},hy=(e,t,n)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,ly(e,t)}catch(r){yn(r,e.$hostElement$)}return null},gy=e=>{const t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=Ge("postUpdate",t),s=e.$ancestorComponent$;e.$flags$&64?r():(e.$flags$|=64,Cc(n),r(),e.$onReadyResolve$(n),s||Lc()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),e.$flags$&512&&to(()=>Js(e,!1)),e.$flags$&=-517},Lc=e=>{Cc(Pe.documentElement),to(()=>sy(Ir,"appload",{detail:{namespace:qp}}))},py=(e,t)=>e&&e.then?e.then(t):t(),Cc=e=>e.classList.add("hydrated"),yy=(e,t)=>en(e).$instanceValues$.get(t),wy=(e,t,n,r)=>{const s=en(e),o=s.$instanceValues$.get(t),i=s.$flags$,a=s.$lazyInstance$;n=ry(n,r.$members$[t][0]);const u=Number.isNaN(o)&&Number.isNaN(n),l=n!==o&&!u;(!(i&8)||o===void 0)&&l&&(s.$instanceValues$.set(t,n),a&&(i&18)===2&&Js(s,!1))},Tc=(e,t,n)=>{if(t.$members$){const r=Object.entries(t.$members$),s=e.prototype;if(r.map(([o,[i]])=>{(i&31||n&2&&i&32)&&Object.defineProperty(s,o,{get(){return yy(this,o)},set(a){wy(this,o,a,t)},configurable:!0,enumerable:!0})}),n&1){const o=new Map;s.attributeChangedCallback=function(i,a,u){ie.jmp(()=>{const l=o.get(i);if(this.hasOwnProperty(l))u=this[l],delete this[l];else if(s.hasOwnProperty(l)&&typeof this[l]=="number"&&this[l]==u)return;this[l]=u===null&&typeof this[l]=="boolean"?!1:u})},e.observedAttributes=r.filter(([i,a])=>a[0]&15).map(([i,a])=>{const u=a[1]||i;return o.set(u,i),u})}}return e},by=async(e,t,n,r,s)=>{if(!(t.$flags$&32)){{if(t.$flags$|=32,s=Iy(n),s.then){const u=Zp();s=await s,u()}s.isProxied||(Tc(s,n,2),s.isProxied=!0);const a=Ge("createInstance",n.$tagName$);t.$flags$|=8;try{new s(t)}catch(u){yn(u)}t.$flags$&=-9,a()}if(s.style){let a=s.style;const u=Ac(n);if(!or.has(u)){const l=Ge("registerStyles",n.$tagName$);oy(u,a,!!(n.$flags$&1)),l()}}}const o=t.$ancestorComponent$,i=()=>Js(t,!0);o&&o["s-rc"]?o["s-rc"].push(i):i()},my=e=>{if(!(ie.$flags$&1)){const t=en(e),n=t.$cmpMeta$,r=Ge("connectedCallback",n.$tagName$);if(!(t.$flags$&1)){t.$flags$|=1;{let s=e;for(;s=s.parentNode||s.host;)if(s["s-p"]){Mc(t,t.$ancestorComponent$=s);break}}n.$members$&&Object.entries(n.$members$).map(([s,[o]])=>{if(o&31&&e.hasOwnProperty(s)){const i=e[s];delete e[s],e[s]=i}}),by(e,t,n)}r()}},Sy=e=>{ie.$flags$&1||en(e)},Ey=(e,t={})=>{var n;const r=Ge(),s=[],o=t.exclude||[],i=Ir.customElements,a=Pe.head,u=a.querySelector("meta[charset]"),l=Pe.createElement("style"),f=[];let d,y=!0;Object.assign(ie,t),ie.$resourcesUrl$=new URL(t.resourcesUrl||"./",Pe.baseURI).href,e.map(g=>{g[1].map(m=>{const E={$flags$:m[0],$tagName$:m[1],$members$:m[2],$listeners$:m[3]};E.$members$=m[2];const v=E.$tagName$,B=class extends HTMLElement{constructor(_){super(_),_=this,Ay(_,E),E.$flags$&1&&_.attachShadow({mode:"open"})}connectedCallback(){d&&(clearTimeout(d),d=null),y?f.push(this):ie.jmp(()=>my(this))}disconnectedCallback(){ie.jmp(()=>Sy(this))}componentOnReady(){return en(this).$onReadyPromise$}};E.$lazyBundleId$=g[0],!o.includes(v)&&!i.get(v)&&(s.push(v),i.define(v,Tc(B,E,1)))})});{l.innerHTML=s+Qp,l.setAttribute("data-styles","");const g=(n=ie.$nonce$)!==null&&n!==void 0?n:Ec(Pe);g!=null&&l.setAttribute("nonce",g),a.insertBefore(l,u?u.nextSibling:a.firstChild)}y=!1,f.length?f.map(g=>g.connectedCallback()):ie.jmp(()=>d=setTimeout(Lc,30)),r()},eo=new WeakMap,en=e=>eo.get(e),f0=(e,t)=>eo.set(t.$lazyInstance$=e,t),Ay=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onReadyPromise$=new Promise(r=>n.$onReadyResolve$=r),e["s-p"]=[],e["s-rc"]=[],eo.set(e,n)},Hi=(e,t)=>t in e,yn=(e,t)=>(0,console.error)(e,t),Gr=new Map,Iy=(e,t,n)=>{const r=e.$tagName$.replace(/-/g,"_"),s=e.$lazyBundleId$,o=Gr.get(s);if(o)return o[r];{const i=a=>(Gr.set(s,a),a[r]);switch(s){case"connect-modal":return Oi(()=>import("./connect-modal.entry-DN1msSpD.js"),[]).then(i,yn)}}return Oi(()=>import(`./${s}.entry.js`),[]).then(i=>(Gr.set(s,i),i[r]),yn)},or=new Map,Ir=typeof window<"u"?window:{},Pe=Ir.document||{head:{}},ie={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},Nc=e=>Promise.resolve(e),xy=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),zi=[],Dc=[],vy=(e,t)=>n=>{e.push(n),Ss||(Ss=!0,ie.$flags$&4?to(As):ie.raf(As))},Fi=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){yn(n)}e.length=0},As=()=>{Fi(zi),Fi(Dc),(Ss=zi.length>0)&&ie.raf(As)},to=e=>Nc().then(e),My=vy(Dc),Ly=()=>Nc(),Cy=(e,t)=>typeof window>"u"?Promise.resolve():Ly().then(()=>Ey([["connect-modal",[[1,"connect-modal",{defaultProviders:[16],installedProviders:[16],persistSelection:[4,"persist-selection"],callback:[16],cancelCallback:[16]}]]]],t));(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}})();var Ty=Object.defineProperty,Ny=Object.defineProperties,Dy=Object.getOwnPropertyDescriptors,ir=Object.getOwnPropertySymbols,Bc=Object.prototype.hasOwnProperty,_c=Object.prototype.propertyIsEnumerable,Ri=(e,t,n)=>t in e?Ty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$e=(e,t)=>{for(var n in t||(t={}))Bc.call(t,n)&&Ri(e,n,t[n]);if(ir)for(var n of ir(t))_c.call(t,n)&&Ri(e,n,t[n]);return e},at=(e,t)=>Ny(e,Dy(t)),By=(e,t)=>{var n={};for(var r in e)Bc.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ir)for(var r of ir(e))t.indexOf(r)<0&&_c.call(e,r)&&(n[r]=e[r]);return n};function no(){return fc(hc())||window.StacksProvider||window.BlockstackProvider}function ro(e){return e?typeof e=="string"?It.fromName(e):"version"in e?e:"url"in e?new gs({url:e.url}):e.transactionVersion===Me.Mainnet?new gs({url:e.client.baseUrl}):new ps({url:e.client.baseUrl}):new ps}typeof window<"u"&&(window.__CONNECT_VERSION__="__VERSION__");var _y=e=>{if(!e){let t=new cr(["store_write"],document.location.href);e=new hn({appConfig:t})}return e},Py=async(e,t=no())=>{if(!t)throw new Error("[Connect] No installed Stacks wallet found");let{redirectTo:n="/",manifestPath:r,onFinish:s,onCancel:o,sendToSignIn:i=!1,userSession:a,appDetails:u}=e,l=_y(a);l.isUserSignedIn()&&l.signUserOut();let f=l.generateAndStoreTransitKey(),d=l.makeAuthRequest(f,`${document.location.origin}${n}`,`${document.location.origin}${r}`,l.appConfig.scopes,void 0,void 0,{sendToSignIn:i,appDetails:u,connectVersion:"__VERSION__"});try{let y=await t.authenticationRequest(d);await l.handlePendingSignIn(y);let g=ae.decodeToken(y),m=g==null?void 0:g.payload;s==null||s({authResponse:y,authResponsePayload:m,userSession:l})}catch(y){console.error("[Connect] Error during auth request",y),o==null||o()}},Oy=(e=>(e.ContractCall="contract_call",e.ContractDeploy="smart_contract",e.STXTransfer="token_transfer",e))(Oy||{}),Uy=(e=>(e.BUFFER="buffer",e.UINT="uint",e.INT="int",e.PRINCIPAL="principal",e.BOOL="bool",e))(Uy||{}),so=e=>{let t=e;if(!t){let n=new cr(["store_write"],document.location.href);t=new hn({appConfig:n})}return t};function jy(e){try{return so(e).loadUserData().appPrivateKey}catch{return!1}}var $y=e=>{let t=so(e).loadUserData().appPrivateKey,n=ae.SECP256K1Client.derivePublicKey(t);return{privateKey:t,publicKey:n}};function ky(e){var t;let{stxAddress:n,userSession:r,network:s}=e;if(n)return n;if(!r||!s)return;let o=(t=r==null?void 0:r.loadUserData().profile)==null?void 0:t.stxAddress,i={[St.Mainnet]:"mainnet",[St.Testnet]:"testnet"},a=ro(s);return o==null?void 0:o[i[a.chainId]]}function Hy(e){let t=ro(e.network),n=so(e.userSession),r=at($e({},e),{network:t,userSession:n});return $e({stxAddress:ky(r)},r)}async function zy(e,t){let{postConditions:n}=e;return n&&n.length>0&&typeof n[0]!="string"&&(typeof n[0].type=="string"?n=n.map(lc):n=n.map(r=>N(bc(r)))),new ae.TokenSigner("ES256k",t).signAsync(at($e({},e),{postConditions:n}))}function Fy(e){let{postConditions:t}=e;return t&&t.length>0&&typeof t[0]!="string"&&(typeof t[0].type=="string"?t=t.map(lc):t=t.map(n=>N(bc(n)))),ae.createUnsecuredToken(at($e({},e),{postConditions:t}))}var Ry=async({token:e,options:t},n)=>{var r,s,o;try{let i=await n.transactionRequest(e),{txRaw:a}=i,u=R(a.replace(/^0x/,"")),l=np(u);if("sponsored"in t&&t.sponsored){(r=t.onFinish)==null||r.call(t,at($e({},i),{stacksTransaction:l}));return}(s=t.onFinish)==null||s.call(t,at($e({},i),{stacksTransaction:l}))}catch(i){console.error("[Connect] Error during transaction request",i),(o=t.onCancel)==null||o.call(t)}},Ky=async e=>{let t=e,{functionArgs:n,appDetails:r,userSession:s}=t,o=By(t,["functionArgs","appDetails","userSession"]),i=n.map(u=>typeof u=="string"?u:typeof u.type=="string"?xg(u):N(Jt(u)));if(jy(s)){let{privateKey:u,publicKey:l}=$y(s),f=at($e({},o),{functionArgs:i,txType:"contract_call",publicKey:l});return r&&(f.appDetails=r),zy(f,u)}let a=at($e({},o),{functionArgs:i,txType:"contract_call"});return r&&(a.appDetails=r),Fy(a)};async function Vy(e,t,n){let r=await t(at($e($e({},Hy(e)),e),{network:ro(e.network)}));return Ry({token:r,options:e},n)}function Gy(e,t=no()){if(!t)throw new Error("[Connect] No installed Stacks wallet found");return Vy(e,Ky,t)}var Yy=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY",e))(Yy||{}),Pc="asigna-stx",Ki=(e,t)=>new Promise(n=>{function r(s){s.data.source===Pc&&s.data[t]&&(n(s.data[t]),window.removeEventListener("message",r))}window.addEventListener("message",r),window.top.postMessage(Zy(e,t),"*")}),qy={authenticationRequest:async e=>Ki(e,"authenticationRequest"),transactionRequest:async e=>Ki(e,"transactionRequest")},Zy=(e,t)=>({source:Pc,[t]:e}),Qy=()=>{typeof window>"u"||window.top!==window.self&&(window.AsignaProvider=qy)};Qy();var Wy=[{id:"LeatherProvider",name:"Leather",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iMjYuODM4NyIgZmlsbD0iIzEyMTAwRiIvPgo8cGF0aCBkPSJNNzQuOTE3MSA1Mi43MTE0QzgyLjQ3NjYgNTEuNTQwOCA5My40MDg3IDQzLjU4MDQgOTMuNDA4NyAzNy4zNzYxQzkzLjQwODcgMzUuNTAzMSA5MS44OTY4IDM0LjIxNTQgODkuNjg3MSAzNC4yMTU0Qzg1LjUwMDQgMzQuMjE1NCA3OC40MDYxIDQwLjUzNjggNzQuOTE3MSA1Mi43MTE0Wk0zOS45MTEgODMuNDk5MUMzMC4wMjU2IDgzLjQ5OTEgMjkuMjExNSA5My4zMzI0IDM5LjA5NjkgOTMuMzMyNEM0My41MTYzIDkzLjMzMjQgNDguODY2MSA5MS41NzY0IDUxLjY1NzMgODguNDE1N0M0Ny41ODY4IDg0LjkwMzggNDQuMjE0MSA4My40OTkxIDM5LjkxMSA4My40OTkxWk0xMDIuODI5IDc5LjI4NDhDMTAzLjQxIDk1Ljc5MDcgOTUuMDM2OSAxMDUuMDM5IDgwLjg0ODQgMTA1LjAzOUM3Mi40NzQ4IDEwNS4wMzkgNjguMjg4MSAxMDEuODc4IDU5LjMzMyA5Ni4wMjQ5QzU0LjY4MSAxMDEuMTc2IDQ1Ljg0MjMgMTA1LjAzOSAzOC41MTU0IDEwNS4wMzlDMTMuMjc4NSAxMDUuMDM5IDE0LjMyNTIgNzIuODQ2MyA0MC4wMjczIDcyLjg0NjNDNDUuMzc3MSA3Mi44NDYzIDQ5LjkxMjggNzQuMjUxMSA1NS43Mjc3IDc3Ljg4TDU5LjU2NTYgNjQuNDE3N0M0My43NDg5IDYwLjA4NjQgMzUuODQwNSA0Ny45MTE4IDQzLjYzMjYgMzAuNDY5M0g1Ni4xOTI5QzQ5LjIxNSA0Mi4wNTg2IDUzLjk4MzIgNTEuNjU3OCA2Mi44MjIgNTIuNzExNEM2Ny41OTAzIDM1LjczNzIgNzcuODI0NiAyMi41MDkgOTEuNDMxNiAyMi41MDlDOTkuMTA3NCAyMi41MDkgMTA1LjE1NSAyNy41NDI4IDEwNS4xNTUgMzYuNjczN0MxMDUuMTU1IDUxLjMwNjYgODYuMDgxOSA2My4yNDcxIDcxLjY2MDcgNjQuNDE3N0w2NS43Mjk1IDg1LjM3MjFDNzIuNDc0OCA5My4yMTUzIDkxLjE5OSAxMDAuODI0IDkxLjE5OSA3OS4yODQ4SDEwMi44MjlaIiBmaWxsPSIjRjVGMUVEIi8+Cjwvc3ZnPgo=",webUrl:"https://leather.io",chromeWebStoreUrl:"https://chrome.google.com/webstore/detail/hiro-wallet/ldinpeekobnhjjdofggfgjlcehhmanlj",mozillaAddOnsUrl:"https://leather.io/install-extension"},{id:"XverseProviders.StacksProvider",name:"Xverse Wallet",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMxNzE3MTciIGQ9Ik0wIDBoNjAwdjYwMEgweiIvPjxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTQ0MCA0MzUuNHYtNTFjMC0yLS44LTMuOS0yLjItNS4zTDIyMCAxNjIuMmE3LjYgNy42IDAgMCAwLTUuNC0yLjJoLTUxLjFjLTIuNSAwLTQuNiAyLTQuNiA0LjZ2NDcuM2MwIDIgLjggNCAyLjIgNS40bDc4LjIgNzcuOGE0LjYgNC42IDAgMCAxIDAgNi41bC03OSA3OC43Yy0xIC45LTEuNCAyLTEuNCAzLjJ2NTJjMCAyLjQgMiA0LjUgNC42IDQuNUgyNDljMi42IDAgNC42LTIgNC42LTQuNlY0MDVjMC0xLjIuNS0yLjQgMS40LTMuM2w0Mi40LTQyLjJhNC42IDQuNiAwIDAgMSA2LjQgMGw3OC43IDc4LjRhNy42IDcuNiAwIDAgMCA1LjQgMi4yaDQ3LjVjMi41IDAgNC42LTIgNC42LTQuNloiLz48cGF0aCBmaWxsPSIjRUU3QTMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIGQ9Ik0zMjUuNiAyMjcuMmg0Mi44YzIuNiAwIDQuNiAyLjEgNC42IDQuNnY0Mi42YzAgNCA1IDYuMSA4IDMuMmw1OC43LTU4LjVjLjgtLjggMS4zLTIgMS4zLTMuMnYtNTEuMmMwLTIuNi0yLTQuNi00LjYtNC42TDM4NCAxNjBjLTEuMiAwLTIuNC41LTMuMyAxLjNsLTU4LjQgNTguMWE0LjYgNC42IDAgMCAwIDMuMiA3LjhaIi8+PC9nPjwvc3ZnPg==",webUrl:"https://xverse.app",chromeWebStoreUrl:"https://chrome.google.com/webstore/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg",googlePlayStoreUrl:"https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse",iOSAppStoreUrl:"https://apps.apple.com/app/xverse-bitcoin-web3-wallet/id1552272513",mozillaAddOnsUrl:"https://www.xverse.app/download"},{id:"AsignaProvider",name:"Asigna Multisig",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMDEwMCIgZD0iTTAgMGgzMnYzMkgweiIvPjxwYXRoIGZpbGw9InVybCgjYSkiIGQ9Ik0xNS4xMSA1LjU1YTMgMyAwIDAgMC0xLjgyIDEuM2wtLjA1LjA4LS40My43Mi0uMDcuMTEtLjUuODUtLjA1LjA5LTEuMjkgMi4xOC0uMDQuMDctLjQ3LjgtLjA2LjEtLjQ2Ljc4LS4wNy4xMS0xLjYzIDIuNzYtLjA3LjExLS4zOC42Ni0uMDUuMDgtLjczIDEuMjQtLjM1LjYtLjQuNjctLjA1LjA5TDUuMSAyMC43bC0uMTEuMTgtLjE0LjIzLS4wNy4xMy0uMzMuNTUtLjA0LjA3di4wMWExLjI2IDEuMjYgMCAwIDAtLjE0LjQ3IDEuMzEgMS4zMSAwIDAgMCAxLjI0IDEuNGgxLjVsLjA1LS4wNi4wNC0uMDYuODctMS4yMS4wNS0uMDguNzctMS4wNy4wNS0uMDcuNC0uNTcuMDUtLjA2LjI0LS4zNGExLjUyIDEuNTIgMCAwIDEgMS4zOS0uNjIgMS41IDEuNSAwIDAgMSAuNjQuMiAxLjQ3IDEuNDcgMCAwIDEgLjczIDEuMjcgMS40NCAxLjQ0IDAgMCAxLS4yNy44NGwtLjYzLjg4LS4wNS4wNy0uMzIuNDUtLjA2LjA4LS4wOC4xMi0uMTIuMTYtLjA1LjA4aDIuMTNhMi4zMiAyLjMyIDAgMCAwIDEuNzctLjk2bDEuMTgtMS42My43Ny0xLjA4IDEuMy0xLjhhMS4yNCAxLjI0IDAgMCAxIC41NS0uNDNsLjA4LS4wM2ExLjMgMS4zIDAgMCAxIC4zLS4wNiAxLjI4IDEuMjggMCAwIDEgMS4xNS41NGwuMTEuMmExLjEzIDEuMTMgMCAwIDEgLjEuNDEgMS4xOSAxLjE5IDAgMCAxLS4yMy43N2wtLjAzLjA1LS41Ny44LS43Ljk4LS4yNy4zN2ExLjIyIDEuMjIgMCAwIDAtLjIuNSAxLjA1IDEuMDUgMCAwIDAtLjAyLjIzdi4wNmExLjE3IDEuMTcgMCAwIDAgLjE0LjQzbC4wMi4wNS4wNy4xYTEuNDQgMS40NCAwIDAgMCAuMS4xMWwuMDUuMDYuMDEuMDFhMS44IDEuOCAwIDAgMCAuMTQuMWMwIC4wMi4wMi4wMy4wNC4wM2ExIDEgMCAwIDAgLjA4LjA1bC4wNy4wNGExLjI1IDEuMjUgMCAwIDAgLjUuMWg2LjljLjEgMCAuMi0uMDEuMjktLjAzbC4wNi0uMDJhMS4yNyAxLjI3IDAgMCAwIC4yNy0uMS41Ny41NyAwIDAgMCAuMDctLjAzIDEuMjEgMS4yMSAwIDAgMCAuMjYtLjE5bC4wOC0uMDdhLjkyLjkyIDAgMCAwIC4xNS0uMTkgMS41NSAxLjU1IDAgMCAwIC4wOS0uMTdsLjAyLS4wNWExLjIyIDEuMjIgMCAwIDAgLjA4LS4yNnYtLjA0bC4wMi0uMDh2LS4wOGExLjMyIDEuMzIgMCAwIDAtLjItLjc0bC0xLjYtMi42NC0uMDYtLjEtLjItLjMyLS4zMy0uNTR2LS4wMWwtLjA1LS4wOC0xLjMtMi4xNS0uMDctLjEtLjA0LS4wNi0uOC0xLjMyLS4wNC0uMDctLjItLjM0LS4xLS4xNC0uMS0uMTYtLjUzLS45LS4xMy0uMi0uMDktLjE0LTIuMTctMy41Ny0uMDQtLjA3LS43Mi0xLjE5LS4wNS0uMDctLjQtLjY1YTIuNjUgMi42NSAwIDAgMC0uMy0uNCAyLjk2IDIuOTYgMCAwIDAtLjk3LS43NCAzLjA0IDMuMDQgMCAwIDAtMS4zLS4zYy0uMjUgMC0uNS4wNC0uNzQuMVoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJNMTkgMTYuM2E1LjQ1IDUuNDUgMCAwIDAtLjgzIDEuNTZsLS4wNC4xNWExLjM2IDEuMzYgMCAwIDEgLjI4LS4xNiAxLjI0IDEuMjQgMCAwIDEgLjM4LS4wOGguMWExLjI4IDEuMjggMCAwIDEgMS4wNS41NGMuMDQuMDYuMDguMTMuMS4yYTEuMjQgMS4yNCAwIDAgMSAuMDkuMjcgMS4xOSAxLjE5IDAgMCAxLS4yLjkxbC0uMDQuMDUtLjU3Ljc5LS43Ljk5LS4yNy4zN2ExLjIzIDEuMjMgMCAwIDAtLjIuNDIgMS4wNiAxLjA2IDAgMCAwLS4wMi4zMXYuMDZhMS4xNyAxLjE3IDAgMCAwIC4xNi40Ny45My45MyAwIDAgMCAuMDcuMSAxLjUgMS41IDAgMCAwIC4xLjEybC4wNS4wNmguMDFhMS45NCAxLjk0IDAgMCAwIC4wOS4wOCAxIDEgMCAwIDAgLjE3LjFsLjA3LjA0YTEuMjUgMS4yNSAwIDAgMCAuNS4xaDYuOWMuMSAwIC4yIDAgLjI4LS4wMmwuMDctLjAyYTEuMzIgMS4zMiAwIDAgMCAuMzQtLjEzbC4xNi0uMS4wMy0uMDNhMS4yOSAxLjI5IDAgMCAwIC4yLS4yIDIuNDMgMi40MyAwIDAgMCAuMTItLjE3Yy4wMy0uMDMuMDUtLjA4LjA3LS4xMmwuMDItLjA1YTEuMjEgMS4yMSAwIDAgMCAuMDktLjN2LS4wOGwuMDEtLjA5YTEuMzIgMS4zMiAwIDAgMC0uMi0uNzNsLTEuNi0yLjY0LS4wNi0uMS0uMi0uMzItLjMzLS41NHYtLjAybC0uMDUtLjA3LTEuMy0yLjE1LS4xMi0uMDctLjA3LS4wNGE0Ljk0IDQuOTQgMCAwIDAtMi40Ni0uNjdjLTEuMDMgMC0xLjc2LjU3LTIuMjYgMS4yWiIvPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMi4yOSAyMS4wOGMwIC4yOS0uMDkuNTgtLjI3Ljg0bC0xLjMxIDEuODRIN2wyLjUyLTMuNTNhMS41NCAxLjU0IDAgMCAxIDIuMS0uMzZjLjQzLjI4LjY2Ljc0LjY2IDEuMloiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTEuMTYgMjEuMjVhLjU2LjU2IDAgMCAxLS41Ny41NS41Ni41NiAwIDAgMS0uNTctLjU2LjU2LjU2IDAgMCAxIC41Ny0uNTUuNTYuNTYgMCAwIDEgLjU3LjU2WiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjE1LjIzIiB4Mj0iMTkuMyIgeTE9IjI1Ljc4IiB5Mj0iNi4xMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM2NTIyRjQiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzlCNkJGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0E1ODVGRiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMjIuNTkiIHgyPSIyNC44IiB5MT0iMjQuNzEiIHkyPSIxNS41MyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiM0MjFGOEIiLz48c3RvcCBvZmZzZXQ9Ii41NSIgc3RvcC1jb2xvcj0iIzcyMzBGRiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzk3NzNGRiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==",webUrl:"https://asigna.io",chromeWebStoreUrl:"https://stx.asigna.io/"}];function Xy(e,t=!0){return function(n,r){var s;if(r)return e(n,r);let o=hc(),i=no();if(o&&i)return e(n,i);if(typeof window>"u")return;Cy();let a=(s=n==null?void 0:n.defaultProviders)!=null?s:Wy,u=fp(a),l=document.createElement("connect-modal");l.defaultProviders=a,l.installedProviders=u,l.persistSelection=t;let f=document.body.style.overflow;document.body.style.overflow="hidden";let d=()=>{l.remove(),document.body.style.overflow=f};l.callback=g=>{d(),e(n,g)},l.cancelCallback=()=>{var g;d(),(g=n.onCancel)==null||g.call(n)},document.body.appendChild(l);let y=g=>{g.key==="Escape"&&(document.removeEventListener("keydown",y),l.remove())};document.addEventListener("keydown",y)}}var Jy=Xy(Py,!1);const e0="ST3C1W3GS1ZWN14DSJ9744K21F03HSS37A6SKVMKQ",t0="devtask-ledger",Oc="testnet",n0=document.getElementById("app");n0.innerHTML=`
  <div style="font-family:system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; max-width:720px; margin:40px auto;">
    <h1> DevTask Ledger (Frontend)</h1>
    <div style="margin:20px 0;">
      <button id="connectBtn">Connect Wallet</button>
      <button id="disconnectBtn" style="display:none; margin-left:8px;">Disconnect</button>
    </div>
    <div id="walletInfo" style="display:none; background:#f3f4f6; padding:12px; border-radius:8px;">
      <div><strong>Connected:</strong> <span id="userAddress" style="font-family:monospace"></span></div>
      <div style="margin-top:8px">Tasks logged: <span id="taskCount">0</span></div>
    </div>

    <div id="taskForm" style="display:none; margin-top:16px;">
      <div style="margin-bottom:8px"><input id="taskTitle" placeholder="Task title" style="width:100%; padding:8px;"/></div>
      <div style="margin-bottom:8px"><textarea id="taskDesc" placeholder="Task description" style="width:100%; padding:8px; height:100px"></textarea></div>
      <div><button id="logTaskBtn">Log Task</button></div>
    </div>

    <div id="status" style="margin-top:12px; min-height:24px"></div>
  </div>
`;const r0=new cr(["store_write","publish_data"]),wn=new hn({appConfig:r0});let bn=null;function nt(e,t){const n=document.getElementById("status");n.textContent=e,n.style.color=t==="error"?"#b91c1c":t==="success"?"#065f46":"#0f172a"}async function s0(){nt("Connecting wallet...","loading");try{await Jy({appDetails:{name:"DevTask Ledger",icon:window.location.origin+"/favicon.svg"},redirectTo:"/",userSession:wn,onFinish:()=>{bn=wn.loadUserData(),oo(),nt("Wallet connected","success")}})}catch(e){console.error(e),nt("Connect failed: "+((e==null?void 0:e.message)||String(e)),"error")}}function o0(){wn.signUserOut(),bn=null,oo(),nt("Disconnected","")}async function i0(){const e=document.getElementById("taskTitle").value.trim(),t=document.getElementById("taskDesc").value.trim();if(!e||!t)return nt("Please fill both fields","error");nt("Submitting transaction...","loading");try{await Gy({contractAddress:e0,contractName:t0,functionName:"log-task",functionArgs:[fs(e),fs(t)],network:Oc,appDetails:{name:"DevTask Ledger",icon:window.location.origin+"/favicon.svg"},onFinish:n=>{nt("Task logged! Tx: "+n.txId,"success"),document.getElementById("taskTitle").value="",document.getElementById("taskDesc").value="",setTimeout(Uc,2e3)}})}catch(n){console.error("logTask error",n),nt("Error: "+((n==null?void 0:n.message)||String(n)),"error")}}function oo(){const e=document.getElementById("connectBtn"),t=document.getElementById("disconnectBtn"),n=document.getElementById("walletInfo"),r=document.getElementById("taskForm"),s=document.getElementById("userAddress");bn?(e.style.display="none",t.style.display="inline-block",n.style.display="block",r.style.display="block",s.textContent=bn.profile.stxAddress[Oc]||"",Uc()):(e.style.display="inline-block",t.style.display="none",n.style.display="none",r.style.display="none")}async function Uc(){document.getElementById("tasks");try{document.getElementById("taskCount").textContent=""}catch(e){console.warn("loadTasks error",e)}}document.getElementById("connectBtn").addEventListener("click",s0);document.getElementById("disconnectBtn").addEventListener("click",o0);document.getElementById("logTaskBtn").addEventListener("click",i0);wn.isUserSignedIn()&&(bn=wn.loadUserData(),oo());console.log("Frontend initialized");export{l0 as a,fc as g,ey as h,f0 as r,u0 as s};
